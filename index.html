<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sport op TV Vanavond</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #22c55e;
            --primary-light: #4ade80;
            --primary-dark: #16a34a;
            --bg: #ffffff;
            --bg-secondary: #f5f5f5;
            --header-bg: #1a472a;
            --card-bg: #ffffff;
            --card-border: #e5e5e5;
            --glass-bg: rgba(255, 255, 255, 0.9);
            --text: #1a1a1a;
            --text-secondary: #666666;
            --border: #e5e5e5;
            --success: #10b981;
            --football: #22c55e;
            --football-glow: rgba(34, 197, 94, 0.3);
            --darts: #f97316;
            --darts-glow: rgba(249, 115, 22, 0.3);
            --f1: #ef4444;
            --f1-glow: rgba(239, 68, 68, 0.3);
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-hover: 0 4px 16px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --radius-sm: 8px;
            --comp-header-bg: #f5f5f5;
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --bg-secondary: #1e293b;
            --header-bg: #0f172a;
            --card-bg: #1e293b;
            --card-border: #334155;
            --glass-bg: rgba(30, 41, 59, 0.9);
            --text: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-hover: 0 4px 16px rgba(0, 0, 0, 0.4);
            --comp-header-bg: #1e293b;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            transition: background 0.3s ease, color 0.3s ease;
        }

        body::before {
            display: none; /* Verwijderd: paarse gradient achtergrond */
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Section (BeSoccer style) */
        .header-section {
            background: var(--header-bg);
            margin-bottom: 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        [data-theme="light"] .header-section {
            background: #1a472a;
        }

        /* Title Bar - Row 1 */
        .title-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
        }

        .title-bar h1 {
            font-size: 1.1rem;
            font-weight: 700;
            color: #ffffff;
            margin: 0;
        }

        .title-bar-icons {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .icon-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: transparent;
            border: none;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            transition: color 0.2s ease;
            padding: 0;
        }

        .icon-btn:hover {
            color: #ffffff;
        }

        .icon-btn svg {
            width: 20px;
            height: 20px;
        }

        /* Theme toggle sun/moon icons */
        .icon-btn .sun-icon { display: none; }
        .icon-btn .moon-icon { display: block; }
        [data-theme="dark"] .icon-btn .sun-icon { display: block; }
        [data-theme="dark"] .icon-btn .moon-icon { display: none; }

        /* Hide old header styles */
        header {
            display: none;
        }

        .theme-toggle {
            display: none;
        }

        /* Filters Row */
        .filters-row {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px 12px 16px;
            flex-wrap: wrap;
        }

        .filters-primary {
            display: flex;
            align-items: center;
            gap: 6px;
            flex: 1;
        }

        /* Dropdown */
        .dropdown {
            position: relative;
        }

        .dropdown-btn {
            padding: 6px 10px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            min-width: 90px;
            text-align: left;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .dropdown-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.25);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            background: #252542;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            z-index: 100;
            min-width: 200px;
            max-height: 350px;
            overflow-y: auto;
            animation: slideDown 0.2s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-content.show {
            display: block;
        }

        .dropdown-content label {
            display: flex;
            align-items: center;
            padding: 10px 14px;
            cursor: pointer;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            transition: background 0.15s ease;
        }

        .dropdown-content label:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .dropdown-content input[type="checkbox"] {
            margin-right: 10px;
            accent-color: #22c55e;
            width: 16px;
            height: 16px;
        }

        .dropdown-content hr {
            border: none;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin: 6px 0;
        }

        .reset-btn {
            padding: 6px 8px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s ease;
        }

        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            color: rgba(255, 255, 255, 0.9);
        }

        /* Sport Filter Buttons (rechts in filter balk) */
        .sport-buttons-row {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 8px 16px;
        }

        .sport-filter-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Subtle colors for inactive state */
        .sport-filter-btn[data-sport="voetbal"] {
            background: rgba(34, 197, 94, 0.25);
            color: rgba(255, 255, 255, 0.85);
        }

        .sport-filter-btn[data-sport="darts"] {
            background: rgba(249, 115, 22, 0.25);
            color: rgba(255, 255, 255, 0.85);
        }

        .sport-filter-btn[data-sport="f1"] {
            background: rgba(239, 68, 68, 0.25);
            color: rgba(255, 255, 255, 0.85);
        }

        .sport-filter-btn:hover {
            opacity: 0.85;
        }

        .sport-filter-btn.active {
            color: white;
        }

        .sport-filter-btn[data-sport="voetbal"].active {
            background: var(--football);
        }

        .sport-filter-btn[data-sport="darts"].active {
            background: var(--darts);
        }

        .sport-filter-btn[data-sport="f1"].active {
            background: var(--f1);
        }

        /* Date Tabs (BeSoccer style) */
        .date-tabs-container {
            background: #2d5a3d;
            padding: 8px 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .date-tabs-container::-webkit-scrollbar {
            display: none;
        }

        [data-theme="dark"] .date-tabs-container {
            background: #1e293b;
        }

        .date-tabs {
            display: flex;
            gap: 4px;
            padding: 0 16px;
            min-width: max-content;
        }

        .date-tab {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .date-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .date-tab.active {
            background: white;
            color: #1a472a;
        }

        [data-theme="dark"] .date-tab.active {
            background: var(--primary);
            color: white;
        }

        /* Hamburger Menu */
        .hamburger-btn {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 4px;
            width: 36px;
            height: 36px;
            padding: 8px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .hamburger-btn:hover {
            background: var(--glass-bg);
            transform: scale(1.05);
        }

        .hamburger-btn span {
            display: block;
            width: 100%;
            height: 2px;
            background: var(--text);
            border-radius: 1px;
            transition: all 0.3s ease;
        }

        .hamburger-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(4px, 4px);
        }

        .hamburger-btn.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(4px, -4px);
        }

        /* Side Menu - Full Screen */
        .side-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100vh;
            background: var(--bg);
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }

        .side-menu.open {
            right: 0;
        }

        .side-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .side-menu-header h2 {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text);
        }

        .close-menu-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 1.5rem;
            transition: color 0.2s;
        }

        .close-menu-btn:hover {
            color: var(--text);
        }

        .side-menu-content {
            padding: 20px;
        }

        /* Menu sections */
        .menu-section {
            margin-bottom: 24px;
        }

        .menu-section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .menu-section-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0 0 12px 0;
        }

        .menu-section-header .menu-section-title {
            margin: 0;
        }

        .refresh-standings-btn {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 6px 10px;
            font-size: 0.9rem;
            cursor: pointer;
            color: var(--text);
            transition: all 0.2s ease;
        }

        .refresh-standings-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .refresh-standings-btn.loading {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Menu toggles */
        .menu-toggles {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .menu-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .menu-toggle:hover {
            background: var(--border);
        }

        .menu-toggle .toggle-text {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text);
        }

        .menu-toggle input {
            display: none;
        }

        .menu-toggle .toggle-switch {
            width: 44px;
            height: 24px;
            background: var(--border);
            border-radius: 12px;
            position: relative;
            transition: background 0.2s ease;
        }

        .menu-toggle .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.2s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .menu-toggle input:checked + .toggle-switch {
            background: var(--primary);
        }

        .menu-toggle input:checked + .toggle-switch::after {
            transform: translateX(20px);
        }

        /* Standings sport buttons */
        .standings-sport-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .standings-sport-btn {
            flex: 1;
            padding: 12px 8px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--card-bg);
            color: var(--text);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .standings-sport-btn .sport-icon {
            font-size: 1.2rem;
        }

        .standings-sport-btn:hover {
            border-color: var(--primary-light);
            background: var(--glass-bg);
        }

        .standings-sport-btn.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .standings-sport-btn[data-standings-sport="voetbal"].active {
            border-color: var(--football);
            background: linear-gradient(135deg, var(--football) 0%, #16a34a 100%);
        }

        .standings-sport-btn[data-standings-sport="darts"].active {
            border-color: var(--darts);
            background: linear-gradient(135deg, var(--darts) 0%, #ea580c 100%);
        }

        .standings-sport-btn[data-standings-sport="f1"].active {
            border-color: var(--f1);
            background: linear-gradient(135deg, var(--f1) 0%, #dc2626 100%);
        }

        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .menu-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        /* Standings table */
        .standings-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            border: 1px solid var(--card-border);
        }

        .standings-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary-light);
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .standings-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            color: var(--text);
        }

        .standings-table th {
            text-align: left;
            padding: 12px 8px;
            color: var(--text-secondary);
            font-weight: 600;
            border-bottom: 2px solid var(--border);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .standings-table td {
            padding: 14px 8px;
            border-bottom: 1px solid var(--border);
            transition: background 0.15s ease;
            color: var(--text);
        }

        .standings-table tr:hover td {
            background: var(--glass-bg);
        }

        .standings-table tr:last-child td {
            border-bottom: none;
        }

        .standings-table tr.highlight-row td {
            background: rgba(249, 115, 22, 0.1);
        }

        .wk-groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
        }

        .wk-group-card {
            background: var(--glass-bg);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
        }

        .wk-group-card.highlight {
            background: rgba(249, 115, 22, 0.1);
            border-color: var(--darts);
        }

        .wk-group-title {
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--text);
        }

        .wk-group-title.highlight {
            color: var(--darts);
        }

        .wk-team {
            padding: 2px 0;
            color: var(--text);
        }

        .wk-team.highlight {
            font-weight: 700;
            color: var(--darts);
        }

        .standings-table .pos {
            width: 35px;
            font-weight: 700;
            color: var(--text-secondary);
        }

        .standings-table tr:nth-child(-n+4) .pos {
            color: var(--success);
        }

        .standings-table .team {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .standings-table .team-logo {
            width: 24px;
            height: 24px;
            object-fit: contain;
        }

        .standings-table .pts {
            font-weight: 800;
            text-align: right;
            color: var(--primary);
        }

        .standings-table .stats {
            color: var(--text-secondary);
            text-align: center;
        }

        .standings-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .standings-tab {
            padding: 8px 16px;
            border: 1px solid var(--border);
            border-radius: 50px;
            background: var(--card-bg);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.2s ease;
            color: var(--text);
        }

        .standings-tab:hover:not(.active) {
            border-color: var(--primary-light);
        }

        .standings-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        /* Expandable darts matches */
        .event-card.has-matches {
            cursor: pointer;
        }

        .event-card.has-matches:hover {
            background: var(--glass-bg);
        }

        .matches-list {
            display: none;
            grid-column: 1 / -1;
            padding-top: 16px;
            margin-top: 16px;
            border-top: 1px solid var(--border);
        }

        .event-card.expanded .matches-list {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .match-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            font-size: 0.9rem;
            color: var(--text);
            border-bottom: 1px solid var(--border);
        }

        .match-item:last-child {
            border-bottom: none;
        }

        .match-item .match-time {
            min-width: 55px;
            color: var(--darts);
            font-weight: 700;
            margin-right: 14px;
        }

        .match-item .vs {
            margin: 0 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .expand-icon {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-left: 8px;
            transition: transform 0.3s ease;
        }

        .darts-expandable {
            cursor: pointer;
        }

        .darts-expandable:hover {
            background: var(--bg-secondary);
        }

        .darts-expandable.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .darts-matches-list {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 8px 16px 12px 16px;
        }

        .darts-match-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            font-size: 0.85rem;
            color: var(--text);
            border-bottom: 1px solid var(--border);
        }

        .darts-match-item:last-child {
            border-bottom: none;
        }

        .darts-match-time {
            min-width: 50px;
            color: var(--darts);
            font-weight: 700;
            margin-right: 12px;
        }

        .darts-match-players {
            flex: 1;
        }

        .darts-match-players .vs {
            color: var(--text-secondary);
            margin: 0 8px;
            font-weight: 400;
        }

        .event-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .filter-input {
            padding: 6px 10px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            width: 80px;
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.8);
            transition: all 0.2s ease;
        }

        .filter-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.25);
        }

        .filter-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        @media (max-width: 600px) {
            .filters-row {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
                padding: 8px 12px;
            }

            .filters-primary {
                width: 100%;
                gap: 6px;
            }

            .filters-primary .dropdown {
                flex: 1;
            }

            .filters-primary .filter-input {
                flex: 1;
                width: auto;
                min-width: 0;
            }
        }

        /* Events Container - BeSoccer Style */
        .events-container {
            margin-top: 0;
            background: var(--bg);
        }

        /* Competition Group - groups all matches of same competition */
        .competition-group {
            margin-bottom: 2px;
        }

        /* Competition Header - grey bar with flag and channel */
        .competition-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            background: var(--comp-header-bg);
            border-bottom: 1px solid var(--border);
        }

        .competition-header .country-flag {
            width: 20px;
            height: 15px;
            object-fit: cover;
            border-radius: 2px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .competition-header .competition-name {
            flex: 1;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text);
            letter-spacing: 0.5px;
        }

        .competition-header .channel-badge {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text);
            letter-spacing: 0.3px;
            background: none;
            padding: 0;
        }

        /* Match Row - white background, horizontal layout */
        .match-row {
            display: grid;
            grid-template-columns: 1fr auto 60px auto 1fr;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border);
            transition: background 0.15s ease;
        }

        .match-row:hover {
            background: var(--bg-secondary);
        }

        .match-row:last-child {
            border-bottom: none;
        }

        .match-row .team {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text);
        }

        .match-row .team.home {
            text-align: right;
        }

        .match-row .team.away {
            text-align: left;
        }

        .match-row .team-logo {
            width: 22px;
            height: 22px;
            object-fit: contain;
        }

        .match-row .match-time {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text);
            text-align: center;
            font-variant-numeric: tabular-nums;
        }

        .match-row .match-score {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text);
            text-align: center;
        }

        .match-row.live .match-time,
        .match-row.live .match-score {
            color: var(--f1);
        }

        .match-row.finished {
            opacity: 0.7;
        }

        /* Hide scores by default */
        .match-row .match-score {
            display: none;
        }

        .show-scores .match-row .match-score {
            display: block;
        }

        .show-scores .match-row.has-score .match-time {
            display: none;
        }

        /* Day Section Header */
        .day-section {
            margin-bottom: 0;
        }

        .day-header {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text);
            padding: 12px 16px;
            background: var(--bg);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
            position: sticky;
            top: 120px;
            z-index: 10;
        }

        .day-header svg {
            width: 18px;
            height: 18px;
            opacity: 0.6;
        }

        /* Darts/F1 specific rows */
        .match-row.darts-row,
        .match-row.f1-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .match-row .event-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .match-row .event-info .match-time {
            font-weight: 600;
            min-width: 45px;
        }

        .match-row .event-title {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text);
        }

        /* Channel badge in match rows (darts/F1) */
        .match-row .channel-badge {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text);
            letter-spacing: 0.3px;
        }

        .match-row .event-location {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Mobile responsive for match rows */
        @media (max-width: 600px) {
            .match-row {
                grid-template-columns: 1fr auto 50px auto 1fr;
                gap: 4px;
                padding: 10px 12px;
            }

            .match-row .team {
                font-size: 0.8rem;
            }

            .match-row .team-logo {
                width: 18px;
                height: 18px;
            }

            .match-row .match-time {
                font-size: 0.85rem;
            }

            .competition-header {
                padding: 8px 12px;
            }

            .competition-header .competition-name {
                font-size: 0.75rem;
            }
        }

        /* Sport badges */
        .sport-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .sport-badge-voetbal {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .sport-badge-darts {
            background: rgba(249, 115, 22, 0.15);
            color: #f97316;
            border: 1px solid rgba(249, 115, 22, 0.3);
        }

        .sport-badge-f1 {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        /* Desktop card header (inside card) */
        .event-card .match-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .event-card .match-time {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary);
            font-variant-numeric: tabular-nums;
        }

        .match-teams {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .team-row {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .team-row .team-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .home-team::after {
            content: '-';
            margin-left: 8px;
            color: var(--text-secondary);
        }

        .match-score {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text);
            min-width: 50px;
            text-align: center;
        }

        .match-score.no-score {
            color: var(--text-secondary);
            opacity: 0.5;
        }

        .match-channel {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            min-width: 70px;
        }

        /* Darts/F1 Card - Desktop */
        .event-card-other {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 14px;
            align-items: center;
        }

        .event-title {
            font-size: 1rem;
            font-weight: 700;
            line-height: 1.4;
        }

        /* Club logos */
        .club-logo {
            height: 26px;
            width: 26px;
            object-fit: contain;
            vertical-align: middle;
            margin: 0 8px;
            border-radius: 4px;
        }

        .club-logo[src=""] {
            display: none;
        }

        .team-name {
            vertical-align: middle;
        }

        /* Past events styling */
        .past-day {
            opacity: 0.65;
        }

        .past-day .day-header {
            color: var(--text-secondary);
        }

        .past-event {
            background: var(--glass-bg);
            opacity: 0.8;
        }

        /* Score column */
        .event-score-col {
            font-size: 1.15rem;
            font-weight: 800;
            color: var(--success);
            text-align: center;
            min-width: 55px;
            visibility: hidden;
            font-variant-numeric: tabular-nums;
        }

        .show-scores .event-score-col {
            visibility: visible;
        }

        .event-score-col.no-score {
            color: var(--text-secondary);
            opacity: 0.4;
        }

        /* Live indicator */
        .live-badge {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            animation: livePulse 2s infinite;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }

        @keyframes livePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.85; transform: scale(0.98); }
        }

        /* Competition badge */
        .competition-badge {
            background: var(--glass-bg);
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid var(--border);
        }

        /* Loading & Error states */
        .loading {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-secondary);
        }

        .loading .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            text-align: center;
            padding: 50px 24px;
            color: #dc2626;
            background: rgba(254, 226, 226, 0.8);
            border-radius: var(--radius);
            margin-bottom: 24px;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        [data-theme="dark"] .error-message {
            background: rgba(127, 29, 29, 0.3);
            border-color: rgba(239, 68, 68, 0.3);
        }

        /* No events message */
        .no-events {
            text-align: center;
            padding: 80px 24px;
            color: var(--text-secondary);
        }

        .no-events .icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.4;
        }

        .no-events h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .no-events-day {
            text-align: center;
            padding: 20px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-style: italic;
        }

        .today-section {
            border-left: 3px solid var(--primary);
        }

        /* API Status */
        .api-status {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 8px;
            opacity: 0.6;
        }

        .api-status .live-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: livePulse 2s infinite;
            box-shadow: 0 0 8px var(--success);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 50px 24px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 40px;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
            transition: opacity 0.2s;
        }

        footer a:hover {
            opacity: 0.8;
        }

        .version-footer {
            font-size: 0.7rem;
            color: var(--text-secondary);
            opacity: 0.5;
            margin-top: 10px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 8px;
            }

            header {
                padding: 8px 12px;
                margin-bottom: 8px;
            }

            header h1 {
                font-size: 1rem;
            }

            .theme-toggle {
                padding: 5px 8px;
            }

            .theme-toggle svg {
                width: 14px;
                height: 14px;
            }

            /* Compact filters for mobile */
            .filters-row {
                padding: 8px;
                margin-bottom: 6px;
                gap: 6px;
                flex-wrap: wrap;
            }

            .dropdown-btn {
                padding: 6px 10px;
                font-size: 0.75rem;
                min-width: auto;
            }

            .filter-input {
                padding: 6px 8px;
                font-size: 0.75rem;
                width: 100px;
            }

            .reset-btn {
                padding: 4px 6px;
                font-size: 0.7rem;
            }

            .toggle-group {
                gap: 8px;
                margin-left: 0;
                margin-top: 6px;
                width: 100%;
                justify-content: flex-end;
            }

            .toggle-slider {
                width: 24px;
                height: 14px;
            }

            .toggle-slider::after {
                width: 10px;
                height: 10px;
            }

            .mini-toggle input:checked + .toggle-slider::after {
                transform: translateX(10px);
            }

            .toggle-label {
                font-size: 0.6rem;
            }

            .api-status {
                font-size: 0.6rem;
            }

            /* Event wrapper - Mobile */
            .event-wrapper {
                margin-bottom: 12px;
            }

            .event-wrapper .match-header {
                margin-bottom: 4px;
                padding-left: 2px;
            }

            .event-wrapper .match-time {
                font-size: 0.8rem;
            }

            .event-wrapper .competition-badge {
                font-size: 0.65rem;
                padding: 2px 6px;
            }

            /* Football Card - Mobile: grid layout */
            .event-card-football {
                display: grid;
                grid-template-columns: 1fr auto;
                grid-template-rows: auto auto;
                gap: 2px 12px;
                padding: 10px 12px;
                align-items: center;
            }

            .event-card-football .match-teams {
                grid-column: 1;
                grid-row: 1 / 3;
                display: flex;
                flex-direction: column;
                gap: 2px;
                align-items: flex-start;
                justify-self: start;
            }

            .event-card-football .team-row {
                display: flex;
                align-items: center;
                gap: 6px;
                justify-content: flex-start;
            }

            .event-card-football .home-team::after {
                display: none;
            }

            .event-card-football .team-row .team-name {
                font-size: 0.9rem;
            }

            .event-card-football .match-score {
                display: none;
            }

            .event-card-football .match-channel {
                grid-column: 2;
                grid-row: 1 / 3;
                justify-content: flex-end;
                align-self: center;
            }

            /* Darts/F1 Card - Mobile */
            .event-card-other {
                display: grid;
                grid-template-columns: 1fr auto;
                gap: 8px;
                padding: 10px 12px;
                align-items: center;
            }

            .event-card-other .event-title {
                font-size: 0.9rem;
            }

            .event-card-other .match-channel {
                justify-content: flex-end;
            }

            .event-title {
                font-size: 0.85rem;
                line-height: 1.3;
            }

            .competition-badge {
                padding: 2px 6px;
                font-size: 0.6rem;
            }

            .event-score-col {
                font-size: 0.75rem;
            }

            .club-logo {
                height: 16px;
                width: 16px;
                margin: 0 3px;
            }

            .day-header {
                font-size: 0.95rem;
                margin-bottom: 10px;
                padding-bottom: 8px;
            }

            .standings-container {
                padding: 12px;
            }

            .standings-table {
                font-size: 0.75rem;
            }

            .standings-tabs {
                gap: 6px;
            }

            .standings-tab {
                padding: 6px 10px;
                font-size: 0.7rem;
            }

            footer {
                padding: 30px 16px;
                font-size: 0.8rem;
            }
        }

        /* Sport-specific accent colors */
        .sport-voetbal .event-time { color: var(--football); }
        .sport-darts .event-time { color: var(--darts); }
        .sport-f1 .event-time { color: var(--f1); }

        .sport-voetbal .day-header { border-color: var(--football); }
        .sport-darts .day-header { border-color: var(--darts); }
        .sport-f1 .day-header { border-color: var(--f1); }

        .sport-voetbal .event-card:hover { border-color: var(--football); box-shadow: 0 8px 30px var(--football-glow); }
        .sport-darts .event-card:hover { border-color: var(--darts); box-shadow: 0 8px 30px var(--darts-glow); }
        .sport-f1 .event-card:hover { border-color: var(--f1); box-shadow: 0 8px 30px var(--f1-glow); }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }
    </style>
</head>
<body>
    <!-- Header Section (dark) -->
    <div class="header-section">
        <!-- Row 1: Title Bar -->
        <div class="title-bar">
            <h1>Sport op TV</h1>
            <div class="title-bar-icons">
                <button class="icon-btn" id="theme-toggle" title="Thema wisselen">
                    <i data-lucide="sun" class="sun-icon"></i>
                    <i data-lucide="moon" class="moon-icon"></i>
                </button>
                <button class="icon-btn" id="hamburger-btn" title="Menu">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </div>

        <!-- Row 2: Sport Buttons -->
        <div class="sport-buttons-row">
            <button class="sport-filter-btn active" data-sport="voetbal">Voetbal</button>
            <button class="sport-filter-btn" data-sport="darts">Darts</button>
            <button class="sport-filter-btn" data-sport="f1">F1</button>
        </div>

        <!-- Row 3: Filters -->
        <div class="filters-row" id="filters-row">
            <div class="filters-primary">
                <div class="dropdown" id="comp-dropdown">
                    <button class="dropdown-btn" id="comp-btn">Competities ▾</button>
                    <div class="dropdown-content" id="comp-content">
                        <label><input type="checkbox" value="Eredivisie"> Eredivisie</label>
                        <label><input type="checkbox" value="Keuken Kampioen Divisie"> Keuken Kampioen Divisie</label>
                        <label><input type="checkbox" value="Premier League"> Premier League</label>
                        <label><input type="checkbox" value="Bundesliga"> Bundesliga</label>
                        <label><input type="checkbox" value="La Liga"> La Liga</label>
                        <label><input type="checkbox" value="Serie A"> Serie A</label>
                        <label><input type="checkbox" value="Ligue 1"> Ligue 1</label>
                        <hr>
                        <label><input type="checkbox" value="Champions League"> Champions League</label>
                        <label><input type="checkbox" value="Europa League"> Europa League</label>
                        <label><input type="checkbox" value="Conference League"> Conference League</label>
                        <hr>
                        <label><input type="checkbox" value="FA Cup"> FA Cup</label>
                        <label><input type="checkbox" value="League Cup"> League Cup</label>
                        <label><input type="checkbox" value="Coppa Italia"> Coppa Italia</label>
                        <label><input type="checkbox" value="DFB Pokal"> DFB Pokal</label>
                        <label><input type="checkbox" value="Copa del Rey"> Copa del Rey</label>
                        <label><input type="checkbox" value="Coupe de France"> Coupe de France</label>
                        <label><input type="checkbox" value="KNVB Beker"> KNVB Beker</label>
                        <hr>
                        <label><input type="checkbox" value="WK"> WK</label>
                        <label><input type="checkbox" value="EK"> EK</label>
                        <label><input type="checkbox" value="Nations League"> Nations League</label>
                        <label><input type="checkbox" value="WK Kwalificatie"> WK Kwalificatie</label>
                        <label><input type="checkbox" value="EK Kwalificatie"> EK Kwalificatie</label>
                        <hr>
                        <label><input type="checkbox" value="WK Vrouwen"> WK Vrouwen</label>
                        <label><input type="checkbox" value="EK Vrouwen"> EK Vrouwen</label>
                        <label><input type="checkbox" value="WK Kwalificatie Vrouwen"> WK Kwalificatie Vrouwen</label>
                        <label><input type="checkbox" value="EK Kwalificatie Vrouwen"> EK Kwalificatie Vrouwen</label>
                        <label><input type="checkbox" value="Nations League Vrouwen"> Nations League Vrouwen</label>
                    </div>
                </div>
                <input type="text" class="filter-input" id="filter-clubs" placeholder="Clubs...">
                <button class="reset-btn" id="reset-filters" title="Reset">↻</button>
            </div>
        </div>

        <!-- Date Tabs -->
        <div class="date-tabs-container" id="date-tabs-container">
            <div class="date-tabs" id="date-tabs">
                <!-- Generated by JavaScript -->
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Side Menu Overlay -->
        <div class="menu-overlay" id="menu-overlay"></div>

        <!-- Side Menu -->
        <div class="side-menu" id="side-menu">
            <div class="side-menu-header">
                <h2>Menu</h2>
                <button class="close-menu-btn" id="close-menu-btn">×</button>
            </div>
            <div class="side-menu-content">
                <!-- Weergave opties -->
                <div class="menu-section">
                    <h3 class="menu-section-title">Weergave</h3>
                    <div class="menu-toggles">
                        <label class="menu-toggle" id="menu-scores-toggle">
                            <span class="toggle-text">Uitslagen</span>
                            <input type="checkbox" id="toggle-scores">
                            <span class="toggle-switch"></span>
                        </label>
                    </div>
                </div>

                <!-- Standen sectie -->
                <div class="menu-section">
                    <div class="menu-section-header">
                        <h3 class="menu-section-title">Standen</h3>
                        <button class="refresh-standings-btn" id="refresh-standings" title="Ververs standen">↻</button>
                    </div>
                    <div class="standings-sport-buttons">
                        <button class="standings-sport-btn active" data-standings-sport="voetbal">Voetbal</button>
                        <button class="standings-sport-btn" data-standings-sport="darts">Darts</button>
                        <button class="standings-sport-btn" data-standings-sport="f1">F1</button>
                    </div>
                    <!-- Standen content -->
                    <div class="standings-tabs" id="standings-tabs-menu"></div>
                    <div id="standings-content-menu"></div>
                </div>
            </div>
        </div>

        <!-- Events Container -->
        <div class="events-container" id="events-container">
            <!-- Events will be rendered here -->
        </div>

        <footer>
            <div class="api-status" id="api-status">
                <span class="live-dot"></span> <span class="status-text">Laden...</span>
            </div>
            <p class="version-footer">v3.7.0</p>
        </footer>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Dark mode toggle
        const themeToggle = document.getElementById('theme-toggle');
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            lucide.createIcons();
        });

        // ============================================
        // CONFIGURATION
        // ============================================
        const CONFIG = {
            // Cache version - increment to force cache clear after config changes
            CACHE_VERSION: '3.7.0',

            // OpenFootball API (gratis, geen key nodig!)
            // https://github.com/openfootball/football.json
            OPENFOOTBALL_BASE: 'https://raw.githubusercontent.com/openfootball/football.json/master/2025-26',

            // Competities van OpenFootball (nationale competities)
            OPENFOOTBALL_LEAGUES: [
                { file: 'nl.1.json', name: 'Eredivisie', channel: 'ESPN' },
                { file: 'en.1.json', name: 'Premier League', channel: 'Viaplay' },
                { file: 'de.1.json', name: 'Bundesliga', channel: 'Viaplay' },
                { file: 'es.1.json', name: 'La Liga', channel: 'Ziggo Sport' },
                { file: 'it.1.json', name: 'Serie A', channel: 'Ziggo Sport' },
                { file: 'fr.1.json', name: 'Ligue 1', channel: 'Ziggo Sport' },
            ],

            // Football-Data.org API (gratis met registratie!)
            // Registreer op: https://www.football-data.org/client/register
            // Vul hieronder je API key in:
            FOOTBALL_DATA_KEY: '6324c5852d2c44e685625b598d9380ce',
            FOOTBALL_DATA_URL: 'https://api.football-data.org/v4',

            // Football-Data.org competities (gratis tier)
            // Beschikbaar: CL, PL, BL1, SA, FL1, PD, DED, ELC, EC, WC
            // NIET beschikbaar: EL, Conference League (betaald)
            FOOTBALL_DATA_COMPETITIONS: [
                { code: 'CL', name: 'Champions League', channel: 'Ziggo Sport' },
                // EL en Conference League zijn niet beschikbaar op gratis tier
            ],

            // Backup: API-Football (alleen seizoen 2022-2024 op gratis plan!)
            API_FOOTBALL_KEY: '6299b9b25468371fa7878f188ca297c0',
            API_FOOTBALL_URL: 'https://v3.football.api-sports.io',
            CORS_PROXY: 'https://corsproxy.io/?',

            // API-Football league IDs (voor standen, werkt wel voor huidig seizoen)
            API_FOOTBALL_LEAGUES: [
                { id: 88, name: 'Eredivisie', channel: 'ESPN' },
                { id: 39, name: 'Premier League', channel: 'Viaplay' },
                { id: 78, name: 'Bundesliga', channel: 'Viaplay' },
                { id: 140, name: 'La Liga', channel: 'Ziggo Sport' },
                { id: 135, name: 'Serie A', channel: 'Ziggo Sport' },
                { id: 61, name: 'Ligue 1', channel: 'Ziggo Sport' },
                { id: 2, name: 'Champions League', channel: 'Ziggo Sport' },
            ],

            // OpenF1 API (gratis, geen key nodig)
            F1_API_URL: 'https://api.openf1.org/v1',

            // Nederlandse TV zenders mapping
            TV_CHANNELS: {
                'Eredivisie': 'ESPN',
                'Premier League': 'Viaplay',
                'Primera Division': 'Ziggo Sport',
                'La Liga': 'Ziggo Sport',
                'Bundesliga': 'Viaplay',
                'Serie A': 'Ziggo Sport',
                'Ligue 1': 'Ziggo Sport',
                'FA Cup': 'Viaplay',
                'League Cup': 'Viaplay',
                'Coppa Italia': 'Ziggo Sport',
                'DFB Pokal': 'Viaplay',
                'Copa del Rey': 'Ziggo Sport',
                'Coupe de France': 'Ziggo Sport',
                'KNVB Beker': 'ESPN',
                'Champions League': 'Ziggo Sport',
                'Europa League': 'Ziggo Sport',
                'Conference League': 'Ziggo Sport',
                'Formula 1': 'Viaplay',
                'Darts': 'Viaplay / RTL7'
            },

            // TV kanaal logo's - lokale bestanden in /logos/ map
            CHANNEL_LOGOS: {
                'ESPN': 'logos/256px-ESPN_wordmark.svg.png',
                'ESPN 1': 'logos/256px-ESPN_wordmark.svg.png',
                'ESPN 2': 'logos/256px-ESPN2_logo.svg.png',
                'ESPN 3': 'logos/256px-ESPN3_logo.svg.png',
                'ESPN 4': 'logos/256px-ESPN_4_logo.svg.png',
                'ESPN 5': 'logos/256px-ESPN_5_logo.svg.png',
                'Ziggo Sport': 'logos/ziggo.svg',
                'Viaplay': 'logos/viaplay.svg',
                'RTL7': 'logos/RTL_7_nl_Logo.svg.png',
                'RTL 7': 'logos/RTL_7_nl_Logo.svg.png',
                'Veronica': 'logos/Veronica_TV_logo_2024.svg.png',
                'SBS6': 'logos/SBS6_Logo.svg.png',
                'SBS 6': 'logos/SBS6_Logo.svg.png'
            },

            // Landvlaggen per competitie
            COUNTRY_FLAGS: {
                'Eredivisie': 'nl',
                'Keuken Kampioen Divisie': 'nl',
                'KNVB Beker': 'nl',
                'Premier League': 'en',
                'FA Cup': 'en',
                'League Cup': 'en',
                'Bundesliga': 'de',
                'DFB Pokal': 'de',
                'La Liga': 'es',
                'Copa del Rey': 'es',
                'Serie A': 'it',
                'Coppa Italia': 'it',
                'Ligue 1': 'fr',
                'Coupe de France': 'fr',
                'Champions League': 'eu',
                'Europa League': 'eu',
                'Conference League': 'eu',
                'Nations League': 'eu',
                'WK': 'world',
                'EK': 'eu',
                'WK Kwalificatie': 'world',
                'EK Kwalificatie': 'eu',
                'WK Vrouwen': 'world',
                'EK Vrouwen': 'eu',
                'WK Kwalificatie Vrouwen': 'world',
                'EK Kwalificatie Vrouwen': 'eu',
                'Nations League Vrouwen': 'eu',
                'Premier League Darts': 'world',
                'UK Open': 'en',
                'World Matchplay': 'en',
                'World Grand Prix': 'en',
                'Grand Slam of Darts': 'en',
                'World Championship': 'en',
                'European Championship': 'eu',
                'World Cup of Darts': 'world',
                'Formula 1': 'world',
                'F1': 'world'
            },

            // Competitie logo's
            COMPETITION_LOGOS: {
                'Eredivisie': 'logos/netherlands_eredivisie.football-logos.cc.svg',
                'Premier League': 'logos/england_english-premier-league.football-logos.cc.svg',
                'Bundesliga': 'logos/germany_bundesliga.football-logos.cc.svg',
                'La Liga': 'logos/spain_la-liga.football-logos.cc.svg',
                'Serie A': 'logos/italy_serie-a.football-logos.cc.svg',
                'WK 2026': 'logos/tournaments_fifa-world-cup-2026.football-logos.cc.svg',
                'FA Cup': 'logos/england_emirates-fa-cup.football-logos.cc.svg',
                'EFL Cup': 'logos/england_efl-cup.football-logos.cc.svg',
                'KNVB Beker': 'logos/netherlands_knvb-cup.football-logos.cc.svg'
            },

            // Club logo's - lokale bestanden in /logos/ map
            CLUB_LOGOS: {
                // Eredivisie
                'Ajax': 'logos/ajax.svg',
                'PSV': 'logos/netherlands_psv.football-logos.cc.svg',
                'Feyenoord': 'logos/netherlands_feyenoord.football-logos.cc.svg',
                'AZ': 'logos/netherlands_az-alkmaar.football-logos.cc.svg',
                'FC Twente': 'logos/netherlands_twente.football-logos.cc.svg',
                'FC Utrecht': 'logos/netherlands_fc-utrecht.football-logos.cc.svg',
                'sc Heerenveen': 'logos/netherlands_sc-heerenveen.football-logos.cc.svg',
                'Go Ahead Eagles': 'logos/netherlands_go-ahead-eagles.football-logos.cc.svg',
                'Fortuna Sittard': 'logos/netherlands_fortuna-sittard.football-logos.cc.svg',
                'FC Groningen': 'logos/netherlands_fc-groningen.football-logos.cc.svg',
                'Almere City': 'logos/netherlands_almere-city-fc.football-logos.cc.svg',
                'Excelsior': 'logos/netherlands_excelsior-rotterdam.football-logos.cc.svg',
                'RKC Waalwijk': 'logos/netherlands_rkc-waalwijk.football-logos.cc.svg',
                'ADO Den Haag': 'logos/netherlands_ado-den-haag.football-logos.cc.svg',
                'FC Emmen': 'logos/netherlands_fc-emmen.football-logos.cc.svg',
                'Telstar': 'logos/netherlands_telstar.football-logos.cc.svg',
                'Vitesse': 'logos/netherlands_vitesse.football-logos.cc.svg',
                'NEC': 'logos/netherlands_nec-nijmegen.football-logos.cc.svg',
                'Heracles': 'logos/netherlands_heracles-almelo.football-logos.cc.svg',
                'Sparta Rotterdam': 'logos/netherlands_sparta-rotterdam.football-logos.cc.svg',
                'NAC Breda': 'logos/netherlands_nac-breda.football-logos.cc.svg',
                'PEC Zwolle': 'logos/netherlands_pec-zwolle.football-logos.cc.svg',
                'Willem II': 'logos/netherlands_willem-ii.football-logos.cc.svg',
                'FC Volendam': 'logos/netherlands_volendam.football-logos.cc.svg',
                'SC Cambuur': 'logos/netherlands_sc-cambuur.football-logos.cc.svg',
                'Roda JC': 'logos/netherlands_roda-jc-kerkrade.football-logos.cc.svg',
                'VVV-Venlo': 'logos/netherlands_vvv-venlo.football-logos.cc.svg',
                'De Graafschap': 'logos/netherlands_de-graafschap.football-logos.cc.svg',
                'MVV': 'logos/netherlands_mvv-maastricht.football-logos.cc.svg',
                'FC Dordrecht': 'logos/netherlands_fc-dordrecht.football-logos.cc.svg',
                'FC Eindhoven': 'logos/netherlands_fc-eindhoven.football-logos.cc.svg',
                'FC Den Bosch': 'logos/netherlands_fc-den-bosch.football-logos.cc.svg',
                'Helmond Sport': 'logos/netherlands_helmond-sport.football-logos.cc.svg',
                'TOP Oss': 'logos/netherlands_top-oss.football-logos.cc.svg',
                'Nederland': 'logos/netherlands_dutch-national-team.football-logos.cc.svg',
                // Premier League
                'Arsenal': 'logos/england_arsenal.football-logos.cc.svg',
                'Liverpool': 'logos/england_liverpool.football-logos.cc.svg',
                'Manchester City': 'logos/england_manchester-city.football-logos.cc.svg',
                'Chelsea': 'logos/england_chelsea.football-logos.cc.svg',
                'Manchester United': 'logos/man-utd.svg',
                'Tottenham': 'logos/tottenham.svg',
                'Newcastle': 'logos/england_newcastle.football-logos.cc.svg',
                'Brighton': 'logos/brighton.svg',
                'West Ham': 'logos/england_west-ham.football-logos.cc.svg',
                'Nottingham Forest': 'logos/nottingham.svg',
                'Wolverhampton': 'logos/wolves.svg',
                'Fulham': 'logos/fulham.svg',
                'Crystal Palace': 'logos/crystal-palace.svg',
                'Brentford': 'logos/brentford.svg',
                'Everton': 'logos/england_everton.football-logos.cc.svg',
                'Aston Villa': 'logos/england_aston-villa.football-logos.cc.svg',
                'Bournemouth': 'logos/bournemouth.svg',
                'Ipswich': 'logos/ipswich.svg',
                'Leicester': 'logos/leicester.svg',
                'Southampton': 'logos/southampton.svg',
                // La Liga
                'Real Madrid': 'logos/real-madrid.svg',
                'Barcelona': 'logos/barcelona.svg',
                'Atlético Madrid': 'logos/spain_atletico-madrid.football-logos.cc.svg',
                'Sevilla': 'logos/sevilla.svg',
                // Bundesliga
                'Bayern München': 'logos/bayern.svg',
                'Borussia Dortmund': 'logos/dortmund.svg',
                'Bayer Leverkusen': 'logos/leverkusen.svg',
                'RB Leipzig': 'logos/leipzig.svg',
                // Serie A
                'Inter': 'logos/italy_inter.football-logos.cc.svg',
                'Internazionale': 'logos/italy_inter.football-logos.cc.svg',
                'AC Milan': 'logos/italy_milan.football-logos.cc.svg',
                'Juventus': 'logos/italy_juventus.football-logos.cc.svg',
                'Napoli': 'logos/italy_napoli.football-logos.cc.svg',
                'AS Roma': 'logos/italy_roma.football-logos.cc.svg',
                'Roma': 'logos/italy_roma.football-logos.cc.svg',
                'Lazio': 'logos/italy_lazio.football-logos.cc.svg',
                'Atalanta': 'logos/italy_atalanta.football-logos.cc.svg',
                'Fiorentina': 'logos/italy_fiorentina.football-logos.cc.svg',
                'Bologna': 'logos/italy_bologna.football-logos.cc.svg',
                'Bari': 'logos/italy_bari.football-logos.cc.svg',
                'Italia': 'logos/italy_italy-national-team.football-logos.cc.svg',
                // Ligue 1
                'Paris Saint-Germain': 'logos/psg.svg',
                'Marseille': 'logos/marseille.svg'
            },

            // F1 team logo's - geen beschikbaar
            F1_LOGOS: {}
        };

        // ============================================
        // STATE
        // ============================================
        let currentSport = 'voetbal';
        let standingsSport = 'voetbal'; // Which sport to show in standings menu
        let showScores = false;
        let showPast = true; // Always show past events
        // Load filters from localStorage (with error handling)
        let filters = { competitions: [], clubs: [] };
        try {
            const savedComps = localStorage.getItem('selectedCompetitions');
            const savedClubs = localStorage.getItem('selectedClubs');
            if (savedComps) filters.competitions = JSON.parse(savedComps) || [];
            if (savedClubs) filters.clubs = JSON.parse(savedClubs) || [];
            // Ensure arrays
            if (!Array.isArray(filters.competitions)) filters.competitions = [];
            if (!Array.isArray(filters.clubs)) filters.clubs = [];
        } catch (e) {
            console.warn('Could not load filters from localStorage:', e);
            localStorage.removeItem('selectedCompetitions');
            localStorage.removeItem('selectedClubs');
        }
        let cachedData = {
            voetbal: null,
            darts: null,
            f1: null
        };

        // ============================================
        // DARTS DATA 2026 - Premier League Darts & Major Events
        // ============================================
        // Spelers
        const dartsPlayers = {
            'Littler': {name: 'Luke Littler'},
            'Humphries': {name: 'Luke Humphries'},
            'Van Gerwen': {name: 'Michael van Gerwen'},
            'Rock': {name: 'Josh Rock'},
            'Clayton': {name: 'Jonny Clayton'},
            'Bunting': {name: 'Stephen Bunting'},
            'Price': {name: 'Gerwyn Price'},
            'Van Veen': {name: 'Gian van Veen'}
        };

        const dartsCalendar = [
            // Premier League Darts 2026 - Echte schema's met tijden
            { date: '2026-02-05', time: '20:00', event: 'Premier League Darts - Avond 1', location: 'Belfast', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Humphries', away: 'Van Veen'},
                {time: '20:40', home: 'Van Gerwen', away: 'Clayton'},
                {time: '21:10', home: 'Bunting', away: 'Rock'},
                {time: '21:40', home: 'Littler', away: 'Price'}
            ]},
            { date: '2026-02-12', time: '20:00', event: 'Premier League Darts - Avond 2', location: 'Cardiff', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Littler', away: 'Humphries'},
                {time: '20:40', home: 'Van Gerwen', away: 'Rock'},
                {time: '21:10', home: 'Clayton', away: 'Bunting'},
                {time: '21:40', home: 'Price', away: 'Van Veen'}
            ]},
            { date: '2026-02-19', time: '20:00', event: 'Premier League Darts - Avond 3', location: 'Liverpool', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Bunting', away: 'Van Veen'},
                {time: '20:40', home: 'Humphries', away: 'Rock'},
                {time: '21:10', home: 'Van Gerwen', away: 'Littler'},
                {time: '21:40', home: 'Clayton', away: 'Price'}
            ]},
            { date: '2026-02-26', time: '20:00', event: 'Premier League Darts - Avond 4', location: 'Manchester', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Littler', away: 'Clayton'},
                {time: '20:40', home: 'Bunting', away: 'Humphries'},
                {time: '21:10', home: 'Van Gerwen', away: 'Price'},
                {time: '21:40', home: 'Van Veen', away: 'Rock'}
            ]},
            { date: '2026-03-05', time: '20:00', event: 'Premier League Darts - Avond 5', location: 'Exeter', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Van Gerwen', away: 'Humphries'},
                {time: '20:40', home: 'Van Veen', away: 'Clayton'},
                {time: '21:10', home: 'Price', away: 'Bunting'},
                {time: '21:40', home: 'Littler', away: 'Rock'}
            ]},
            { date: '2026-03-12', time: '20:00', event: 'Premier League Darts - Avond 6', location: 'Rotterdam Ahoy', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Rock', away: 'Bunting'},
                {time: '20:40', home: 'Clayton', away: 'Van Gerwen'},
                {time: '21:10', home: 'Humphries', away: 'Van Veen'},
                {time: '21:40', home: 'Price', away: 'Littler'}
            ]},
            { date: '2026-03-19', time: '20:00', event: 'Premier League Darts - Avond 7', location: 'Newcastle', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Van Veen', away: 'Van Gerwen'},
                {time: '20:40', home: 'Bunting', away: 'Littler'},
                {time: '21:10', home: 'Rock', away: 'Price'},
                {time: '21:40', home: 'Clayton', away: 'Humphries'}
            ]},
            { date: '2026-03-26', time: '20:00', event: 'Premier League Darts - Avond 8', location: 'Sheffield', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'TBD', away: 'TBD'},
                {time: '20:40', home: 'TBD', away: 'TBD'},
                {time: '21:10', home: 'TBD', away: 'TBD'},
                {time: '21:40', home: 'TBD', away: 'TBD'}
            ]},
            { date: '2026-04-02', time: '20:00', event: 'Premier League Darts - Avond 9', location: 'Aberdeen', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Van Gerwen', away: 'Bunting'},
                {time: '20:40', home: 'Price', away: 'Humphries'},
                {time: '21:10', home: 'Van Veen', away: 'Littler'},
                {time: '21:40', home: 'Clayton', away: 'Rock'}
            ]},
            { date: '2026-04-09', time: '20:00', event: 'Premier League Darts - Avond 10', location: 'Dublin', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Humphries', away: 'Clayton'},
                {time: '20:40', home: 'Price', away: 'Rock'},
                {time: '21:10', home: 'Littler', away: 'Bunting'},
                {time: '21:40', home: 'Van Gerwen', away: 'Van Veen'}
            ]},
            { date: '2026-04-23', time: '20:00', event: 'Premier League Darts - Avond 11', location: 'Birmingham', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Van Veen', away: 'Price'},
                {time: '20:40', home: 'Bunting', away: 'Clayton'},
                {time: '21:10', home: 'Rock', away: 'Van Gerwen'},
                {time: '21:40', home: 'Humphries', away: 'Littler'}
            ]},
            { date: '2026-04-30', time: '20:00', event: 'Premier League Darts - Avond 13', location: 'Brighton', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Rock', away: 'Littler'},
                {time: '20:40', home: 'Bunting', away: 'Price'},
                {time: '21:10', home: 'Clayton', away: 'Van Veen'},
                {time: '21:40', home: 'Humphries', away: 'Van Gerwen'}
            ]},
            { date: '2026-05-07', time: '20:00', event: 'Premier League Darts - Avond 14', location: 'Glasgow', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Price', away: 'Clayton'},
                {time: '20:40', home: 'Littler', away: 'Van Gerwen'},
                {time: '21:10', home: 'Rock', away: 'Humphries'},
                {time: '21:40', home: 'Van Veen', away: 'Bunting'}
            ]},
            { date: '2026-05-14', time: '20:00', event: 'Premier League Darts - Avond 15', location: 'Nottingham', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Rock', away: 'Van Veen'},
                {time: '20:40', home: 'Price', away: 'Van Gerwen'},
                {time: '21:10', home: 'Humphries', away: 'Bunting'},
                {time: '21:40', home: 'Clayton', away: 'Littler'}
            ]},
            { date: '2026-05-21', time: '19:00', event: 'Premier League Darts - Play-Offs', location: 'London O2', channel: 'Viaplay', matches: [
                {time: '19:30', home: 'Halve Finale 1', away: ''},
                {time: '21:00', home: 'Halve Finale 2', away: ''},
                {time: '22:00', home: 'Finale', away: ''}
            ]},
            // Bahrain Darts Masters 2026
            { date: '2026-01-15', time: '18:00', event: 'Bahrain Darts Masters', location: 'Bahrain', channel: 'Viaplay' },
            { date: '2026-01-16', time: '18:00', event: 'Bahrain Darts Masters - Finale', location: 'Bahrain', channel: 'Viaplay' },
            // Saudi Arabia Darts Masters 2026
            { date: '2026-01-19', time: '18:00', event: 'Saudi Arabia Darts Masters', location: 'Riyadh', channel: 'Viaplay' },
            { date: '2026-01-20', time: '18:00', event: 'Saudi Arabia Darts Masters - Finale', location: 'Riyadh', channel: 'Viaplay' },
            // Winmau World Masters 2026
            { date: '2026-01-28', time: '13:00', event: 'Winmau World Masters', location: 'Milton Keynes', channel: 'Viaplay' },
            { date: '2026-01-29', time: '13:00', event: 'Winmau World Masters', location: 'Milton Keynes', channel: 'Viaplay' },
            { date: '2026-01-30', time: '13:00', event: 'Winmau World Masters', location: 'Milton Keynes', channel: 'Viaplay' },
            { date: '2026-01-31', time: '13:00', event: 'Winmau World Masters', location: 'Milton Keynes', channel: 'Viaplay' },
            { date: '2026-02-01', time: '19:00', event: 'Winmau World Masters - Finale', location: 'Milton Keynes', channel: 'Viaplay' },
            // UK Open 2026
            { date: '2026-03-06', time: '13:00', event: 'UK Open', location: 'Minehead', channel: 'Viaplay' },
            { date: '2026-03-07', time: '13:00', event: 'UK Open', location: 'Minehead', channel: 'Viaplay' },
            { date: '2026-03-08', time: '13:00', event: 'UK Open - Finale', location: 'Minehead', channel: 'Viaplay' },
            // Nordic Darts Masters 2026
            { date: '2026-06-05', time: '19:00', event: 'Nordic Darts Masters', location: 'Copenhagen', channel: 'Viaplay' },
            { date: '2026-06-06', time: '19:00', event: 'Nordic Darts Masters - Finale', location: 'Copenhagen', channel: 'Viaplay' },
            // World Cup of Darts 2026
            { date: '2026-06-11', time: '13:00', event: 'World Cup of Darts', location: 'Frankfurt', channel: 'RTL7' },
            { date: '2026-06-12', time: '13:00', event: 'World Cup of Darts', location: 'Frankfurt', channel: 'RTL7' },
            { date: '2026-06-13', time: '19:00', event: 'World Cup of Darts', location: 'Frankfurt', channel: 'RTL7' },
            { date: '2026-06-14', time: '19:00', event: 'World Cup of Darts - Finale', location: 'Frankfurt', channel: 'RTL7' },
            // US Darts Masters 2026
            { date: '2026-06-26', time: '02:00', event: 'US Darts Masters', location: 'New York', channel: 'Viaplay' },
            { date: '2026-06-27', time: '02:00', event: 'US Darts Masters - Finale', location: 'New York', channel: 'Viaplay' },
            // World Matchplay 2026
            { date: '2026-07-18', time: '13:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-19', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-20', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-21', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-22', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-23', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-24', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-25', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-26', time: '19:00', event: 'World Matchplay - Finale', location: 'Blackpool', channel: 'Viaplay' },
            // New Zealand Darts Masters 2026
            { date: '2026-08-14', time: '08:00', event: 'New Zealand Darts Masters', location: 'Hamilton', channel: 'Viaplay' },
            { date: '2026-08-15', time: '08:00', event: 'New Zealand Darts Masters - Finale', location: 'Hamilton', channel: 'Viaplay' },
            // Australian Darts Masters 2026
            { date: '2026-08-21', time: '10:00', event: 'Australian Darts Masters', location: 'Wollongong', channel: 'Viaplay' },
            { date: '2026-08-22', time: '10:00', event: 'Australian Darts Masters - Finale', location: 'Wollongong', channel: 'Viaplay' },
            // World Series Finals 2026
            { date: '2026-09-17', time: '19:00', event: 'World Series Finals', location: 'Amsterdam', channel: 'Viaplay' },
            { date: '2026-09-18', time: '19:00', event: 'World Series Finals', location: 'Amsterdam', channel: 'Viaplay' },
            { date: '2026-09-19', time: '19:00', event: 'World Series Finals', location: 'Amsterdam', channel: 'Viaplay' },
            { date: '2026-09-20', time: '19:00', event: 'World Series Finals - Finale', location: 'Amsterdam', channel: 'Viaplay' },
            // World Grand Prix 2026
            { date: '2026-09-28', time: '19:00', event: 'World Grand Prix', location: 'Leicester', channel: 'Viaplay' },
            { date: '2026-09-29', time: '19:00', event: 'World Grand Prix', location: 'Leicester', channel: 'Viaplay' },
            { date: '2026-09-30', time: '19:00', event: 'World Grand Prix', location: 'Leicester', channel: 'Viaplay' },
            { date: '2026-10-01', time: '19:00', event: 'World Grand Prix', location: 'Leicester', channel: 'Viaplay' },
            { date: '2026-10-02', time: '19:00', event: 'World Grand Prix', location: 'Leicester', channel: 'Viaplay' },
            { date: '2026-10-03', time: '19:00', event: 'World Grand Prix', location: 'Leicester', channel: 'Viaplay' },
            { date: '2026-10-04', time: '19:00', event: 'World Grand Prix - Finale', location: 'Leicester', channel: 'Viaplay' },
            // European Championship 2026
            { date: '2026-10-22', time: '19:00', event: 'European Championship', location: 'Dortmund', channel: 'Viaplay' },
            { date: '2026-10-23', time: '19:00', event: 'European Championship', location: 'Dortmund', channel: 'Viaplay' },
            { date: '2026-10-24', time: '19:00', event: 'European Championship', location: 'Dortmund', channel: 'Viaplay' },
            { date: '2026-10-25', time: '19:00', event: 'European Championship - Finale', location: 'Dortmund', channel: 'Viaplay' },
            // Grand Slam of Darts 2026
            { date: '2026-11-14', time: '13:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-15', time: '13:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-16', time: '19:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-17', time: '19:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-18', time: '19:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-19', time: '19:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-20', time: '19:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-21', time: '19:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-22', time: '19:00', event: 'Grand Slam of Darts - Finale', location: 'Wolverhampton', channel: 'Viaplay' },
            // Players Championship Finals 2026
            { date: '2026-11-27', time: '13:00', event: 'Players Championship Finals', location: 'Minehead', channel: 'Viaplay' },
            { date: '2026-11-28', time: '13:00', event: 'Players Championship Finals', location: 'Minehead', channel: 'Viaplay' },
            { date: '2026-11-29', time: '19:00', event: 'Players Championship Finals - Finale', location: 'Minehead', channel: 'Viaplay' },
            // World Championship 2026/2027
            { date: '2026-12-15', time: '19:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-16', time: '13:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-17', time: '13:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-18', time: '13:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-19', time: '13:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-20', time: '13:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-21', time: '13:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-22', time: '19:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-27', time: '13:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-28', time: '13:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-29', time: '19:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-30', time: '19:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
        ];

        // ============================================
        // API FUNCTIONS
        // ============================================

        // Fetch F1 sessions from OpenF1 API
        async function fetchF1Sessions() {
            try {
                const response = await fetch(`${CONFIG.F1_API_URL}/sessions?year=2026`);
                if (!response.ok) throw new Error('F1 API error');
                const sessions = await response.json();

                return sessions.map(session => ({
                    date: new Date(session.date_start),
                    time: new Date(session.date_start).toLocaleTimeString('nl-NL', { hour: '2-digit', minute: '2-digit' }),
                    title: session.session_name,
                    competition: `GP ${session.country_name}`,
                    circuit: session.circuit_short_name,
                    channel: 'Viaplay',
                    type: session.session_type,
                    live: isLiveNow(session.date_start, session.date_end),
                    score: null
                }));
            } catch (error) {
                console.error('F1 API Error:', error);
                return [];
            }
        }

        // Static football data - BELANGRIJK:
        // API-Football gratis plan ondersteunt ALLEEN seizoen 2022-2024!
        // Seizoen 2025-2026 data komt NIET van de API.
        // Deze fallback data komt van ESPN.com en moet handmatig worden bijgewerkt.
        // Bron: https://www.espn.com/soccer/schedule/_/league/ned.1
        // GEEN STATIC FALLBACK DATA VOOR VOETBAL!
        // Alle data moet van de API komen.
        // Deze functie geeft alleen WK 2026 terug (kan niet van API komen, is toekomst)
        function getStaticFootballMatches() {
            const matches = [
                // ============================================
                // WK 2026 - Nederland wedstrijden (kan niet van API)
                // ============================================
                { date: '2026-06-14', time: '21:00', home: 'Nederland', away: 'Japan', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-20', time: '18:00', home: 'Nederland', away: 'UEFA PO B', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-25', time: '21:00', home: 'Tunesië', away: 'Nederland', competition: 'WK', channel: 'NPO 1' },

                // WK 2026 - Opening & andere groepswedstrijden
                { date: '2026-06-11', time: '21:00', home: 'Mexico', away: 'Zuid-Afrika', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-12', time: '18:00', home: 'Canada', away: 'Zwitserland', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-12', time: '21:00', home: 'Verenigde Staten', away: 'Paraguay', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-13', time: '18:00', home: 'Brazilië', away: 'Marokko', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-13', time: '21:00', home: 'Argentinië', away: 'Algerije', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-14', time: '18:00', home: 'Engeland', away: 'Kroatië', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-15', time: '18:00', home: 'Duitsland', away: 'Curaçao', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-15', time: '21:00', home: 'België', away: 'Egypte', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-16', time: '21:00', home: 'Frankrijk', away: 'Senegal', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-17', time: '21:00', home: 'Spanje', away: 'Kaapverdië', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-18', time: '21:00', home: 'Portugal', away: 'Oezbekistan', competition: 'WK', channel: 'NPO 1' },

                // WK 2026 - Knockout rondes
                { date: '2026-06-28', time: '18:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-28', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-04', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-09', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-14', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-18', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-19', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
            ];

            return matches.map(m => ({
                date: new Date(m.date + 'T' + m.time),
                time: m.time,
                home: m.home,
                away: m.away,
                competition: m.competition,
                channel: m.channel,
                score: m.score || null,
                live: false,
                status: m.score ? 'FINISHED' : 'SCHEDULED',
                isStatic: true
            }));
        }

        // Fetch football matches - try API-Football first, fall back to cache
        // Fetch football matches from OpenFootball (gratis, geen API key!)
        async function fetchFootballMatches() {
            console.log('Fetching football matches from OpenFootball...');

            // Check localStorage cache first (valid for 1 hour)
            const cached = localStorage.getItem('footballCache');
            const cacheTime = localStorage.getItem('footballCacheTime');
            const cacheValid = cached && cacheTime && (Date.now() - parseInt(cacheTime)) < 1 * 60 * 60 * 1000;

            if (cacheValid) {
                console.log('Using cached football data');
                const data = JSON.parse(cached);
                return data.map(m => ({ ...m, date: new Date(m.date) }));
            }

            const allMatches = [];

            // Fetch all leagues in parallel from OpenFootball
            const leaguePromises = CONFIG.OPENFOOTBALL_LEAGUES.map(async (league) => {
                try {
                    const url = `${CONFIG.OPENFOOTBALL_BASE}/${league.file}`;
                    console.log(`Fetching ${league.name} from ${url}`);
                    const response = await fetch(url);

                    if (!response.ok) {
                        console.warn(`Failed to fetch ${league.name}: ${response.status}`);
                        return [];
                    }

                    const data = await response.json();
                    const matches = [];

                    if (data.matches && Array.isArray(data.matches)) {
                        data.matches.forEach(match => {
                            const matchDate = new Date(match.date + 'T' + (match.time || '15:00'));
                            const hasScore = match.score && match.score.ft;

                            matches.push({
                                date: matchDate,
                                time: match.time || '15:00',
                                home: match.team1.replace(' FC', '').replace(' AFC', ''),
                                away: match.team2.replace(' FC', '').replace(' AFC', ''),
                                competition: league.name,
                                channel: league.channel,
                                score: hasScore ? `${match.score.ft[0]}-${match.score.ft[1]}` : null,
                                live: false,
                                status: hasScore ? 'FINISHED' : 'SCHEDULED'
                            });
                        });
                    }

                    console.log(`Loaded ${matches.length} matches from ${league.name}`);
                    return matches;
                } catch (error) {
                    console.error(`Error fetching ${league.name}:`, error);
                    return [];
                }
            });

            const results = await Promise.all(leaguePromises);
            results.forEach(matches => allMatches.push(...matches));

            console.log(`OpenFootball matches loaded: ${allMatches.length}`);

            // Also fetch European cups from football-data.org (if API key configured)
            try {
                const europeanMatches = await fetchFootballDataMatches();
                allMatches.push(...europeanMatches);
                console.log(`Added ${europeanMatches.length} European cup matches`);
            } catch (e) {
                console.warn('Could not fetch European cup matches:', e);
            }

            console.log(`Total matches loaded: ${allMatches.length}`);

            // Cache the results
            if (allMatches.length > 0) {
                localStorage.setItem('footballCache', JSON.stringify(allMatches));
                localStorage.setItem('footballCacheTime', Date.now().toString());
                localStorage.setItem('footballSource', 'openfootball' + (CONFIG.FOOTBALL_DATA_KEY ? '+football-data' : ''));
                return allMatches;
            }

            // API failed - use old cache if available
            if (cached) {
                console.log('API unavailable, using cached data');
                localStorage.setItem('footballSource', 'cache');
                const data = JSON.parse(cached);
                return data.map(m => ({ ...m, date: new Date(m.date) }));
            }

            // No cache - use static fallback data
            console.log('Using static fallback data');
            localStorage.setItem('footballSource', 'static');
            return getStaticFootballMatches();
        }

        // Helper function for date strings
        function getDateStr(daysFromNow) {
            const d = new Date();
            d.setDate(d.getDate() + daysFromNow);
            return d.toISOString().split('T')[0];
        }

        // Fetch European cup matches from football-data.org
        async function fetchFootballDataMatches() {
            // Check if API key is configured
            if (!CONFIG.FOOTBALL_DATA_KEY) {
                console.log('Football-data.org API key not configured - skipping CL/EL/Conference');
                return [];
            }

            console.log('Fetching CL/EL/Conference from football-data.org...');
            const allMatches = [];

            // Calculate date range: 7 days back, 30 days forward
            const fromDate = getDateStr(-7);
            const toDate = getDateStr(30);

            // Fetch each competition
            for (const comp of CONFIG.FOOTBALL_DATA_COMPETITIONS) {
                try {
                    const url = `${CONFIG.FOOTBALL_DATA_URL}/competitions/${comp.code}/matches?dateFrom=${fromDate}&dateTo=${toDate}`;
                    console.log(`Fetching ${comp.name}...`);

                    const response = await fetch(url, {
                        headers: { 'X-Auth-Token': CONFIG.FOOTBALL_DATA_KEY }
                    });

                    if (!response.ok) {
                        console.warn(`Football-data.org ${comp.name}: ${response.status}`);
                        continue;
                    }

                    const data = await response.json();

                    if (data.matches && Array.isArray(data.matches)) {
                        data.matches.forEach(match => {
                            const matchDate = new Date(match.utcDate);
                            const hasScore = match.score?.fullTime?.home !== null;

                            allMatches.push({
                                date: matchDate,
                                time: matchDate.toLocaleTimeString('nl-NL', { hour: '2-digit', minute: '2-digit' }),
                                home: match.homeTeam.shortName || match.homeTeam.name,
                                away: match.awayTeam.shortName || match.awayTeam.name,
                                homeCrest: match.homeTeam.crest,
                                awayCrest: match.awayTeam.crest,
                                competition: comp.name,
                                channel: comp.channel,
                                score: hasScore ? `${match.score.fullTime.home}-${match.score.fullTime.away}` : null,
                                live: match.status === 'IN_PLAY' || match.status === 'PAUSED',
                                status: match.status
                            });
                        });
                        console.log(`Loaded ${data.matches.length} ${comp.name} matches`);
                    }
                } catch (error) {
                    console.error(`Error fetching ${comp.name}:`, error);
                }
            }

            return allMatches;
        }

        // Fetch football standings with caching
        async function fetchFootballStandings(leagueId) {
            // Check cache first (valid for 24 hours)
            const cacheKey = `standings_${leagueId}`;
            const cached = localStorage.getItem(cacheKey);
            const cacheTime = localStorage.getItem(cacheKey + '_time');

            if (cached && cacheTime && (Date.now() - parseInt(cacheTime)) < 24 * 60 * 60 * 1000) {
                console.log(`Using cached standings for league ${leagueId}`);
                return JSON.parse(cached);
            }

            // Try API
            const season = new Date().getMonth() >= 7 ? new Date().getFullYear() : new Date().getFullYear() - 1;
            try {
                const apiUrl = `${CONFIG.API_FOOTBALL_URL}/standings?league=${leagueId}&season=${season}`;
                const response = await fetch(
                    `${CONFIG.CORS_PROXY}${encodeURIComponent(apiUrl)}`,
                    { headers: { 'x-apisports-key': CONFIG.API_FOOTBALL_KEY } }
                );

                if (response.ok) {
                    const data = await response.json();

                    // Check for rate limit error in response
                    if (data.errors && Object.keys(data.errors).length > 0) {
                        console.warn('Standings API error:', data.errors);
                    } else if (data.response && data.response[0] && data.response[0].league.standings) {
                        const standings = data.response[0].league.standings[0];
                        // Cache the result
                        localStorage.setItem(cacheKey, JSON.stringify(standings));
                        localStorage.setItem(cacheKey + '_time', Date.now().toString());
                        console.log(`Standings for ${leagueId} fetched from API`);
                        return standings;
                    }
                }
            } catch (e) {
                console.error('Standings fetch error:', e);
            }

            // API failed - use cached data if available (even if old)
            if (cached) {
                console.log(`Using old cached standings for ${leagueId}`);
                return JSON.parse(cached);
            }

            // No cache - use static fallback
            console.log(`Using static standings for ${leagueId}`);
            return getStaticStandings(leagueId);
        }

        // Static standings fallback (February 2026 data)
        function getStaticStandings(leagueId) {
            const standings = {
                // Eredivisie (bijgewerkt 8 feb 2026)
                88: [
                    { rank: 1, team: { name: 'PSV', logo: '' }, all: { win: 18, draw: 2, lose: 1 }, goalsDiff: 39, points: 56 },
                    { rank: 2, team: { name: 'NEC', logo: '' }, all: { win: 12, draw: 5, lose: 4 }, goalsDiff: 21, points: 41 },
                    { rank: 3, team: { name: 'Feyenoord', logo: '' }, all: { win: 12, draw: 3, lose: 6 }, goalsDiff: 19, points: 39 },
                    { rank: 4, team: { name: 'Ajax', logo: '' }, all: { win: 10, draw: 8, lose: 3 }, goalsDiff: 13, points: 38 },
                    { rank: 5, team: { name: 'AZ', logo: '' }, all: { win: 10, draw: 3, lose: 8 }, goalsDiff: 8, points: 33 },
                    { rank: 6, team: { name: 'FC Twente', logo: '' }, all: { win: 9, draw: 5, lose: 7 }, goalsDiff: 5, points: 32 },
                    { rank: 7, team: { name: 'FC Utrecht', logo: '' }, all: { win: 9, draw: 4, lose: 8 }, goalsDiff: 3, points: 31 },
                    { rank: 8, team: { name: 'Sparta Rotterdam', logo: '' }, all: { win: 8, draw: 6, lose: 7 }, goalsDiff: 0, points: 30 },
                ],
                // Premier League (bijgewerkt 8 feb 2026)
                39: [
                    { rank: 1, team: { name: 'Arsenal', logo: '' }, all: { win: 17, draw: 5, lose: 3 }, goalsDiff: 32, points: 56 },
                    { rank: 2, team: { name: 'Manchester City', logo: '' }, all: { win: 14, draw: 5, lose: 5 }, goalsDiff: 26, points: 47 },
                    { rank: 3, team: { name: 'Aston Villa', logo: '' }, all: { win: 14, draw: 5, lose: 6 }, goalsDiff: 9, points: 47 },
                    { rank: 4, team: { name: 'Manchester United', logo: '' }, all: { win: 12, draw: 8, lose: 5 }, goalsDiff: 10, points: 44 },
                    { rank: 5, team: { name: 'Chelsea', logo: '' }, all: { win: 12, draw: 7, lose: 6 }, goalsDiff: 17, points: 43 },
                    { rank: 6, team: { name: 'Liverpool', logo: '' }, all: { win: 11, draw: 6, lose: 7 }, goalsDiff: 6, points: 39 },
                    { rank: 7, team: { name: 'Newcastle', logo: '' }, all: { win: 10, draw: 8, lose: 7 }, goalsDiff: 5, points: 38 },
                    { rank: 8, team: { name: 'Brighton', logo: '' }, all: { win: 10, draw: 6, lose: 9 }, goalsDiff: 3, points: 36 },
                ],
                // Bundesliga
                78: [
                    { rank: 1, team: { name: 'Bayern München', logo: '' }, all: { win: 14, draw: 4, lose: 2 }, goalsDiff: 32, points: 46 },
                    { rank: 2, team: { name: 'Bayer Leverkusen', logo: '' }, all: { win: 13, draw: 5, lose: 2 }, goalsDiff: 28, points: 44 },
                    { rank: 3, team: { name: 'Eintracht Frankfurt', logo: '' }, all: { win: 11, draw: 5, lose: 4 }, goalsDiff: 18, points: 38 },
                    { rank: 4, team: { name: 'RB Leipzig', logo: '' }, all: { win: 10, draw: 6, lose: 4 }, goalsDiff: 14, points: 36 },
                    { rank: 5, team: { name: 'Borussia Dortmund', logo: '' }, all: { win: 10, draw: 5, lose: 5 }, goalsDiff: 15, points: 35 },
                    { rank: 6, team: { name: 'Mainz 05', logo: '' }, all: { win: 9, draw: 6, lose: 5 }, goalsDiff: 6, points: 33 },
                    { rank: 7, team: { name: 'Freiburg', logo: '' }, all: { win: 9, draw: 5, lose: 6 }, goalsDiff: 4, points: 32 },
                    { rank: 8, team: { name: 'Werder Bremen', logo: '' }, all: { win: 8, draw: 5, lose: 7 }, goalsDiff: 0, points: 29 },
                ],
                // La Liga
                140: [
                    { rank: 1, team: { name: 'Barcelona', logo: '' }, all: { win: 16, draw: 4, lose: 2 }, goalsDiff: 35, points: 52 },
                    { rank: 2, team: { name: 'Real Madrid', logo: '' }, all: { win: 14, draw: 5, lose: 3 }, goalsDiff: 25, points: 47 },
                    { rank: 3, team: { name: 'Atlético Madrid', logo: '' }, all: { win: 13, draw: 5, lose: 4 }, goalsDiff: 18, points: 44 },
                    { rank: 4, team: { name: 'Athletic Bilbao', logo: '' }, all: { win: 11, draw: 7, lose: 4 }, goalsDiff: 14, points: 40 },
                    { rank: 5, team: { name: 'Villarreal', logo: '' }, all: { win: 10, draw: 7, lose: 5 }, goalsDiff: 10, points: 37 },
                    { rank: 6, team: { name: 'Real Betis', logo: '' }, all: { win: 9, draw: 8, lose: 5 }, goalsDiff: 6, points: 35 },
                    { rank: 7, team: { name: 'Real Sociedad', logo: '' }, all: { win: 8, draw: 9, lose: 5 }, goalsDiff: 4, points: 33 },
                    { rank: 8, team: { name: 'Mallorca', logo: '' }, all: { win: 8, draw: 7, lose: 7 }, goalsDiff: 0, points: 31 },
                ],
                // Serie A
                135: [
                    { rank: 1, team: { name: 'Napoli', logo: '' }, all: { win: 16, draw: 4, lose: 2 }, goalsDiff: 28, points: 52 },
                    { rank: 2, team: { name: 'Inter', logo: '' }, all: { win: 15, draw: 5, lose: 2 }, goalsDiff: 30, points: 50 },
                    { rank: 3, team: { name: 'Atalanta', logo: '' }, all: { win: 14, draw: 4, lose: 4 }, goalsDiff: 24, points: 46 },
                    { rank: 4, team: { name: 'Lazio', logo: '' }, all: { win: 13, draw: 4, lose: 5 }, goalsDiff: 16, points: 43 },
                    { rank: 5, team: { name: 'Juventus', logo: '' }, all: { win: 10, draw: 10, lose: 2 }, goalsDiff: 14, points: 40 },
                    { rank: 6, team: { name: 'Fiorentina', logo: '' }, all: { win: 10, draw: 6, lose: 6 }, goalsDiff: 8, points: 36 },
                    { rank: 7, team: { name: 'Bologna', logo: '' }, all: { win: 9, draw: 7, lose: 6 }, goalsDiff: 5, points: 34 },
                    { rank: 8, team: { name: 'AC Milan', logo: '' }, all: { win: 9, draw: 6, lose: 7 }, goalsDiff: 6, points: 33 },
                ],
                // Ligue 1
                61: [
                    { rank: 1, team: { name: 'PSG', logo: '' }, all: { win: 16, draw: 4, lose: 2 }, goalsDiff: 35, points: 52 },
                    { rank: 2, team: { name: 'Marseille', logo: '' }, all: { win: 13, draw: 5, lose: 4 }, goalsDiff: 18, points: 44 },
                    { rank: 3, team: { name: 'Monaco', logo: '' }, all: { win: 12, draw: 5, lose: 5 }, goalsDiff: 12, points: 41 },
                    { rank: 4, team: { name: 'Lille', logo: '' }, all: { win: 11, draw: 6, lose: 5 }, goalsDiff: 10, points: 39 },
                    { rank: 5, team: { name: 'Lyon', logo: '' }, all: { win: 10, draw: 7, lose: 5 }, goalsDiff: 8, points: 37 },
                    { rank: 6, team: { name: 'Nice', logo: '' }, all: { win: 9, draw: 8, lose: 5 }, goalsDiff: 5, points: 35 },
                    { rank: 7, team: { name: 'Lens', logo: '' }, all: { win: 9, draw: 6, lose: 7 }, goalsDiff: 3, points: 33 },
                    { rank: 8, team: { name: 'Strasbourg', logo: '' }, all: { win: 8, draw: 7, lose: 7 }, goalsDiff: 0, points: 31 },
                ],
                // Champions League - League Phase eindstand (top 8 direct naar R16)
                2: [
                    { rank: 1, team: { name: 'Arsenal', logo: '' }, all: { win: 6, draw: 2, lose: 0 }, goalsDiff: 14, points: 20 },
                    { rank: 2, team: { name: 'Bayern München', logo: '' }, all: { win: 6, draw: 1, lose: 1 }, goalsDiff: 12, points: 19 },
                    { rank: 3, team: { name: 'Liverpool', logo: '' }, all: { win: 6, draw: 1, lose: 1 }, goalsDiff: 11, points: 19 },
                    { rank: 4, team: { name: 'Tottenham', logo: '' }, all: { win: 5, draw: 2, lose: 1 }, goalsDiff: 8, points: 17 },
                    { rank: 5, team: { name: 'Barcelona', logo: '' }, all: { win: 5, draw: 2, lose: 1 }, goalsDiff: 10, points: 17 },
                    { rank: 6, team: { name: 'Chelsea', logo: '' }, all: { win: 5, draw: 1, lose: 2 }, goalsDiff: 7, points: 16 },
                    { rank: 7, team: { name: 'Sporting CP', logo: '' }, all: { win: 5, draw: 1, lose: 2 }, goalsDiff: 6, points: 16 },
                    { rank: 8, team: { name: 'Manchester City', logo: '' }, all: { win: 5, draw: 1, lose: 2 }, goalsDiff: 5, points: 16 },
                ]
            };
            return standings[leagueId] || [];
        }

        // Fetch F1 standings from Ergast API
        // F1 2026 static data (seizoen start 8 maart)
        const f1_2026_drivers = [
            { position: 1, Driver: { givenName: 'Lando', familyName: 'Norris' }, Constructors: [{ name: 'McLaren' }], points: 0 },
            { position: 2, Driver: { givenName: 'Oscar', familyName: 'Piastri' }, Constructors: [{ name: 'McLaren' }], points: 0 },
            { position: 3, Driver: { givenName: 'Max', familyName: 'Verstappen' }, Constructors: [{ name: 'Red Bull' }], points: 0 },
            { position: 4, Driver: { givenName: 'Yuki', familyName: 'Tsunoda' }, Constructors: [{ name: 'Red Bull' }], points: 0 },
            { position: 5, Driver: { givenName: 'Charles', familyName: 'Leclerc' }, Constructors: [{ name: 'Ferrari' }], points: 0 },
            { position: 6, Driver: { givenName: 'Lewis', familyName: 'Hamilton' }, Constructors: [{ name: 'Ferrari' }], points: 0 },
            { position: 7, Driver: { givenName: 'George', familyName: 'Russell' }, Constructors: [{ name: 'Mercedes' }], points: 0 },
            { position: 8, Driver: { givenName: 'Kimi', familyName: 'Antonelli' }, Constructors: [{ name: 'Mercedes' }], points: 0 },
            { position: 9, Driver: { givenName: 'Fernando', familyName: 'Alonso' }, Constructors: [{ name: 'Aston Martin' }], points: 0 },
            { position: 10, Driver: { givenName: 'Lance', familyName: 'Stroll' }, Constructors: [{ name: 'Aston Martin' }], points: 0 },
            { position: 11, Driver: { givenName: 'Pierre', familyName: 'Gasly' }, Constructors: [{ name: 'Alpine' }], points: 0 },
            { position: 12, Driver: { givenName: 'Jack', familyName: 'Doohan' }, Constructors: [{ name: 'Alpine' }], points: 0 },
            { position: 13, Driver: { givenName: 'Alex', familyName: 'Albon' }, Constructors: [{ name: 'Williams' }], points: 0 },
            { position: 14, Driver: { givenName: 'Carlos', familyName: 'Sainz' }, Constructors: [{ name: 'Williams' }], points: 0 },
            { position: 15, Driver: { givenName: 'Nico', familyName: 'Hülkenberg' }, Constructors: [{ name: 'Sauber' }], points: 0 },
            { position: 16, Driver: { givenName: 'Gabriel', familyName: 'Bortoleto' }, Constructors: [{ name: 'Sauber' }], points: 0 },
            { position: 17, Driver: { givenName: 'Liam', familyName: 'Lawson' }, Constructors: [{ name: 'RB' }], points: 0 },
            { position: 18, Driver: { givenName: 'Isack', familyName: 'Hadjar' }, Constructors: [{ name: 'RB' }], points: 0 },
            { position: 19, Driver: { givenName: 'Esteban', familyName: 'Ocon' }, Constructors: [{ name: 'Haas' }], points: 0 },
            { position: 20, Driver: { givenName: 'Oliver', familyName: 'Bearman' }, Constructors: [{ name: 'Haas' }], points: 0 },
        ];

        const f1_2026_constructors = [
            { position: 1, Constructor: { name: 'McLaren' }, points: 0 },
            { position: 2, Constructor: { name: 'Ferrari' }, points: 0 },
            { position: 3, Constructor: { name: 'Red Bull' }, points: 0 },
            { position: 4, Constructor: { name: 'Mercedes' }, points: 0 },
            { position: 5, Constructor: { name: 'Aston Martin' }, points: 0 },
            { position: 6, Constructor: { name: 'Alpine' }, points: 0 },
            { position: 7, Constructor: { name: 'Williams' }, points: 0 },
            { position: 8, Constructor: { name: 'RB' }, points: 0 },
            { position: 9, Constructor: { name: 'Haas' }, points: 0 },
            { position: 10, Constructor: { name: 'Sauber' }, points: 0 },
        ];

        async function fetchF1Standings() {
            try {
                const [driversRes, constructorsRes] = await Promise.all([
                    fetch('https://ergast.com/api/f1/current/driverStandings.json'),
                    fetch('https://ergast.com/api/f1/current/constructorStandings.json')
                ]);
                const driversData = await driversRes.json();
                const constructorsData = await constructorsRes.json();

                const drivers = driversData.MRData.StandingsTable.StandingsLists[0]?.DriverStandings || [];
                const constructors = constructorsData.MRData.StandingsTable.StandingsLists[0]?.ConstructorStandings || [];

                // Use API data if available, otherwise use static 2026 data
                return {
                    drivers: drivers.length > 0 ? drivers : f1_2026_drivers,
                    constructors: constructors.length > 0 ? constructors : f1_2026_constructors
                };
            } catch (e) {
                console.error('F1 standings error:', e);
                // Return static 2026 data on error
                return { drivers: f1_2026_drivers, constructors: f1_2026_constructors };
            }
        }

        // PL Darts standings - Na Night 1 Newcastle (5 feb 2026)
        // Punten: 5 = avondwinnaar, 3 = finalist, 2 = halve finale verliezer
        const plDartsStandings = [
            { pos: 1, name: 'Michael van Gerwen', played: 1, sf: 1, f: 1, w: 1, pts: 5 },
            { pos: 2, name: 'Gian van Veen', played: 1, sf: 1, f: 1, w: 0, pts: 3 },
            { pos: 3, name: 'Luke Humphries', played: 1, sf: 1, f: 0, w: 0, pts: 2 },
            { pos: 4, name: 'Jonny Clayton', played: 1, sf: 1, f: 0, w: 0, pts: 2 },
            { pos: 5, name: 'Luke Littler', played: 1, sf: 0, f: 0, w: 0, pts: 0 },
            { pos: 6, name: 'Stephen Bunting', played: 1, sf: 0, f: 0, w: 0, pts: 0 },
            { pos: 7, name: 'Josh Rock', played: 1, sf: 0, f: 0, w: 0, pts: 0 },
            { pos: 8, name: 'Gerwyn Price', played: 1, sf: 0, f: 0, w: 0, pts: 0 }
        ];

        // WK 2026 Groepen (11 juni - 19 juli 2026, USA/Mexico/Canada)
        const wk2026Groups = {
            'A': ['Mexico', 'Zuid-Afrika', 'Zuid-Korea', 'UEFA PO D'],
            'B': ['Canada', 'Zwitserland', 'Qatar', 'UEFA PO A'],
            'C': ['Brazilië', 'Marokko', 'Haïti', 'Schotland'],
            'D': ['Verenigde Staten', 'Paraguay', 'Australië', 'UEFA PO C'],
            'E': ['Duitsland', 'Curaçao', 'Ivoorkust', 'Ecuador'],
            'F': ['Nederland', 'Japan', 'Tunesië', 'UEFA PO B'],
            'G': ['België', 'Egypte', 'Iran', 'Nieuw-Zeeland'],
            'H': ['Spanje', 'Kaapverdië', 'Saudi-Arabië', 'Uruguay'],
            'I': ['Frankrijk', 'Senegal', 'Noorwegen', 'Intercont. PO 2'],
            'J': ['Argentinië', 'Algerije', 'Oostenrijk', 'Jordanië'],
            'K': ['Portugal', 'Oezbekistan', 'Colombia', 'Intercont. PO 1'],
            'L': ['Engeland', 'Kroatië', 'Ghana', 'Panama']
        };

        // WK 2026 Schema - Nederland wedstrijden + knockout rondes
        const wk2026Schedule = {
            nederland: [
                { date: '14 juni', time: '21:00', home: 'Nederland', away: 'Japan', city: 'Philadelphia', stage: 'Groep F' },
                { date: '20 juni', time: '18:00', home: 'Nederland', away: 'UEFA PO B', city: 'Philadelphia', stage: 'Groep F' },
                { date: '25 juni', time: '21:00', home: 'Tunesië', away: 'Nederland', city: 'Kansas City', stage: 'Groep F' }
            ],
            knockout: [
                { stage: 'Ronde van 32', dates: '28 juni - 3 juli' },
                { stage: 'Ronde van 16', dates: '4 - 7 juli' },
                { stage: 'Kwartfinales', dates: '9 & 11 juli' },
                { stage: 'Halve finales', dates: '14 & 15 juli' },
                { stage: 'Troostfinale', dates: '18 juli' },
                { stage: 'Finale', dates: '19 juli', city: 'New Jersey (MetLife Stadium)' }
            ],
            openingMatches: [
                { date: '11 juni', time: '21:00', home: 'Mexico', away: 'Zuid-Afrika', city: 'Mexico City', stage: 'Groep A - Opening' },
                { date: '12 juni', time: '18:00', home: 'Canada', away: 'Zwitserland', city: 'Toronto', stage: 'Groep B' },
                { date: '12 juni', time: '21:00', home: 'Verenigde Staten', away: 'Paraguay', city: 'Los Angeles', stage: 'Groep D' }
            ]
        };

        // Functie om WK groepen te renderen
        function renderWK2026Groups() {
            let html = '<div class="standings-container">';

            // Nederland schema
            html += '<div class="standings-title" style="color:var(--darts);">🇳🇱 Nederland - WK 2026 Schema</div>';
            html += '<table class="standings-table"><tr><th>Datum</th><th>Wedstrijd</th><th>Stad</th></tr>';
            wk2026Schedule.nederland.forEach(m => {
                html += `<tr class="highlight-row">
                    <td>${m.date}<br><small>${m.time}</small></td>
                    <td><strong>${m.home}</strong> - ${m.away}</td>
                    <td>${m.city}</td>
                </tr>`;
            });
            html += '</table>';

            // Knockout schema
            html += '<div class="standings-title" style="margin-top:20px;">Knockout Rondes</div>';
            html += '<table class="standings-table"><tr><th>Ronde</th><th>Data</th><th>Locatie</th></tr>';
            wk2026Schedule.knockout.forEach(k => {
                html += `<tr>
                    <td>${k.stage}</td>
                    <td>${k.dates}</td>
                    <td>${k.city || 'Diverse steden'}</td>
                </tr>`;
            });
            html += '</table>';

            // Opening wedstrijden
            html += '<div class="standings-title" style="margin-top:20px;">Opening Wedstrijden</div>';
            html += '<table class="standings-table"><tr><th>Datum</th><th>Wedstrijd</th><th>Stad</th></tr>';
            wk2026Schedule.openingMatches.forEach(m => {
                html += `<tr>
                    <td>${m.date}<br><small>${m.time}</small></td>
                    <td>${m.home} - ${m.away}<br><small>${m.stage}</small></td>
                    <td>${m.city}</td>
                </tr>`;
            });
            html += '</table>';

            // Alle groepen
            html += '<div class="standings-title" style="margin-top:20px;">Alle Groepen</div>';
            html += '<div class="wk-groups-grid">';

            for (const [group, teams] of Object.entries(wk2026Groups)) {
                const isNLGroup = group === 'F';
                html += `<div class="wk-group-card ${isNLGroup ? 'highlight' : ''}">`;
                html += `<div class="wk-group-title ${isNLGroup ? 'highlight' : ''}">Groep ${group}</div>`;
                teams.forEach((team, i) => {
                    const isNL = team === 'Nederland';
                    html += `<div class="wk-team ${isNL ? 'highlight' : ''}">${team}</div>`;
                });
                html += '</div>';
            }

            html += '</div></div>';
            return html;
        }

        // Get static darts events
        function getStaticDartsEvents() {
            const events = [];
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            // Only look 7 days back and 28 days (4 weeks) ahead
            for (let i = -7; i < 28; i++) {
                const date = new Date(today);
                date.setDate(date.getDate() + i);
                const dateStr = date.toISOString().split('T')[0];

                dartsCalendar
                    .filter(event => event.date === dateStr)
                    .forEach(event => {
                        events.push({
                            date: new Date(event.date + 'T' + event.time),
                            time: event.time,
                            title: event.event,
                            location: event.location,
                            competition: event.event,
                            channel: event.channel,
                            matches: event.matches || null,
                            score: null,
                            live: isLiveNow(event.date + 'T' + event.time, null, 3)
                        });
                    });
            }
            return events;
        }

        // Check if event is live now
        function isLiveNow(startTime, endTime, durationHours = 2) {
            const now = new Date();
            const start = new Date(startTime);
            const end = endTime ? new Date(endTime) : new Date(start.getTime() + durationHours * 60 * 60 * 1000);
            return now >= start && now <= end;
        }

        // ============================================
        // RENDER FUNCTIONS
        // ============================================

        function formatDate(date) {
            const days = ['Zondag', 'Maandag', 'Dinsdag', 'Woensdag', 'Donderdag', 'Vrijdag', 'Zaterdag'];
            const months = ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december'];

            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const compareDate = new Date(date);
            compareDate.setHours(0, 0, 0, 0);

            const diffDays = Math.round((compareDate - today) / (1000 * 60 * 60 * 24));

            if (diffDays === 0) return 'Vandaag';
            if (diffDays === 1) return 'Morgen';
            if (diffDays === -1) return 'Gisteren';

            return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;
        }

        function isSameDay(date1, date2) {
            return date1.getFullYear() === date2.getFullYear() &&
                   date1.getMonth() === date2.getMonth() &&
                   date1.getDate() === date2.getDate();
        }

        function showLoading() {
            const container = document.getElementById('events-container');
            container.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Wedstrijden ophalen...</p>
                </div>
            `;
        }

        function showError(message) {
            const container = document.getElementById('events-container');
            container.innerHTML = `
                <div class="error-message">
                    <p>${message}</p>
                </div>
            `;
        }

        // Current sport filter (null = all sports)
        let currentSportFilter = 'voetbal'; // Start with voetbal active

        async function renderEvents() {
            const container = document.getElementById('events-container');
            container.className = `events-container${showScores ? ' show-scores' : ''}`;

            showLoading();

            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const futureDays = 30;

            try {
                const [footballData, dartsData, f1Data] = await Promise.all([
                    cachedData.voetbal || fetchFootballMatches(),
                    cachedData.darts || Promise.resolve(getStaticDartsEvents()),
                    cachedData.f1 || fetchF1Sessions()
                ]);

                cachedData.voetbal = footballData || [];
                cachedData.darts = dartsData || [];
                cachedData.f1 = f1Data || [];

                cachedData.voetbal.forEach(e => e.sportType = 'voetbal');
                cachedData.darts.forEach(e => e.sportType = 'darts');
                cachedData.f1.forEach(e => e.sportType = 'f1');

            } catch (error) {
                console.error('Fetch error:', error);
                showError('Kon data niet ophalen. Probeer het later opnieuw.');
                return;
            }

            // Apply sport filter
            let footballEvents = currentSportFilter === null || currentSportFilter === 'voetbal' ? [...cachedData.voetbal] : [];
            let dartsEvents = currentSportFilter === null || currentSportFilter === 'darts' ? [...cachedData.darts] : [];
            let f1Events = currentSportFilter === null || currentSportFilter === 'f1' ? [...cachedData.f1] : [];

            // Football: apply competition/club filters
            if (filters.competitions && filters.competitions.length > 0) {
                footballEvents = footballEvents.filter(e => filters.competitions.includes(e.competition));
            }
            if (filters.clubs && filters.clubs.length > 0) {
                footballEvents = footballEvents.filter(e => {
                    const homeMatch = filters.clubs.some(club => e.home && e.home.toLowerCase().includes(club.toLowerCase()));
                    const awayMatch = filters.clubs.some(club => e.away && e.away.toLowerCase().includes(club.toLowerCase()));
                    return homeMatch || awayMatch;
                });
            }

            let allEvents = [...footballEvents, ...dartsEvents, ...f1Events];

            // Update API status
            const statusEl = document.getElementById('api-status');
            const sources = [];
            if (cachedData.voetbal.length > 0) sources.push('Voetbal');
            if (cachedData.darts.length > 0) sources.push('Darts');
            if (cachedData.f1.length > 0) sources.push('F1');
            statusEl.innerHTML = sources.length > 0
                ? `<span class="live-dot"></span> ${sources.join(' + ')}`
                : '<span class="live-dot" style="background: #e10600;"></span> Geen data';

            // Filter by date range
            const futureLimit = new Date(today);
            futureLimit.setDate(futureLimit.getDate() + futureDays);

            const filteredEvents = allEvents.filter(e => {
                const eventDate = new Date(e.date);
                eventDate.setHours(0, 0, 0, 0);
                if (eventDate >= today && eventDate <= futureLimit) return true;
                if (showPast) {
                    const pastDays = e.sportType === 'voetbal' ? 3 : 7;
                    const pastDate = new Date(today);
                    pastDate.setDate(pastDate.getDate() - pastDays);
                    if (eventDate >= pastDate && eventDate < today) return true;
                }
                return false;
            });

            // Group by date, then by competition
            const eventsByDate = {};
            filteredEvents.forEach(event => {
                const dateKey = event.date.toISOString().split('T')[0];
                if (!eventsByDate[dateKey]) eventsByDate[dateKey] = [];
                eventsByDate[dateKey].push(event);
            });

            // Always include today even if no events
            const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
            if (!eventsByDate[todayStr]) {
                eventsByDate[todayStr] = []; // Empty array for today
            }

            const sortedDates = Object.keys(eventsByDate).sort();

            // Generate date tabs
            generateDateTabs(sortedDates, today);

            if (sortedDates.length === 0) {
                container.innerHTML = `
                    <div class="no-events">
                        <div class="icon">📺</div>
                        <h3>Geen sport gevonden</h3>
                        <p>Er zijn geen uitzendingen gevonden voor de komende periode.</p>
                    </div>
                `;
                return;
            }

            // Helper: get flag image
            const getFlagImg = (competition) => {
                const flagCode = CONFIG.COUNTRY_FLAGS[competition];
                if (flagCode) {
                    return `<img src="logos/flags/${flagCode}.svg" class="country-flag" onerror="this.style.display='none'" alt="">`;
                }
                return '';
            };

            // Helper: get channel HTML (text only, same style as competition names)
            const getChannelHtml = (channel) => {
                if (!channel) return '';
                return `<span class="channel-badge">${channel}</span>`;
            };

            let html = '';

            sortedDates.forEach(dateKey => {
                const events = eventsByDate[dateKey];
                const eventDate = new Date(dateKey + 'T12:00:00');
                const isToday = isSameDay(eventDate, today);
                const isPast = eventDate < today;

                html += `<div class="day-section${isPast ? ' past-day' : ''}${isToday ? ' today-section' : ''}" data-date="${dateKey}" ${isToday ? 'id="today-anchor"' : ''}>`;
                html += `<div class="day-header">${isToday ? 'Vandaag' : formatDate(eventDate)}</div>`;

                // Handle empty days (no events)
                if (events.length === 0) {
                    html += `<div class="no-events-day"><p>Geen uitzendingen${currentSportFilter ? ` (${currentSportFilter})` : ''}</p></div>`;
                    html += `</div>`; // Close day-section
                    return; // Continue to next date
                }

                // Group events by competition within this day
                const byCompetition = {};
                events.forEach(e => {
                    const comp = e.competition || (e.sportType === 'darts' ? 'Premier League Darts' : 'Formula 1');
                    if (!byCompetition[comp]) byCompetition[comp] = { events: [], channel: e.channel, sportType: e.sportType };
                    byCompetition[comp].events.push(e);
                });

                // Sort competitions: voetbal first, then darts, then f1
                const sortedComps = Object.keys(byCompetition).sort((a, b) => {
                    const typeA = byCompetition[a].sportType;
                    const typeB = byCompetition[b].sportType;
                    const order = { voetbal: 0, darts: 1, f1: 2 };
                    return (order[typeA] || 3) - (order[typeB] || 3);
                });

                sortedComps.forEach(comp => {
                    const { events: compEvents, channel, sportType } = byCompetition[comp];
                    compEvents.sort((a, b) => a.time.localeCompare(b.time));

                    // Competition header
                    html += `<div class="competition-group">`;
                    html += `<div class="competition-header">`;
                    html += getFlagImg(comp);
                    html += `<span class="competition-name">${comp.toUpperCase()}</span>`;
                    html += getChannelHtml(channel);
                    html += `</div>`;

                    // Match rows
                    compEvents.forEach(event => {
                        if (sportType === 'voetbal') {
                            const homeLogoSrc = event.homeCrest || CONFIG.CLUB_LOGOS[event.home];
                            const awayLogoSrc = event.awayCrest || CONFIG.CLUB_LOGOS[event.away];
                            const homeLogo = homeLogoSrc ? `<img src="${homeLogoSrc}" class="team-logo" onerror="this.style.display='none'" alt="">` : '<span class="team-logo-placeholder"></span>';
                            const awayLogo = awayLogoSrc ? `<img src="${awayLogoSrc}" class="team-logo" onerror="this.style.display='none'" alt="">` : '<span class="team-logo-placeholder"></span>';
                            const hasScore = event.score && event.score !== '-';
                            const timeOrScore = hasScore ? event.score : event.time;
                            const rowClass = `match-row${event.live ? ' live' : ''}${hasScore ? ' has-score finished' : ''}${isPast ? ' past' : ''}`;

                            html += `<div class="${rowClass}">`;
                            html += `<span class="team home">${event.home}</span>`;
                            html += homeLogo;
                            html += `<span class="match-time">${event.time}</span>`;
                            html += `<span class="match-score">${event.score || '-'}</span>`;
                            html += awayLogo;
                            html += `<span class="team away">${event.away}</span>`;
                            html += `</div>`;
                        } else if (sportType === 'darts' && event.matches && event.matches.length > 0) {
                            // Darts with matches: expandable accordion
                            const eventId = `darts-${dateKey}-${compEvents.indexOf(event)}`;
                            let title = event.title || '';
                            if (event.location) title += ` - ${event.location}`;

                            html += `<div class="match-row darts-row darts-expandable" data-event-id="${eventId}">`;
                            html += `<div class="event-info">`;
                            html += `<span class="match-time">${event.time}</span>`;
                            html += `<span class="event-title">${title}</span>`;
                            html += `<span class="expand-icon">▼</span>`;
                            html += `</div>`;
                            html += getChannelHtml(event.channel);
                            html += `</div>`;

                            // Hidden matches list
                            html += `<div class="darts-matches-list" id="${eventId}" style="display:none;">`;
                            event.matches.forEach(m => {
                                const homeName = dartsPlayers[m.home]?.name || m.home;
                                const awayName = dartsPlayers[m.away]?.name || m.away;
                                html += `<div class="darts-match-item">`;
                                html += `<span class="darts-match-time">${m.time}</span>`;
                                html += `<span class="darts-match-players">${homeName} <span class="vs">vs</span> ${awayName}</span>`;
                                html += `</div>`;
                            });
                            html += `</div>`;
                        } else {
                            // Darts without matches & F1: single row with title
                            let title = event.title || '';
                            if (event.location) title += ` - ${event.location}`;
                            if (event.circuit) title += ` - ${event.circuit}`;

                            html += `<div class="match-row ${sportType}-row">`;
                            html += `<div class="event-info">`;
                            html += `<span class="match-time">${event.time}</span>`;
                            html += `<span class="event-title">${title}</span>`;
                            html += `</div>`;
                            html += getChannelHtml(event.channel);
                            html += `</div>`;
                        }
                    });

                    html += `</div>`; // competition-group
                });

                html += `</div>`; // day-section
            });

            container.innerHTML = html;

            if (showScores) {
                container.classList.add('show-scores');
            }

            // Setup scroll sync between content and date tabs
            setupScrollSync();

            // Setup darts accordion click handlers
            setupDartsAccordion();

            // Scroll to "Vandaag" or nearest future date on initial load
            setTimeout(() => {
                scrollToTodayOrNearest();
            }, 100);
        }

        // Scroll to today's section, or the nearest future section if today has no events
        function scrollToTodayOrNearest() {
            const today = new Date();
            const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;

            // Find today's section (should always exist now)
            let targetSection = document.querySelector(`.day-section[data-date="${todayStr}"]`);

            // Fallback: find first section >= today
            if (!targetSection) {
                const allSections = document.querySelectorAll('.day-section[data-date]');
                for (const section of allSections) {
                    if (section.dataset.date >= todayStr) {
                        targetSection = section;
                        break;
                    }
                }
            }

            // Last resort: scroll to top
            if (!targetSection) {
                window.scrollTo(0, 0);
                return;
            }

            const headerHeight = document.querySelector('.header-section')?.offsetHeight || 0;
            const y = targetSection.getBoundingClientRect().top + window.pageYOffset - headerHeight;
            window.scrollTo({ top: y, behavior: 'auto' });

            // Update active tab to today
            const tabsContainer = document.getElementById('date-tabs');
            if (tabsContainer) {
                tabsContainer.querySelectorAll('.date-tab').forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.date === todayStr);
                });
                // Scroll tab into center view
                const todayTab = tabsContainer.querySelector(`[data-date="${todayStr}"]`);
                if (todayTab) {
                    const container = document.getElementById('date-tabs-container');
                    if (container) {
                        const tabRect = todayTab.getBoundingClientRect();
                        const containerRect = container.getBoundingClientRect();
                        const scrollLeft = todayTab.offsetLeft - (containerRect.width / 2) + (tabRect.width / 2);
                        container.scrollLeft = scrollLeft;
                    }
                }
            }
        }

        // Generate date tabs
        function generateDateTabs(dates, today) {
            const tabsContainer = document.getElementById('date-tabs');
            if (!tabsContainer) return;

            // Use local date format (not UTC)
            const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
            const dayNames = ['ZO', 'MA', 'DI', 'WO', 'DO', 'VR', 'ZA'];
            const monthNames = ['JAN', 'FEB', 'MRT', 'APR', 'MEI', 'JUN', 'JUL', 'AUG', 'SEP', 'OKT', 'NOV', 'DEC'];

            // Always show a range of dates: 3 days back, 7 days forward
            const allDates = [];
            for (let i = -3; i <= 7; i++) {
                const d = new Date(today);
                d.setDate(d.getDate() + i);
                const dateStr = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;
                allDates.push(dateStr);
            }
            const sortedAllDates = allDates;

            let html = '';
            sortedAllDates.forEach(dateStr => {
                const d = new Date(dateStr + 'T12:00:00');
                const isToday = dateStr === todayStr;
                const dayName = dayNames[d.getDay()];
                const dayNum = d.getDate();
                const monthName = monthNames[d.getMonth()];
                const label = isToday ? 'VANDAAG' : `${dayName} ${dayNum} ${monthName}`;
                const isActive = dateStr === (selectedDate || todayStr);

                html += `<button class="date-tab${isActive ? ' active' : ''}" data-date="${dateStr}">${label}</button>`;
            });

            tabsContainer.innerHTML = html;

            // Add click handlers
            tabsContainer.querySelectorAll('.date-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    selectedDate = tab.dataset.date;
                    tabsContainer.querySelectorAll('.date-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    scrollToDate(selectedDate);
                });
            });

            // Scroll "Vandaag" tab to center and make it active
            const todayTab = tabsContainer.querySelector(`[data-date="${todayStr}"]`);
            if (todayTab && !selectedDate) {
                // Make sure VANDAAG is active on initial load
                tabsContainer.querySelectorAll('.date-tab').forEach(t => t.classList.remove('active'));
                todayTab.classList.add('active');

                const container = document.getElementById('date-tabs-container');
                setTimeout(() => {
                    const tabRect = todayTab.getBoundingClientRect();
                    const containerRect = container.getBoundingClientRect();
                    const scrollLeft = todayTab.offsetLeft - (containerRect.width / 2) + (tabRect.width / 2);
                    container.scrollLeft = scrollLeft;
                }, 50);
            }
        }

        // Scroll to specific date (or nearest date if no events for that day)
        function scrollToDate(dateStr) {
            let section = document.querySelector(`.day-section[data-date="${dateStr}"]`);
            if (!section) {
                // Find nearest future date section
                const allSections = document.querySelectorAll('.day-section[data-date]');
                for (const s of allSections) {
                    if (s.dataset.date >= dateStr) {
                        section = s;
                        break;
                    }
                }
                // If no future section, get the last one
                if (!section && allSections.length > 0) {
                    section = allSections[allSections.length - 1];
                }
            }
            if (section) {
                // Scroll section to top (accounting for sticky header)
                const headerHeight = document.querySelector('.header-section')?.offsetHeight || 0;
                const y = section.getBoundingClientRect().top + window.pageYOffset - headerHeight;
                window.scrollTo({ top: y, behavior: 'smooth' });
            }
        }

        // Update active date tab based on scroll position
        function setupScrollSync() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.intersectionRatio > 0.1) {
                        const dateStr = entry.target.dataset.date;
                        if (dateStr) {
                            updateActiveTab(dateStr);
                        }
                    }
                });
            }, {
                rootMargin: '-120px 0px -70% 0px', // Trigger when section is near top
                threshold: [0.1]
            });

            // Observe all day sections
            document.querySelectorAll('.day-section[data-date]').forEach(section => {
                observer.observe(section);
            });
        }

        // Update active tab and scroll it into view
        function updateActiveTab(dateStr) {
            const tabsContainer = document.getElementById('date-tabs');
            if (!tabsContainer) return;

            // Update active class
            tabsContainer.querySelectorAll('.date-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.date === dateStr);
            });

            // Scroll active tab into view
            const activeTab = tabsContainer.querySelector(`[data-date="${dateStr}"]`);
            if (activeTab) {
                const container = document.getElementById('date-tabs-container');
                const tabRect = activeTab.getBoundingClientRect();
                const containerRect = container.getBoundingClientRect();
                const scrollLeft = activeTab.offsetLeft - (containerRect.width / 2) + (tabRect.width / 2);
                container.scrollTo({ left: scrollLeft, behavior: 'smooth' });
            }
        }

        // Setup darts accordion click handlers
        function setupDartsAccordion() {
            document.querySelectorAll('.darts-expandable').forEach(row => {
                row.addEventListener('click', () => {
                    const eventId = row.dataset.eventId;
                    const matchesList = document.getElementById(eventId);

                    if (matchesList) {
                        const isExpanded = row.classList.contains('expanded');

                        // Close all other expanded darts accordions
                        document.querySelectorAll('.darts-expandable.expanded').forEach(other => {
                            if (other !== row) {
                                other.classList.remove('expanded');
                                const otherId = other.dataset.eventId;
                                const otherList = document.getElementById(otherId);
                                if (otherList) otherList.style.display = 'none';
                            }
                        });

                        // Toggle current
                        if (isExpanded) {
                            row.classList.remove('expanded');
                            matchesList.style.display = 'none';
                        } else {
                            row.classList.add('expanded');
                            matchesList.style.display = 'block';
                        }
                    }
                });
            });
        }

        // Get today's date string
        function getTodayStr() {
            const d = new Date();
            return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;
        }

        // Selected date for tabs - always start with today
        let selectedDate = null; // null means "today"

        // Render standings in menu
        async function renderStandingsInMenu() {
            await renderStandings('standings-tabs-menu', 'standings-content-menu');
        }

        // Render standings
        async function renderStandings(tabsId = 'standings-tabs-menu', contentId = 'standings-content-menu') {
            const tabsContainer = document.getElementById(tabsId);
            const contentContainer = document.getElementById(contentId);

            if (standingsSport === 'voetbal') {
                // Football standings - show tabs for each league
                const leagues = [
                    { id: 88, name: 'Eredivisie' },
                    { id: 39, name: 'Premier League' },
                    { id: 78, name: 'Bundesliga' },
                    { id: 140, name: 'La Liga' },
                    { id: 135, name: 'Serie A' },
                    { id: 61, name: 'Ligue 1' },
                    { id: 2, name: 'Champions League' },
                    { id: 'wk2026', name: 'WK 2026' }
                ];

                tabsContainer.innerHTML = leagues.map((l, i) =>
                    `<button class="standings-tab ${i === 0 ? 'active' : ''}" data-league="${l.id}">${l.name}</button>`
                ).join('');

                contentContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Stand ophalen...</p></div>';

                // Load first league
                await loadFootballStandings(leagues[0].id, leagues[0].name, contentId);

                // Add tab handlers
                tabsContainer.querySelectorAll('.standings-tab').forEach(tab => {
                    tab.addEventListener('click', async () => {
                        tabsContainer.querySelectorAll('.standings-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        const leagueId = tab.dataset.league;
                        // Handle both numeric IDs and string IDs (like 'wk2026')
                        const league = leagues.find(l => String(l.id) === leagueId);
                        if (league) {
                            await loadFootballStandings(league.id, league.name, contentId);
                        }
                    });
                });

            } else if (standingsSport === 'darts') {
                tabsContainer.innerHTML = '<button class="standings-tab active">Premier League</button>';
                contentContainer.innerHTML = renderDartsStandings();

            } else if (standingsSport === 'f1') {
                tabsContainer.innerHTML = `
                    <button class="standings-tab active" data-type="drivers">Coureurs</button>
                    <button class="standings-tab" data-type="constructors">Constructeurs</button>
                `;
                contentContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Stand ophalen...</p></div>';

                const f1Data = await fetchF1Standings();
                renderF1Standings(f1Data, 'drivers', contentId);

                tabsContainer.querySelectorAll('.standings-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        tabsContainer.querySelectorAll('.standings-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        renderF1Standings(f1Data, tab.dataset.type, contentId);
                    });
                });
            }
        }

        async function loadFootballStandings(leagueId, leagueName, contentId = 'standings-content-menu') {
            const contentContainer = document.getElementById(contentId);

            // Special case: WK 2026 groups
            if (leagueId === 'wk2026') {
                contentContainer.innerHTML = renderWK2026Groups();
                return;
            }

            contentContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Stand ophalen...</p></div>';

            const standings = await fetchFootballStandings(leagueId);
            console.log(`Standings for ${leagueName} (${leagueId}):`, standings);

            if (!standings || standings.length === 0) {
                console.warn(`No standings data for ${leagueName}`);
                contentContainer.innerHTML = '<div class="no-events"><p>Geen stand beschikbaar</p></div>';
                return;
            }

            // Check if using cached/static data
            const cacheKey = `standings_${leagueId}`;
            const cacheTime = localStorage.getItem(cacheKey + '_time');
            const isStatic = !cacheTime;

            let html = `<div class="standings-container">
                <div class="standings-title">${leagueName}${isStatic ? ' <span style="font-size:0.7em;color:#999;">(snapshot)</span>' : ''}</div>
                <table class="standings-table">
                    <tr><th class="pos">#</th><th>Club</th><th class="stats">W</th><th class="stats">G</th><th class="stats">V</th><th class="stats">+/-</th><th class="pts">Ptn</th></tr>`;

            standings.forEach(team => {
                const logo = team.team.logo ? `<img src="${team.team.logo}" class="team-logo" alt="">` : '';
                html += `<tr>
                    <td class="pos">${team.rank}</td>
                    <td><div class="team">${logo}${team.team.name}</div></td>
                    <td class="stats">${team.all.win}</td>
                    <td class="stats">${team.all.draw}</td>
                    <td class="stats">${team.all.lose}</td>
                    <td class="stats">${team.goalsDiff > 0 ? '+' : ''}${team.goalsDiff}</td>
                    <td class="pts">${team.points}</td>
                </tr>`;
            });

            html += '</table></div>';
            contentContainer.innerHTML = html;
        }

        function renderDartsStandings() {
            let html = `<div class="standings-container">
                <div class="standings-title">Premier League Darts 2026 <span style="font-size:0.7em;color:#999;">(na Night 1)</span></div>
                <table class="standings-table">
                    <tr><th class="pos">#</th><th>Speler</th><th class="stats">GS</th><th class="stats">HF</th><th class="stats">F</th><th class="stats">W</th><th class="pts">Ptn</th></tr>`;

            plDartsStandings.forEach(player => {
                html += `<tr>
                    <td class="pos">${player.pos}</td>
                    <td>${player.name}</td>
                    <td class="stats">${player.played}</td>
                    <td class="stats">${player.sf}</td>
                    <td class="stats">${player.f}</td>
                    <td class="stats">${player.w}</td>
                    <td class="pts">${player.pts}</td>
                </tr>`;
            });

            html += '</table></div>';
            return html;
        }

        function renderF1Standings(data, type, contentId = 'standings-content-menu') {
            const contentContainer = document.getElementById(contentId);

            if (type === 'drivers') {
                if (!data.drivers.length) {
                    contentContainer.innerHTML = '<div class="no-events"><p>Kon coureurs stand niet ophalen</p></div>';
                    return;
                }

                let html = `<div class="standings-container">
                    <div class="standings-title">F1 Coureurs Kampioenschap 2026</div>
                    <table class="standings-table">
                        <tr><th class="pos">#</th><th>Coureur</th><th>Team</th><th class="pts">Ptn</th></tr>`;

                data.drivers.forEach(d => {
                    html += `<tr>
                        <td class="pos">${d.position}</td>
                        <td>${d.Driver.givenName} ${d.Driver.familyName}</td>
                        <td>${d.Constructors[0]?.name || ''}</td>
                        <td class="pts">${d.points}</td>
                    </tr>`;
                });

                html += '</table></div>';
                contentContainer.innerHTML = html;

            } else {
                if (!data.constructors.length) {
                    contentContainer.innerHTML = '<div class="no-events"><p>Kon constructeurs stand niet ophalen</p></div>';
                    return;
                }

                let html = `<div class="standings-container">
                    <div class="standings-title">F1 Constructeurs Kampioenschap 2026</div>
                    <table class="standings-table">
                        <tr><th class="pos">#</th><th>Team</th><th class="pts">Ptn</th></tr>`;

                data.constructors.forEach(c => {
                    html += `<tr>
                        <td class="pos">${c.position}</td>
                        <td>${c.Constructor.name}</td>
                        <td class="pts">${c.points}</td>
                    </tr>`;
                });

                html += '</table></div>';
                contentContainer.innerHTML = html;
            }
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================

        // Hamburger Menu
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const sideMenu = document.getElementById('side-menu');
        const menuOverlay = document.getElementById('menu-overlay');
        const closeMenuBtn = document.getElementById('close-menu-btn');

        function openMenu() {
            hamburgerBtn.classList.add('active');
            sideMenu.classList.add('open');
            menuOverlay.classList.add('show');
            document.body.style.overflow = 'hidden';
            renderStandingsInMenu();
        }

        function closeMenu() {
            hamburgerBtn.classList.remove('active');
            sideMenu.classList.remove('open');
            menuOverlay.classList.remove('show');
            document.body.style.overflow = '';
        }

        hamburgerBtn.addEventListener('click', openMenu);
        closeMenuBtn.addEventListener('click', closeMenu);
        menuOverlay.addEventListener('click', closeMenu);

        // Standings sport buttons
        document.querySelectorAll('.standings-sport-btn').forEach(btn => {
            btn.addEventListener('click', async () => {
                document.querySelectorAll('.standings-sport-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                standingsSport = btn.dataset.standingsSport;
                await renderStandingsInMenu();
            });
        });

        document.getElementById('toggle-scores').addEventListener('change', function() {
            showScores = this.checked;
            document.getElementById('events-container').classList.toggle('show-scores', showScores);
        });

        // Refresh standings button
        document.getElementById('refresh-standings').addEventListener('click', async function() {
            this.classList.add('loading');
            // Clear all standings caches (use correct league ID keys)
            [88, 39, 78, 140, 135, 61, 2, 3, 848].forEach(id => {
                localStorage.removeItem(`standings_${id}`);
                localStorage.removeItem(`standings_${id}_time`);
            });
            // Re-render current standings
            await renderStandingsInMenu();
            this.classList.remove('loading');
        });

        // Sport filter buttons
        document.querySelectorAll('.sport-filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const sport = btn.dataset.sport;
                const wasActive = btn.classList.contains('active');

                // Remove active from all
                document.querySelectorAll('.sport-filter-btn').forEach(b => b.classList.remove('active'));

                if (wasActive) {
                    // Was active, now show all sports
                    currentSportFilter = null;
                } else {
                    // Activate this sport filter
                    btn.classList.add('active');
                    currentSportFilter = sport;
                }

                // Reset selected date to today when switching sports
                selectedDate = null;

                renderEvents().then(() => {
                    setTimeout(() => scrollToTodayOrNearest(), 150);
                });
            });
        });

        // Competition dropdown
        const compBtn = document.getElementById('comp-btn');
        const compContent = document.getElementById('comp-content');
        const compCheckboxes = compContent.querySelectorAll('input[type="checkbox"]');

        // Set initial state from localStorage
        compCheckboxes.forEach(cb => {
            cb.checked = filters.competitions.includes(cb.value);
        });
        updateCompBtnText();

        // Toggle dropdown
        compBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            compContent.classList.toggle('show');
        });

        // Handle checkbox changes
        compCheckboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                filters.competitions = Array.from(compCheckboxes)
                    .filter(c => c.checked)
                    .map(c => c.value);
                localStorage.setItem('selectedCompetitions', JSON.stringify(filters.competitions));
                updateCompBtnText();
                renderEvents();
            });
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!compContent.contains(e.target) && e.target !== compBtn) {
                compContent.classList.remove('show');
            }
        });

        function updateCompBtnText() {
            const count = filters.competitions.length;
            if (count === 0) {
                compBtn.textContent = 'Alle competities ▾';
            } else if (count === 1) {
                compBtn.textContent = filters.competitions[0] + ' ▾';
            } else {
                compBtn.textContent = `${count} competities ▾`;
            }
        }

        // Club filter with debounce (comma separated)
        let clubFilterTimeout;
        const clubInput = document.getElementById('filter-clubs');
        clubInput.value = (filters.clubs || []).join(', ');

        clubInput.addEventListener('input', () => {
            clearTimeout(clubFilterTimeout);
            clubFilterTimeout = setTimeout(() => {
                const value = clubInput.value;
                filters.clubs = value ? value.split(',').map(c => c.trim()).filter(c => c) : [];
                localStorage.setItem('selectedClubs', JSON.stringify(filters.clubs));
                renderEvents();
            }, 300);
        });

        // Reset filters button
        document.getElementById('reset-filters').addEventListener('click', () => {
            // Clear competitions
            filters.competitions = [];
            if (compCheckboxes) compCheckboxes.forEach(cb => cb.checked = false);
            updateCompBtnText();
            localStorage.removeItem('selectedCompetitions');

            // Clear clubs
            filters.clubs = [];
            if (clubInput) clubInput.value = '';
            localStorage.removeItem('selectedClubs');

            // Reset toggles
            document.getElementById('toggle-scores').checked = false;
            showScores = false;
            document.getElementById('events-container').classList.remove('show-scores');

            renderEvents();
        });


        // ============================================
        // INITIALIZATION
        // ============================================
        // Clear cache if version changed (forces fresh data after updates)
        const storedVersion = localStorage.getItem('cacheVersion');
        if (storedVersion !== CONFIG.CACHE_VERSION) {
            console.log(`Cache version changed (${storedVersion} → ${CONFIG.CACHE_VERSION}), clearing cache...`);
            localStorage.removeItem('footballCache');
            localStorage.removeItem('footballCacheTime');
            localStorage.removeItem('footballSource');
            // Clear all standings caches
            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('standings_')) {
                    localStorage.removeItem(key);
                }
            });
            localStorage.setItem('cacheVersion', CONFIG.CACHE_VERSION);
        }

        window.scrollTo(0, 0); // Always start at top
        renderEvents();

        // Auto-refresh every 5 minutes
        setInterval(() => {
            cachedData = { voetbal: null, darts: null, f1: null };
            renderEvents();
        }, 5 * 60 * 1000);
    </script>
</body>
</html>
