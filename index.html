<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sport op TV Vanavond</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --bg: #f8fafc;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: rgba(255, 255, 255, 0.8);
            --card-border: rgba(255, 255, 255, 0.5);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --text: #1e293b;
            --text-secondary: #64748b;
            --border: rgba(0, 0, 0, 0.08);
            --success: #10b981;
            --football: #22c55e;
            --football-glow: rgba(34, 197, 94, 0.4);
            --darts: #f97316;
            --darts-glow: rgba(249, 115, 22, 0.4);
            --f1: #ef4444;
            --f1-glow: rgba(239, 68, 68, 0.4);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.12);
            --radius: 16px;
            --radius-sm: 10px;
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --bg-gradient: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
            --card-bg: rgba(30, 41, 59, 0.8);
            --card-border: rgba(255, 255, 255, 0.1);
            --glass-bg: rgba(30, 41, 59, 0.7);
            --text: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: rgba(255, 255, 255, 0.08);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.4);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            transition: background 0.3s ease, color 0.3s ease;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 300px;
            background: var(--bg-gradient);
            z-index: -1;
            opacity: 0.15;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            margin-bottom: 24px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: var(--radius);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
        }

        header h1 {
            font-size: clamp(1.4rem, 4vw, 1.8rem);
            font-weight: 800;
            background: var(--bg-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        [data-theme="dark"] header h1 {
            background: linear-gradient(135deg, #ffffff 0%, #e0e7ff 100%);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .version-badge {
            font-size: 0.65rem;
            color: var(--text-secondary);
            opacity: 0.5;
            margin-left: 8px;
        }

        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.05);
        }

        .theme-toggle svg {
            width: 18px;
            height: 18px;
            color: var(--text-secondary);
            transition: color 0.2s;
        }

        [data-theme="dark"] .theme-toggle .sun-icon { display: block; }
        [data-theme="dark"] .theme-toggle .moon-icon { display: none; }
        .theme-toggle .sun-icon { display: none; }
        .theme-toggle .moon-icon { display: block; }

        /* Sport Tabs */
        .sport-tabs {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 28px;
            flex-wrap: wrap;
        }

        .sport-tab {
            padding: 14px 32px;
            border: none;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            color: var(--text-secondary);
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sport-tab svg {
            width: 18px;
            height: 18px;
            transition: transform 0.3s ease;
        }

        .sport-tab:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .sport-tab:hover svg {
            transform: scale(1.1);
        }

        .sport-tab.active[data-sport="voetbal"] {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            box-shadow: 0 8px 25px var(--football-glow);
            border-color: transparent;
        }

        .sport-tab.active[data-sport="darts"] {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            box-shadow: 0 8px 25px var(--darts-glow);
            border-color: transparent;
        }

        .sport-tab.active[data-sport="f1"] {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 8px 25px var(--f1-glow);
            border-color: transparent;
        }

        /* Filters Row - Modern */
        .filters-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            margin-bottom: 12px;
            padding: 10px 12px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            border: 1px solid var(--card-border);
        }

        /* Dropdown */
        .dropdown {
            position: relative;
        }

        .dropdown-btn {
            padding: 6px 10px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            background: var(--card-bg);
            color: var(--text);
            cursor: pointer;
            min-width: 100px;
            text-align: left;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .dropdown-btn:hover {
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-hover);
            z-index: 100;
            min-width: 200px;
            max-height: 350px;
            overflow-y: auto;
            animation: slideDown 0.2s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-content.show {
            display: block;
        }

        .dropdown-content label {
            display: flex;
            align-items: center;
            padding: 10px 14px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background 0.15s ease;
        }

        .dropdown-content label:hover {
            background: var(--border);
        }

        .dropdown-content input[type="checkbox"] {
            margin-right: 10px;
            accent-color: var(--primary);
            width: 16px;
            height: 16px;
        }

        .dropdown-content hr {
            border: none;
            border-top: 1px solid var(--border);
            margin: 6px 0;
        }

        .reset-btn {
            padding: 5px 8px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: var(--card-bg);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s ease;
        }

        .reset-btn:hover {
            background: var(--border);
            color: var(--text);
        }

        /* View toggle */
        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 0;
            margin-bottom: 20px;
        }

        .view-btn {
            padding: 12px 28px;
            border: 1px solid var(--border);
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .view-btn:first-child {
            border-radius: var(--radius-sm) 0 0 var(--radius-sm);
        }

        .view-btn:last-child {
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            border-left: none;
        }

        .view-btn:hover:not(.active) {
            background: var(--glass-bg);
        }

        .view-btn.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        /* Standings table */
        .standings-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            border: 1px solid var(--card-border);
        }

        .standings-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary-light);
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .standings-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            color: var(--text);
        }

        .standings-table th {
            text-align: left;
            padding: 12px 8px;
            color: var(--text-secondary);
            font-weight: 600;
            border-bottom: 2px solid var(--border);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .standings-table td {
            padding: 14px 8px;
            border-bottom: 1px solid var(--border);
            transition: background 0.15s ease;
            color: var(--text);
        }

        .standings-table tr:hover td {
            background: var(--glass-bg);
        }

        .standings-table tr:last-child td {
            border-bottom: none;
        }

        .standings-table tr.highlight-row td {
            background: rgba(249, 115, 22, 0.1);
        }

        .wk-groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
        }

        .wk-group-card {
            background: var(--glass-bg);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
        }

        .wk-group-card.highlight {
            background: rgba(249, 115, 22, 0.1);
            border-color: var(--darts);
        }

        .wk-group-title {
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--text);
        }

        .wk-group-title.highlight {
            color: var(--darts);
        }

        .wk-team {
            padding: 2px 0;
            color: var(--text);
        }

        .wk-team.highlight {
            font-weight: 700;
            color: var(--darts);
        }

        .standings-table .pos {
            width: 35px;
            font-weight: 700;
            color: var(--text-secondary);
        }

        .standings-table tr:nth-child(-n+4) .pos {
            color: var(--success);
        }

        .standings-table .team {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .standings-table .team-logo {
            width: 24px;
            height: 24px;
            object-fit: contain;
        }

        .standings-table .pts {
            font-weight: 800;
            text-align: right;
            color: var(--primary);
        }

        .standings-table .stats {
            color: var(--text-secondary);
            text-align: center;
        }

        .standings-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .standings-tab {
            padding: 8px 16px;
            border: 1px solid var(--border);
            border-radius: 50px;
            background: var(--card-bg);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.2s ease;
            color: var(--text);
        }

        .standings-tab:hover:not(.active) {
            border-color: var(--primary-light);
        }

        .standings-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        /* Expandable darts matches */
        .event-card.has-matches {
            cursor: pointer;
        }

        .event-card.has-matches:hover {
            background: var(--glass-bg);
        }

        .matches-list {
            display: none;
            grid-column: 1 / -1;
            padding-top: 16px;
            margin-top: 16px;
            border-top: 1px solid var(--border);
        }

        .event-card.expanded .matches-list {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .match-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            font-size: 0.9rem;
            color: var(--text);
            border-bottom: 1px solid var(--border);
        }

        .match-item:last-child {
            border-bottom: none;
        }

        .match-item .match-time {
            min-width: 55px;
            color: var(--darts);
            font-weight: 700;
            margin-right: 14px;
        }

        .match-item .vs {
            margin: 0 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .expand-icon {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-left: 8px;
            transition: transform 0.3s ease;
        }

        .event-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .filter-input {
            padding: 6px 10px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            width: 100px;
            background: var(--card-bg);
            color: var(--text);
            transition: all 0.2s ease;
        }

        .filter-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .filter-input::placeholder {
            color: var(--text-secondary);
        }

        /* Toggle Group */
        .toggle-group {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-left: auto;
        }

        .mini-toggle {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            user-select: none;
        }

        .mini-toggle input {
            display: none;
        }

        .toggle-slider {
            width: 28px;
            height: 16px;
            background: var(--border);
            border-radius: 8px;
            position: relative;
            transition: background 0.2s ease;
        }

        .toggle-slider::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.2s ease;
        }

        .mini-toggle input:checked + .toggle-slider {
            background: var(--primary);
        }

        .mini-toggle input:checked + .toggle-slider::after {
            transform: translateX(12px);
        }

        .toggle-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        @media (max-width: 600px) {
            .filters-row {
                flex-wrap: wrap;
                gap: 6px;
                padding: 8px;
            }

            .filter-input {
                flex: 1;
                min-width: 60px;
            }
        }

        /* Event Cards */
        .events-container {
            margin-top: 24px;
        }

        .day-section {
            margin-bottom: 36px;
        }

        .day-header {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-secondary);
            margin-bottom: 18px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .day-header svg {
            width: 20px;
            height: 20px;
            opacity: 0.6;
        }

        .event-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
            border-radius: var(--radius);
            padding: 18px 22px;
            margin-bottom: 14px;
            box-shadow: var(--shadow);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: grid;
            grid-template-columns: 60px 1fr 55px 90px;
            gap: 14px;
            align-items: center;
        }

        .event-card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-4px);
            border-color: var(--primary-light);
        }

        .event-time {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--primary);
            font-variant-numeric: tabular-nums;
        }

        .event-details {
            flex: 1;
        }

        .event-title {
            font-size: 1.05rem;
            font-weight: 700;
            margin-bottom: 6px;
            line-height: 1.3;
        }

        .event-meta {
            display: flex;
            gap: 18px;
            color: var(--text-secondary);
            font-size: 0.85rem;
            flex-wrap: wrap;
        }

        .event-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .event-channel {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 85px;
        }

        .channel-logo {
            height: 24px;
            max-width: 50px;
            width: auto;
            object-fit: contain;
            border-radius: 4px;
            transition: transform 0.2s ease;
        }

        .event-card:hover .channel-logo {
            transform: scale(1.05);
        }

        .channel-text {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 10px 18px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            font-size: 0.85rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);
        }

        /* Club logos */
        .club-logo {
            height: 26px;
            width: 26px;
            object-fit: contain;
            vertical-align: middle;
            margin: 0 8px;
            border-radius: 4px;
        }

        .club-logo[src=""] {
            display: none;
        }

        .team-name {
            vertical-align: middle;
        }

        /* Past events styling */
        .past-day {
            opacity: 0.65;
        }

        .past-day .day-header {
            color: var(--text-secondary);
        }

        .past-event {
            background: var(--glass-bg);
            opacity: 0.8;
        }

        /* Score column */
        .event-score-col {
            font-size: 1.15rem;
            font-weight: 800;
            color: var(--success);
            text-align: center;
            min-width: 55px;
            visibility: hidden;
            font-variant-numeric: tabular-nums;
        }

        .show-scores .event-score-col {
            visibility: visible;
        }

        .event-score-col.no-score {
            color: var(--text-secondary);
            opacity: 0.4;
        }

        /* Live indicator */
        .live-badge {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            animation: livePulse 2s infinite;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }

        @keyframes livePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.85; transform: scale(0.98); }
        }

        /* Competition badge */
        .competition-badge {
            background: var(--glass-bg);
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid var(--border);
        }

        /* Loading & Error states */
        .loading {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-secondary);
        }

        .loading .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            text-align: center;
            padding: 50px 24px;
            color: #dc2626;
            background: rgba(254, 226, 226, 0.8);
            border-radius: var(--radius);
            margin-bottom: 24px;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        [data-theme="dark"] .error-message {
            background: rgba(127, 29, 29, 0.3);
            border-color: rgba(239, 68, 68, 0.3);
        }

        /* No events message */
        .no-events {
            text-align: center;
            padding: 80px 24px;
            color: var(--text-secondary);
        }

        .no-events .icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.4;
        }

        .no-events h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        /* API Status */
        .api-status {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 8px;
            opacity: 0.6;
        }

        .api-status .live-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: livePulse 2s infinite;
            box-shadow: 0 0 8px var(--success);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 50px 24px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 40px;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
            transition: opacity 0.2s;
        }

        footer a:hover {
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 8px;
            }

            header {
                padding: 8px 12px;
                margin-bottom: 8px;
            }

            header h1 {
                font-size: 1rem;
            }

            .theme-toggle {
                padding: 5px 8px;
            }

            .theme-toggle svg {
                width: 14px;
                height: 14px;
            }

            .sport-tabs {
                gap: 4px;
                margin-bottom: 8px;
            }

            .sport-tab {
                padding: 6px 12px;
                font-size: 0.75rem;
                gap: 3px;
            }

            .sport-tab svg {
                width: 12px;
                height: 12px;
            }

            /* Compact filters for mobile */
            .filters-row {
                padding: 8px;
                margin-bottom: 6px;
                gap: 6px;
                flex-wrap: wrap;
            }

            .dropdown-btn {
                padding: 6px 10px;
                font-size: 0.75rem;
                min-width: auto;
            }

            .filter-input {
                padding: 6px 8px;
                font-size: 0.75rem;
                width: 100px;
            }

            .reset-btn {
                padding: 4px 6px;
                font-size: 0.7rem;
            }

            .toggle-group {
                gap: 8px;
                margin-left: 0;
                margin-top: 6px;
                width: 100%;
                justify-content: flex-end;
            }

            .toggle-slider {
                width: 24px;
                height: 14px;
            }

            .toggle-slider::after {
                width: 10px;
                height: 10px;
            }

            .mini-toggle input:checked + .toggle-slider::after {
                transform: translateX(10px);
            }

            .toggle-label {
                font-size: 0.6rem;
            }

            .view-toggle {
                margin-bottom: 6px;
            }

            .view-btn {
                padding: 6px 14px;
                font-size: 0.75rem;
            }

            .api-status {
                font-size: 0.6rem;
            }

            .event-card {
                grid-template-columns: 36px 1fr 32px 44px;
                gap: 4px;
                padding: 8px;
                margin-bottom: 6px;
            }

            .event-card .event-channel {
                display: flex;
                min-width: auto;
            }

            .event-time {
                font-size: 0.8rem;
            }

            .event-title {
                font-size: 0.75rem;
                line-height: 1.2;
            }

            .event-meta {
                font-size: 0.65rem;
                gap: 4px;
            }

            .competition-badge {
                padding: 2px 6px;
                font-size: 0.6rem;
            }

            .event-score-col {
                font-size: 0.75rem;
            }

            .channel-text {
                padding: 2px 4px;
                font-size: 0.5rem;
            }

            .channel-logo {
                height: 18px;
            }

            .club-logo {
                height: 16px;
                width: 16px;
                margin: 0 3px;
            }

            .day-header {
                font-size: 0.95rem;
                margin-bottom: 10px;
                padding-bottom: 8px;
            }

            .standings-container {
                padding: 12px;
            }

            .standings-table {
                font-size: 0.75rem;
            }

            .standings-tabs {
                gap: 6px;
            }

            .standings-tab {
                padding: 6px 10px;
                font-size: 0.7rem;
            }

            footer {
                padding: 30px 16px;
                font-size: 0.8rem;
            }
        }

        /* Sport-specific accent colors */
        .sport-voetbal .event-time { color: var(--football); }
        .sport-darts .event-time { color: var(--darts); }
        .sport-f1 .event-time { color: var(--f1); }

        .sport-voetbal .day-header { border-color: var(--football); }
        .sport-darts .day-header { border-color: var(--darts); }
        .sport-f1 .day-header { border-color: var(--f1); }

        .sport-voetbal .event-card:hover { border-color: var(--football); box-shadow: 0 8px 30px var(--football-glow); }
        .sport-darts .event-card:hover { border-color: var(--darts); box-shadow: 0 8px 30px var(--darts-glow); }
        .sport-f1 .event-card:hover { border-color: var(--f1); box-shadow: 0 8px 30px var(--f1-glow); }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Sport op TV</h1>
            <span class="version-badge">v1.2.7</span>
            <button class="theme-toggle" id="theme-toggle" title="Toggle dark mode">
                <i data-lucide="sun" class="sun-icon"></i>
                <i data-lucide="moon" class="moon-icon"></i>
            </button>
        </header>

        <!-- Sport Tabs -->
        <div class="sport-tabs">
            <button class="sport-tab active" data-sport="voetbal">
                <i data-lucide="circle-dot"></i>
                Voetbal
            </button>
            <button class="sport-tab" data-sport="darts">
                <i data-lucide="target"></i>
                Darts
            </button>
            <button class="sport-tab" data-sport="f1">
                <i data-lucide="flag"></i>
                Formule 1
            </button>
        </div>

        <!-- Filters Panel -->
        <div class="filters-row" id="filters-row">
            <div class="dropdown" id="comp-dropdown">
                <button class="dropdown-btn" id="comp-btn">Competities ▾</button>
                <div class="dropdown-content" id="comp-content">
                    <label><input type="checkbox" value="Eredivisie"> Eredivisie</label>
                    <label><input type="checkbox" value="Premier League"> Premier League</label>
                    <label><input type="checkbox" value="Bundesliga"> Bundesliga</label>
                    <label><input type="checkbox" value="La Liga"> La Liga</label>
                    <label><input type="checkbox" value="Serie A"> Serie A</label>
                    <label><input type="checkbox" value="Ligue 1"> Ligue 1</label>
                    <hr>
                    <label><input type="checkbox" value="Champions League"> Champions League</label>
                    <label><input type="checkbox" value="Europa League"> Europa League</label>
                    <label><input type="checkbox" value="Conference League"> Conference League</label>
                    <hr>
                    <label><input type="checkbox" value="FA Cup"> FA Cup</label>
                    <label><input type="checkbox" value="League Cup"> League Cup</label>
                    <label><input type="checkbox" value="Coppa Italia"> Coppa Italia</label>
                    <label><input type="checkbox" value="DFB Pokal"> DFB Pokal</label>
                    <label><input type="checkbox" value="Copa del Rey"> Copa del Rey</label>
                    <label><input type="checkbox" value="KNVB Beker"> KNVB Beker</label>
                    <hr>
                    <label><input type="checkbox" value="WK"> WK</label>
                    <label><input type="checkbox" value="EK"> EK</label>
                    <label><input type="checkbox" value="Nations League"> Nations League</label>
                    <label><input type="checkbox" value="WK Kwalificatie"> WK Kwalificatie</label>
                    <label><input type="checkbox" value="EK Kwalificatie"> EK Kwalificatie</label>
                    <hr>
                    <label><input type="checkbox" value="WK Vrouwen"> WK Vrouwen</label>
                    <label><input type="checkbox" value="EK Vrouwen"> EK Vrouwen</label>
                </div>
            </div>
            <input type="text" class="filter-input" id="filter-clubs" placeholder="Clubs...">
            <button class="reset-btn" id="reset-filters" title="Reset">↻</button>
            <div class="toggle-group">
                <label class="mini-toggle" title="Toon afgelopen 3 dagen">
                    <input type="checkbox" id="toggle-past">
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Verleden</span>
                </label>
                <label class="mini-toggle" id="scores-toggle-wrapper" title="Toon uitslagen">
                    <input type="checkbox" id="toggle-scores">
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Uitslagen</span>
                </label>
            </div>
        </div>

        <!-- View Toggle -->
        <div class="view-toggle" id="view-toggle">
            <button class="view-btn active" data-view="programma">Programma</button>
            <button class="view-btn" data-view="standen">Standen</button>
        </div>

        <!-- Events Container -->
        <div class="events-container" id="events-container">
            <!-- Events will be rendered here -->
        </div>

        <!-- Standings Container -->
        <div class="standings-wrapper" id="standings-wrapper" style="display:none;">
            <div class="standings-tabs" id="standings-tabs"></div>
            <div id="standings-content"></div>
        </div>

        <footer>
            <p style="font-weight: 600;">Sport op TV</p>
            <div class="api-status" id="api-status">
                <span class="live-dot"></span> <span class="status-text">Laden...</span>
            </div>
        </footer>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Dark mode toggle
        const themeToggle = document.getElementById('theme-toggle');
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            lucide.createIcons();
        });

        // ============================================
        // CONFIGURATION
        // ============================================
        const CONFIG = {
            // API-Football key (gratis 100 requests/dag op api-football.com)
            API_FOOTBALL_KEY: '6299b9b25468371fa7878f188ca297c0',
            API_FOOTBALL_URL: 'https://v3.football.api-sports.io',
            // CORS proxy voor GitHub Pages (browser CORS bypass)
            CORS_PROXY: 'https://corsproxy.io/?',

            // API-Football league IDs voor relevante competities
            API_FOOTBALL_LEAGUES: [
                // Leagues
                { id: 88, name: 'Eredivisie', channel: 'ESPN' },
                { id: 39, name: 'Premier League', channel: 'Viaplay' },
                { id: 78, name: 'Bundesliga', channel: 'Viaplay' },
                { id: 140, name: 'La Liga', channel: 'Ziggo Sport' },
                { id: 135, name: 'Serie A', channel: 'Ziggo Sport' },
                { id: 61, name: 'Ligue 1', channel: 'Ziggo Sport' },
                // Cups
                { id: 45, name: 'FA Cup', channel: 'Viaplay' },
                { id: 48, name: 'League Cup', channel: 'Viaplay' },
                { id: 137, name: 'Coppa Italia', channel: 'Ziggo Sport' },
                { id: 81, name: 'DFB Pokal', channel: 'Viaplay' },
                { id: 143, name: 'Copa del Rey', channel: 'Ziggo Sport' },
                { id: 66, name: 'Coupe de France', channel: 'Ziggo Sport' },
                { id: 102, name: 'KNVB Beker', channel: 'ESPN' },
                // European clubs
                { id: 2, name: 'Champions League', channel: 'Ziggo Sport' },
                { id: 3, name: 'Europa League', channel: 'Ziggo Sport' },
                { id: 848, name: 'Conference League', channel: 'Ziggo Sport' },
                // Internationaal
                { id: 1, name: 'WK', channel: 'NPO/NOS' },
                { id: 4, name: 'EK', channel: 'NPO/NOS' },
                { id: 5, name: 'Nations League', channel: 'NPO/NOS' },
                { id: 32, name: 'WK Kwalificatie', channel: 'Ziggo Sport' },
                { id: 960, name: 'EK Kwalificatie', channel: 'Ziggo Sport' },
                // Vrouwen internationaal
                { id: 23, name: 'WK Vrouwen', channel: 'NPO/NOS' },
                { id: 62, name: 'EK Vrouwen', channel: 'NPO/NOS' }
            ],

            // OpenF1 API (gratis, geen key nodig)
            F1_API_URL: 'https://api.openf1.org/v1',

            // TheSportsDB API (gratis, geen key nodig - key 3 is free tier)
            THESPORTSDB_URL: 'https://www.thesportsdb.com/api/v1/json/3',
            DARTS_LEAGUE_ID: '4554', // PDC Darts

            // Competities voor OpenFootball
            LEAGUES: [
                { file: 'nl.1.json', name: 'Eredivisie', channel: 'ESPN' },
                { file: 'en.1.json', name: 'Premier League', channel: 'Viaplay' },
                { file: 'de.1.json', name: 'Bundesliga', channel: 'Viaplay' },
                { file: 'es.1.json', name: 'La Liga', channel: 'Ziggo Sport' },
                { file: 'it.1.json', name: 'Serie A', channel: 'Ziggo Sport' },
                { file: 'fr.1.json', name: 'Ligue 1', channel: 'Ziggo Sport' }
            ],

            // Nederlandse TV zenders mapping
            TV_CHANNELS: {
                'Eredivisie': 'ESPN',
                'Premier League': 'Viaplay',
                'Primera Division': 'Ziggo Sport',
                'La Liga': 'Ziggo Sport',
                'Bundesliga': 'Viaplay',
                'Serie A': 'Ziggo Sport',
                'Ligue 1': 'Ziggo Sport',
                'FA Cup': 'Viaplay',
                'League Cup': 'Viaplay',
                'Coppa Italia': 'Ziggo Sport',
                'DFB Pokal': 'Viaplay',
                'Copa del Rey': 'Ziggo Sport',
                'Coupe de France': 'Ziggo Sport',
                'KNVB Beker': 'ESPN',
                'Champions League': 'Ziggo Sport',
                'Europa League': 'Ziggo Sport',
                'Conference League': 'Ziggo Sport',
                'Formula 1': 'Viaplay',
                'Darts': 'Viaplay / RTL7'
            },

            // TV kanaal logo's - lokale bestanden in /logos/ map
            CHANNEL_LOGOS: {
                'ESPN': 'logos/256px-ESPN_wordmark.svg.png',
                'ESPN 1': 'logos/256px-ESPN_wordmark.svg.png',
                'ESPN 2': 'logos/256px-ESPN2_logo.svg.png',
                'ESPN 3': 'logos/256px-ESPN3_logo.svg.png',
                'ESPN 4': 'logos/256px-ESPN_4_logo.svg.png',
                'ESPN 5': 'logos/256px-ESPN_5_logo.svg.png',
                'Ziggo Sport': 'logos/ziggo.svg',
                'Viaplay': 'logos/Viaplay_TV_logo.svg.png',
                'RTL7': 'logos/RTL_7_nl_Logo.svg.png',
                'RTL 7': 'logos/RTL_7_nl_Logo.svg.png',
                'Veronica': 'logos/Veronica_TV_logo_2024.svg.png',
                'SBS6': 'logos/SBS6_Logo.svg.png',
                'SBS 6': 'logos/SBS6_Logo.svg.png'
            },

            // Competitie logo's
            COMPETITION_LOGOS: {
                'Eredivisie': 'logos/netherlands_eredivisie.football-logos.cc.svg',
                'Premier League': 'logos/england_english-premier-league.football-logos.cc.svg',
                'Bundesliga': 'logos/germany_bundesliga.football-logos.cc.svg',
                'La Liga': 'logos/spain_la-liga.football-logos.cc.svg',
                'Serie A': 'logos/italy_serie-a.football-logos.cc.svg',
                'WK 2026': 'logos/tournaments_fifa-world-cup-2026.football-logos.cc.svg',
                'FA Cup': 'logos/england_emirates-fa-cup.football-logos.cc.svg',
                'EFL Cup': 'logos/england_efl-cup.football-logos.cc.svg',
                'KNVB Beker': 'logos/netherlands_knvb-cup.football-logos.cc.svg'
            },

            // Club logo's - lokale bestanden in /logos/ map
            CLUB_LOGOS: {
                // Eredivisie
                'Ajax': 'logos/ajax.svg',
                'PSV': 'logos/netherlands_psv.football-logos.cc.svg',
                'Feyenoord': 'logos/netherlands_feyenoord.football-logos.cc.svg',
                'AZ': 'logos/netherlands_az-alkmaar.football-logos.cc.svg',
                'FC Twente': 'logos/netherlands_twente.football-logos.cc.svg',
                'FC Utrecht': 'logos/netherlands_fc-utrecht.football-logos.cc.svg',
                'sc Heerenveen': 'logos/netherlands_sc-heerenveen.football-logos.cc.svg',
                'Go Ahead Eagles': 'logos/netherlands_go-ahead-eagles.football-logos.cc.svg',
                'Fortuna Sittard': 'logos/netherlands_fortuna-sittard.football-logos.cc.svg',
                'FC Groningen': 'logos/netherlands_fc-groningen.football-logos.cc.svg',
                'Almere City': 'logos/netherlands_almere-city-fc.football-logos.cc.svg',
                'Excelsior': 'logos/netherlands_excelsior-rotterdam.football-logos.cc.svg',
                'RKC Waalwijk': 'logos/netherlands_rkc-waalwijk.football-logos.cc.svg',
                'ADO Den Haag': 'logos/netherlands_ado-den-haag.football-logos.cc.svg',
                'FC Emmen': 'logos/netherlands_fc-emmen.football-logos.cc.svg',
                'Telstar': 'logos/netherlands_telstar.football-logos.cc.svg',
                'Vitesse': 'logos/netherlands_vitesse.football-logos.cc.svg',
                'NEC': 'logos/netherlands_nec-nijmegen.football-logos.cc.svg',
                'Heracles': 'logos/netherlands_heracles-almelo.football-logos.cc.svg',
                'NAC Breda': 'logos/netherlands_nac-breda.football-logos.cc.svg',
                'PEC Zwolle': 'logos/netherlands_pec-zwolle.football-logos.cc.svg',
                'Willem II': 'logos/netherlands_willem-ii.football-logos.cc.svg',
                'FC Volendam': 'logos/netherlands_volendam.football-logos.cc.svg',
                'SC Cambuur': 'logos/netherlands_sc-cambuur.football-logos.cc.svg',
                'Roda JC': 'logos/netherlands_roda-jc-kerkrade.football-logos.cc.svg',
                'VVV-Venlo': 'logos/netherlands_vvv-venlo.football-logos.cc.svg',
                'De Graafschap': 'logos/netherlands_de-graafschap.football-logos.cc.svg',
                'MVV': 'logos/netherlands_mvv-maastricht.football-logos.cc.svg',
                'FC Dordrecht': 'logos/netherlands_fc-dordrecht.football-logos.cc.svg',
                'FC Eindhoven': 'logos/netherlands_fc-eindhoven.football-logos.cc.svg',
                'FC Den Bosch': 'logos/netherlands_fc-den-bosch.football-logos.cc.svg',
                'Helmond Sport': 'logos/netherlands_helmond-sport.football-logos.cc.svg',
                'TOP Oss': 'logos/netherlands_top-oss.football-logos.cc.svg',
                'Nederland': 'logos/netherlands_dutch-national-team.football-logos.cc.svg',
                // Premier League
                'Arsenal': 'logos/england_arsenal.football-logos.cc.svg',
                'Liverpool': 'logos/england_liverpool.football-logos.cc.svg',
                'Manchester City': 'logos/england_manchester-city.football-logos.cc.svg',
                'Chelsea': 'logos/england_chelsea.football-logos.cc.svg',
                'Manchester United': 'logos/man-utd.svg',
                'Tottenham': 'logos/tottenham.svg',
                'Newcastle': 'logos/england_newcastle.football-logos.cc.svg',
                'Brighton': 'logos/brighton.svg',
                'West Ham': 'logos/england_west-ham.football-logos.cc.svg',
                'Nottingham Forest': 'logos/nottingham.svg',
                'Wolverhampton': 'logos/wolves.svg',
                'Fulham': 'logos/fulham.svg',
                'Crystal Palace': 'logos/crystal-palace.svg',
                'Brentford': 'logos/brentford.svg',
                'Everton': 'logos/england_everton.football-logos.cc.svg',
                'Aston Villa': 'logos/england_aston-villa.football-logos.cc.svg',
                'Bournemouth': 'logos/bournemouth.svg',
                'Ipswich': 'logos/ipswich.svg',
                'Leicester': 'logos/leicester.svg',
                'Southampton': 'logos/southampton.svg',
                // La Liga
                'Real Madrid': 'logos/real-madrid.svg',
                'Barcelona': 'logos/barcelona.svg',
                'Sevilla': 'logos/sevilla.svg',
                // Bundesliga
                'Bayern München': 'logos/bayern.svg',
                'Borussia Dortmund': 'logos/dortmund.svg',
                'Bayer Leverkusen': 'logos/leverkusen.svg',
                'RB Leipzig': 'logos/leipzig.svg',
                // Serie A
                'Inter': 'logos/inter.svg',
                'AC Milan': 'logos/ac-milan.svg',
                // Ligue 1
                'Paris Saint-Germain': 'logos/psg.svg',
                'Marseille': 'logos/marseille.svg'
            },

            // F1 team logo's - geen beschikbaar
            F1_LOGOS: {}
        };

        // ============================================
        // STATE
        // ============================================
        let currentSport = 'voetbal';
        let currentView = 'programma'; // 'programma' or 'standen'
        let showScores = false;
        let showPast = false;
        // Load filters from localStorage (with error handling)
        let filters = { competitions: [], clubs: [] };
        try {
            const savedComps = localStorage.getItem('selectedCompetitions');
            const savedClubs = localStorage.getItem('selectedClubs');
            if (savedComps) filters.competitions = JSON.parse(savedComps) || [];
            if (savedClubs) filters.clubs = JSON.parse(savedClubs) || [];
            // Ensure arrays
            if (!Array.isArray(filters.competitions)) filters.competitions = [];
            if (!Array.isArray(filters.clubs)) filters.clubs = [];
        } catch (e) {
            console.warn('Could not load filters from localStorage:', e);
            localStorage.removeItem('selectedCompetitions');
            localStorage.removeItem('selectedClubs');
        }
        let cachedData = {
            voetbal: null,
            darts: null,
            f1: null
        };

        // ============================================
        // DARTS DATA 2026 - Premier League Darts & Major Events
        // ============================================
        // Spelers
        const dartsPlayers = {
            'Littler': {name: 'Luke Littler'},
            'Humphries': {name: 'Luke Humphries'},
            'Van Gerwen': {name: 'Michael van Gerwen'},
            'Rock': {name: 'Josh Rock'},
            'Clayton': {name: 'Jonny Clayton'},
            'Bunting': {name: 'Stephen Bunting'},
            'Price': {name: 'Gerwyn Price'},
            'Van Veen': {name: 'Gian van Veen'}
        };

        const dartsCalendar = [
            // Premier League Darts 2026 - Echte schema's met tijden
            { date: '2026-02-05', time: '20:00', event: 'Premier League Darts - Avond 1', location: 'Belfast', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Humphries', away: 'Van Veen'},
                {time: '20:40', home: 'Van Gerwen', away: 'Clayton'},
                {time: '21:10', home: 'Bunting', away: 'Rock'},
                {time: '21:40', home: 'Littler', away: 'Price'}
            ]},
            { date: '2026-02-12', time: '20:00', event: 'Premier League Darts - Avond 2', location: 'Cardiff', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Littler', away: 'Humphries'},
                {time: '20:40', home: 'Van Gerwen', away: 'Rock'},
                {time: '21:10', home: 'Clayton', away: 'Bunting'},
                {time: '21:40', home: 'Price', away: 'Van Veen'}
            ]},
            { date: '2026-02-19', time: '20:00', event: 'Premier League Darts - Avond 3', location: 'Liverpool', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Bunting', away: 'Van Veen'},
                {time: '20:40', home: 'Humphries', away: 'Rock'},
                {time: '21:10', home: 'Van Gerwen', away: 'Littler'},
                {time: '21:40', home: 'Clayton', away: 'Price'}
            ]},
            { date: '2026-02-26', time: '20:00', event: 'Premier League Darts - Avond 4', location: 'Manchester', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Littler', away: 'Clayton'},
                {time: '20:40', home: 'Bunting', away: 'Humphries'},
                {time: '21:10', home: 'Van Gerwen', away: 'Price'},
                {time: '21:40', home: 'Van Veen', away: 'Rock'}
            ]},
            { date: '2026-03-05', time: '20:00', event: 'Premier League Darts - Avond 5', location: 'Exeter', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Van Gerwen', away: 'Humphries'},
                {time: '20:40', home: 'Van Veen', away: 'Clayton'},
                {time: '21:10', home: 'Price', away: 'Bunting'},
                {time: '21:40', home: 'Littler', away: 'Rock'}
            ]},
            { date: '2026-03-12', time: '20:00', event: 'Premier League Darts - Avond 6', location: 'Rotterdam Ahoy', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Rock', away: 'Bunting'},
                {time: '20:40', home: 'Clayton', away: 'Van Gerwen'},
                {time: '21:10', home: 'Humphries', away: 'Van Veen'},
                {time: '21:40', home: 'Price', away: 'Littler'}
            ]},
            { date: '2026-03-19', time: '20:00', event: 'Premier League Darts - Avond 7', location: 'Newcastle', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Van Veen', away: 'Van Gerwen'},
                {time: '20:40', home: 'Bunting', away: 'Littler'},
                {time: '21:10', home: 'Rock', away: 'Price'},
                {time: '21:40', home: 'Clayton', away: 'Humphries'}
            ]},
            { date: '2026-03-26', time: '20:00', event: 'Premier League Darts - Avond 8', location: 'Sheffield', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'TBD', away: 'TBD'},
                {time: '20:40', home: 'TBD', away: 'TBD'},
                {time: '21:10', home: 'TBD', away: 'TBD'},
                {time: '21:40', home: 'TBD', away: 'TBD'}
            ]},
            { date: '2026-04-02', time: '20:00', event: 'Premier League Darts - Avond 9', location: 'Aberdeen', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Van Gerwen', away: 'Bunting'},
                {time: '20:40', home: 'Price', away: 'Humphries'},
                {time: '21:10', home: 'Van Veen', away: 'Littler'},
                {time: '21:40', home: 'Clayton', away: 'Rock'}
            ]},
            { date: '2026-04-09', time: '20:00', event: 'Premier League Darts - Avond 10', location: 'Dublin', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Humphries', away: 'Clayton'},
                {time: '20:40', home: 'Price', away: 'Rock'},
                {time: '21:10', home: 'Littler', away: 'Bunting'},
                {time: '21:40', home: 'Van Gerwen', away: 'Van Veen'}
            ]},
            { date: '2026-04-23', time: '20:00', event: 'Premier League Darts - Avond 11', location: 'Birmingham', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Van Veen', away: 'Price'},
                {time: '20:40', home: 'Bunting', away: 'Clayton'},
                {time: '21:10', home: 'Rock', away: 'Van Gerwen'},
                {time: '21:40', home: 'Humphries', away: 'Littler'}
            ]},
            { date: '2026-04-30', time: '20:00', event: 'Premier League Darts - Avond 13', location: 'Brighton', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Rock', away: 'Littler'},
                {time: '20:40', home: 'Bunting', away: 'Price'},
                {time: '21:10', home: 'Clayton', away: 'Van Veen'},
                {time: '21:40', home: 'Humphries', away: 'Van Gerwen'}
            ]},
            { date: '2026-05-07', time: '20:00', event: 'Premier League Darts - Avond 14', location: 'Glasgow', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Price', away: 'Clayton'},
                {time: '20:40', home: 'Littler', away: 'Van Gerwen'},
                {time: '21:10', home: 'Rock', away: 'Humphries'},
                {time: '21:40', home: 'Van Veen', away: 'Bunting'}
            ]},
            { date: '2026-05-14', time: '20:00', event: 'Premier League Darts - Avond 15', location: 'Nottingham', channel: 'Viaplay', matches: [
                {time: '20:10', home: 'Rock', away: 'Van Veen'},
                {time: '20:40', home: 'Price', away: 'Van Gerwen'},
                {time: '21:10', home: 'Humphries', away: 'Bunting'},
                {time: '21:40', home: 'Clayton', away: 'Littler'}
            ]},
            { date: '2026-05-21', time: '19:00', event: 'Premier League Darts - Play-Offs', location: 'London O2', channel: 'Viaplay', matches: [
                {time: '19:30', home: 'Halve Finale 1', away: ''},
                {time: '21:00', home: 'Halve Finale 2', away: ''},
                {time: '22:00', home: 'Finale', away: ''}
            ]},
            // UK Open 2026
            { date: '2026-02-27', time: '13:00', event: 'UK Open', location: 'Minehead', channel: 'Viaplay' },
            { date: '2026-02-28', time: '13:00', event: 'UK Open', location: 'Minehead', channel: 'Viaplay' },
            { date: '2026-03-01', time: '13:00', event: 'UK Open - Finale', location: 'Minehead', channel: 'Viaplay' },
            // World Matchplay 2026
            { date: '2026-07-18', time: '13:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-19', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-25', time: '19:00', event: 'World Matchplay', location: 'Blackpool', channel: 'Viaplay' },
            { date: '2026-07-26', time: '19:00', event: 'World Matchplay - Finale', location: 'Blackpool', channel: 'Viaplay' },
            // World Grand Prix 2026
            { date: '2026-10-04', time: '19:00', event: 'World Grand Prix', location: 'Leicester', channel: 'Viaplay' },
            { date: '2026-10-10', time: '19:00', event: 'World Grand Prix - Finale', location: 'Leicester', channel: 'Viaplay' },
            // Grand Slam of Darts 2026
            { date: '2026-11-07', time: '13:00', event: 'Grand Slam of Darts', location: 'Wolverhampton', channel: 'Viaplay' },
            { date: '2026-11-15', time: '19:00', event: 'Grand Slam of Darts - Finale', location: 'Wolverhampton', channel: 'Viaplay' },
            // Players Championship Finals 2026
            { date: '2026-11-27', time: '13:00', event: 'Players Championship Finals', location: 'Minehead', channel: 'Viaplay' },
            { date: '2026-11-29', time: '19:00', event: 'Players Championship Finals - Finale', location: 'Minehead', channel: 'Viaplay' },
            // World Championship 2026/2027
            { date: '2026-12-15', time: '19:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-22', time: '19:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
            { date: '2026-12-29', time: '19:00', event: 'World Championship', location: 'Alexandra Palace', channel: 'Viaplay' },
        ];

        // ============================================
        // API FUNCTIONS
        // ============================================

        // Fetch F1 sessions from OpenF1 API
        async function fetchF1Sessions() {
            try {
                const response = await fetch(`${CONFIG.F1_API_URL}/sessions?year=2026`);
                if (!response.ok) throw new Error('F1 API error');
                const sessions = await response.json();

                return sessions.map(session => ({
                    date: new Date(session.date_start),
                    time: new Date(session.date_start).toLocaleTimeString('nl-NL', { hour: '2-digit', minute: '2-digit' }),
                    title: session.session_name,
                    competition: `GP ${session.country_name}`,
                    circuit: session.circuit_short_name,
                    channel: 'Viaplay',
                    type: session.session_type,
                    live: isLiveNow(session.date_start, session.date_end),
                    score: null
                }));
            } catch (error) {
                console.error('F1 API Error:', error);
                return [];
            }
        }

        // Static football data (iservoetbalvanavond.nl fallback)
        function getStaticFootballMatches() {
            const matches = [
                // VERLEDEN - met echte uitslagen (feb 2026)
                // 2 feb 2026
                { date: '2026-02-02', time: '18:45', home: 'Ajax', away: 'PSV', score: '1-2', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-02', time: '21:00', home: 'Feyenoord', away: 'AZ', score: '3-1', competition: 'Eredivisie', channel: 'ESPN' },
                // 3 feb 2026
                { date: '2026-02-03', time: '20:00', home: 'Manchester City', away: 'Liverpool', score: '2-2', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-03', time: '20:45', home: 'Real Madrid', away: 'Atlético Madrid', score: '2-1', competition: 'La Liga', channel: 'Ziggo Sport' },
                // 5 feb 2026
                { date: '2026-02-05', time: '20:00', home: 'Bayern München', away: 'Dortmund', score: '3-1', competition: 'Bundesliga', channel: 'Viaplay' },
                { date: '2026-02-05', time: '21:00', home: 'Barcelona', away: 'Real Sociedad', score: '2-0', competition: 'La Liga', channel: 'Ziggo Sport' },
                // 7 feb 2026
                { date: '2026-02-07', time: '20:00', home: 'FC Twente', away: 'Feyenoord', score: '1-1', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-07', time: '21:00', home: 'Inter', away: 'Juventus', score: '2-0', competition: 'Serie A', channel: 'Ziggo Sport' },
                // 8 feb 2026
                { date: '2026-02-08', time: '13:30', home: 'Arsenal', away: 'Chelsea', score: '2-1', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-08', time: '16:00', home: 'PSV', away: 'NEC', score: '3-0', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-08', time: '18:30', home: 'Napoli', away: 'AC Milan', score: '2-2', competition: 'Serie A', channel: 'Ziggo Sport' },
                { date: '2026-02-08', time: '21:00', home: 'Aston Villa', away: 'Manchester United', score: '1-1', competition: 'Premier League', channel: 'Viaplay' },
                // 10 feb 2026
                { date: '2026-02-10', time: '19:30', home: 'Tottenham', away: 'Newcastle', score: '1-2', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-10', time: '19:30', home: 'Chelsea', away: 'Leeds United', score: '2-2', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-10', time: '19:30', home: 'Everton', away: 'Bournemouth', score: '1-2', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-10', time: '20:15', home: 'West Ham', away: 'Manchester United', score: '1-1', competition: 'Premier League', channel: 'Viaplay' },
                // TOEKOMST
                // 11 feb 2026
                { date: '2026-02-11', time: '17:45', home: 'Go Ahead Eagles', away: 'sc Heerenveen', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-11', time: '19:30', home: 'Nottingham Forest', away: 'Wolverhampton', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-11', time: '19:30', home: 'Aston Villa', away: 'Brighton', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-11', time: '19:30', home: 'Crystal Palace', away: 'Burnley', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-11', time: '19:30', home: 'Manchester City', away: 'Fulham', competition: 'Premier League', channel: 'Viaplay' },
                { date: '2026-02-11', time: '19:45', home: 'Bayern München', away: 'RB Leipzig', competition: 'DFB Pokal', channel: 'Ziggo Sport' },
                { date: '2026-02-11', time: '20:00', home: 'NEC', away: 'FC Utrecht', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-11', time: '20:00', home: 'Athletic Bilbao', away: 'Real Sociedad', competition: 'Copa del Rey', channel: 'Ziggo Sport' },
                { date: '2026-02-11', time: '20:15', home: 'Sunderland', away: 'Liverpool', competition: 'Premier League', channel: 'Viaplay' },
                // 12 feb 2026
                { date: '2026-02-12', time: '20:00', home: 'Atlético Madrid', away: 'Barcelona', competition: 'Copa del Rey', channel: 'Ziggo Sport' },
                // 13 feb 2026
                { date: '2026-02-13', time: '20:00', home: 'FC Volendam', away: 'PSV', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-13', time: '21:00', home: 'Ajax', away: 'Fortuna Sittard', competition: 'Eredivisie', channel: 'ESPN' },
                // 14 feb 2026
                { date: '2026-02-14', time: '18:45', home: 'Sparta Rotterdam', away: 'AZ', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-14', time: '21:00', home: 'Feyenoord', away: 'Go Ahead Eagles', competition: 'Eredivisie', channel: 'ESPN' },
                // 15 feb 2026
                { date: '2026-02-15', time: '12:30', home: 'FC Twente', away: 'NEC', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-15', time: '14:30', home: 'sc Heerenveen', away: 'FC Utrecht', competition: 'Eredivisie', channel: 'ESPN' },
                { date: '2026-02-15', time: '16:45', home: 'Heracles', away: 'Ajax', competition: 'Eredivisie', channel: 'ESPN' },

                // ============================================
                // WK 2026 - Nederland wedstrijden
                // ============================================
                { date: '2026-06-14', time: '21:00', home: 'Nederland', away: 'Japan', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-20', time: '18:00', home: 'Nederland', away: 'UEFA PO B', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-25', time: '21:00', home: 'Tunesië', away: 'Nederland', competition: 'WK', channel: 'NPO 1' },

                // WK 2026 - Opening & andere groepswedstrijden
                { date: '2026-06-11', time: '21:00', home: 'Mexico', away: 'Zuid-Afrika', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-12', time: '18:00', home: 'Canada', away: 'Zwitserland', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-12', time: '21:00', home: 'Verenigde Staten', away: 'Paraguay', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-13', time: '18:00', home: 'Brazilië', away: 'Marokko', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-13', time: '21:00', home: 'Argentinië', away: 'Algerije', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-14', time: '18:00', home: 'Engeland', away: 'Kroatië', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-15', time: '18:00', home: 'Duitsland', away: 'Curaçao', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-15', time: '21:00', home: 'België', away: 'Egypte', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-16', time: '21:00', home: 'Frankrijk', away: 'Senegal', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-17', time: '21:00', home: 'Spanje', away: 'Kaapverdië', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-18', time: '21:00', home: 'Portugal', away: 'Oezbekistan', competition: 'WK', channel: 'NPO 1' },

                // WK 2026 - Knockout rondes
                { date: '2026-06-28', time: '18:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-06-28', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-04', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-09', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-14', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-18', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
                { date: '2026-07-19', time: '21:00', home: 'TBD', away: 'TBD', competition: 'WK', channel: 'NPO 1' },
            ];

            return matches.map(m => ({
                date: new Date(m.date + 'T' + m.time),
                time: m.time,
                home: m.home,
                away: m.away,
                competition: m.competition,
                channel: m.channel,
                score: m.score || null,
                live: false,
                status: m.score ? 'FINISHED' : 'SCHEDULED',
                isStatic: true
            }));
        }

        // Fetch football matches - try API-Football first, fall back to cache
        async function fetchFootballMatches() {
            console.log('Fetching football matches...');

            // Check localStorage cache first (valid for 6 hours)
            const cached = localStorage.getItem('footballCache');
            const cacheTime = localStorage.getItem('footballCacheTime');
            const cacheValid = cached && cacheTime && (Date.now() - parseInt(cacheTime)) < 6 * 60 * 60 * 1000;

            if (cacheValid) {
                console.log('Using cached football data (cache valid for 6 hours)');
                const data = JSON.parse(cached);
                return data.map(m => ({ ...m, date: new Date(m.date) }));
            }

            // Try API-Football
            const allMatches = [];
            const today = new Date();
            const season = today.getMonth() >= 7 ? today.getFullYear() : today.getFullYear() - 1;
            let apiErrors = 0;
            let rateLimited = false;

            for (const league of CONFIG.API_FOOTBALL_LEAGUES) {
                if (rateLimited) break;

                try {
                    const apiUrl = `${CONFIG.API_FOOTBALL_URL}/fixtures?league=${league.id}&season=${season}&from=${getDateStr(-7)}&to=${getDateStr(14)}`;
                    const response = await fetch(
                        `${CONFIG.CORS_PROXY}${encodeURIComponent(apiUrl)}`,
                        { headers: { 'x-apisports-key': CONFIG.API_FOOTBALL_KEY } }
                    );

                    if (!response.ok) {
                        apiErrors++;
                        continue;
                    }

                    const data = await response.json();

                    if (data.errors && data.errors.requests) {
                        console.warn('API rate limit reached');
                        rateLimited = true;
                        break;
                    }

                    if (data.response && data.response.length > 0) {
                        data.response.forEach(match => {
                            const matchDate = new Date(match.fixture.date);
                            allMatches.push({
                                date: matchDate,
                                time: matchDate.toLocaleTimeString('nl-NL', { hour: '2-digit', minute: '2-digit' }),
                                home: match.teams.home.name,
                                away: match.teams.away.name,
                                homeCrest: match.teams.home.logo,
                                awayCrest: match.teams.away.logo,
                                competition: league.name,
                                channel: league.channel,
                                score: match.goals.home !== null ? `${match.goals.home}-${match.goals.away}` : null,
                                live: ['1H', '2H', 'HT', 'ET', 'P'].includes(match.fixture.status.short),
                                status: match.fixture.status.short
                            });
                        });
                    }
                } catch (error) {
                    apiErrors++;
                }
            }

            // If we got fresh data, cache it
            if (allMatches.length > 0) {
                localStorage.setItem('footballCache', JSON.stringify(allMatches));
                localStorage.setItem('footballCacheTime', Date.now().toString());
                localStorage.setItem('footballSource', 'api');
                return allMatches;
            }

            // API failed - use old cache if available (regardless of age)
            if (cached) {
                console.log('API unavailable, using cached data');
                localStorage.setItem('footballSource', 'cache');
                const data = JSON.parse(cached);
                return data.map(m => ({ ...m, date: new Date(m.date) }));
            }

            // No cache - use static fallback data
            console.log('Using static fallback data');
            localStorage.setItem('footballSource', 'static');
            return getStaticFootballMatches();
        }

        // Helper function for date strings
        function getDateStr(daysFromNow) {
            const d = new Date();
            d.setDate(d.getDate() + daysFromNow);
            return d.toISOString().split('T')[0];
        }

        // Fetch football standings with caching
        async function fetchFootballStandings(leagueId) {
            // Check cache first (valid for 24 hours)
            const cacheKey = `standings_${leagueId}`;
            const cached = localStorage.getItem(cacheKey);
            const cacheTime = localStorage.getItem(cacheKey + '_time');

            if (cached && cacheTime && (Date.now() - parseInt(cacheTime)) < 24 * 60 * 60 * 1000) {
                console.log(`Using cached standings for league ${leagueId}`);
                return JSON.parse(cached);
            }

            // Try API
            const season = new Date().getMonth() >= 7 ? new Date().getFullYear() : new Date().getFullYear() - 1;
            try {
                const apiUrl = `${CONFIG.API_FOOTBALL_URL}/standings?league=${leagueId}&season=${season}`;
                const response = await fetch(
                    `${CONFIG.CORS_PROXY}${encodeURIComponent(apiUrl)}`,
                    { headers: { 'x-apisports-key': CONFIG.API_FOOTBALL_KEY } }
                );

                if (response.ok) {
                    const data = await response.json();

                    // Check for rate limit error in response
                    if (data.errors && Object.keys(data.errors).length > 0) {
                        console.warn('Standings API error:', data.errors);
                    } else if (data.response && data.response[0] && data.response[0].league.standings) {
                        const standings = data.response[0].league.standings[0];
                        // Cache the result
                        localStorage.setItem(cacheKey, JSON.stringify(standings));
                        localStorage.setItem(cacheKey + '_time', Date.now().toString());
                        console.log(`Standings for ${leagueId} fetched from API`);
                        return standings;
                    }
                }
            } catch (e) {
                console.error('Standings fetch error:', e);
            }

            // API failed - use cached data if available (even if old)
            if (cached) {
                console.log(`Using old cached standings for ${leagueId}`);
                return JSON.parse(cached);
            }

            // No cache - use static fallback
            console.log(`Using static standings for ${leagueId}`);
            return getStaticStandings(leagueId);
        }

        // Static standings fallback (February 2026 data)
        function getStaticStandings(leagueId) {
            const standings = {
                // Eredivisie (bijgewerkt 8 feb 2026)
                88: [
                    { rank: 1, team: { name: 'PSV', logo: '' }, all: { win: 18, draw: 2, lose: 1 }, goalsDiff: 39, points: 56 },
                    { rank: 2, team: { name: 'NEC', logo: '' }, all: { win: 12, draw: 5, lose: 4 }, goalsDiff: 21, points: 41 },
                    { rank: 3, team: { name: 'Feyenoord', logo: '' }, all: { win: 12, draw: 3, lose: 6 }, goalsDiff: 19, points: 39 },
                    { rank: 4, team: { name: 'Ajax', logo: '' }, all: { win: 10, draw: 8, lose: 3 }, goalsDiff: 13, points: 38 },
                    { rank: 5, team: { name: 'AZ', logo: '' }, all: { win: 10, draw: 3, lose: 8 }, goalsDiff: 8, points: 33 },
                    { rank: 6, team: { name: 'FC Twente', logo: '' }, all: { win: 9, draw: 5, lose: 7 }, goalsDiff: 5, points: 32 },
                    { rank: 7, team: { name: 'FC Utrecht', logo: '' }, all: { win: 9, draw: 4, lose: 8 }, goalsDiff: 3, points: 31 },
                    { rank: 8, team: { name: 'Sparta Rotterdam', logo: '' }, all: { win: 8, draw: 6, lose: 7 }, goalsDiff: 0, points: 30 },
                ],
                // Premier League (bijgewerkt 8 feb 2026)
                39: [
                    { rank: 1, team: { name: 'Arsenal', logo: '' }, all: { win: 17, draw: 5, lose: 3 }, goalsDiff: 32, points: 56 },
                    { rank: 2, team: { name: 'Manchester City', logo: '' }, all: { win: 14, draw: 5, lose: 5 }, goalsDiff: 26, points: 47 },
                    { rank: 3, team: { name: 'Aston Villa', logo: '' }, all: { win: 14, draw: 5, lose: 6 }, goalsDiff: 9, points: 47 },
                    { rank: 4, team: { name: 'Manchester United', logo: '' }, all: { win: 12, draw: 8, lose: 5 }, goalsDiff: 10, points: 44 },
                    { rank: 5, team: { name: 'Chelsea', logo: '' }, all: { win: 12, draw: 7, lose: 6 }, goalsDiff: 17, points: 43 },
                    { rank: 6, team: { name: 'Liverpool', logo: '' }, all: { win: 11, draw: 6, lose: 7 }, goalsDiff: 6, points: 39 },
                    { rank: 7, team: { name: 'Newcastle', logo: '' }, all: { win: 10, draw: 8, lose: 7 }, goalsDiff: 5, points: 38 },
                    { rank: 8, team: { name: 'Brighton', logo: '' }, all: { win: 10, draw: 6, lose: 9 }, goalsDiff: 3, points: 36 },
                ],
                // Bundesliga
                78: [
                    { rank: 1, team: { name: 'Bayern München', logo: '' }, all: { win: 14, draw: 4, lose: 2 }, goalsDiff: 32, points: 46 },
                    { rank: 2, team: { name: 'Bayer Leverkusen', logo: '' }, all: { win: 13, draw: 5, lose: 2 }, goalsDiff: 28, points: 44 },
                    { rank: 3, team: { name: 'Eintracht Frankfurt', logo: '' }, all: { win: 11, draw: 5, lose: 4 }, goalsDiff: 18, points: 38 },
                    { rank: 4, team: { name: 'RB Leipzig', logo: '' }, all: { win: 10, draw: 6, lose: 4 }, goalsDiff: 14, points: 36 },
                    { rank: 5, team: { name: 'Borussia Dortmund', logo: '' }, all: { win: 10, draw: 5, lose: 5 }, goalsDiff: 15, points: 35 },
                    { rank: 6, team: { name: 'Mainz 05', logo: '' }, all: { win: 9, draw: 6, lose: 5 }, goalsDiff: 6, points: 33 },
                    { rank: 7, team: { name: 'Freiburg', logo: '' }, all: { win: 9, draw: 5, lose: 6 }, goalsDiff: 4, points: 32 },
                    { rank: 8, team: { name: 'Werder Bremen', logo: '' }, all: { win: 8, draw: 5, lose: 7 }, goalsDiff: 0, points: 29 },
                ],
                // La Liga
                140: [
                    { rank: 1, team: { name: 'Barcelona', logo: '' }, all: { win: 16, draw: 4, lose: 2 }, goalsDiff: 35, points: 52 },
                    { rank: 2, team: { name: 'Real Madrid', logo: '' }, all: { win: 14, draw: 5, lose: 3 }, goalsDiff: 25, points: 47 },
                    { rank: 3, team: { name: 'Atlético Madrid', logo: '' }, all: { win: 13, draw: 5, lose: 4 }, goalsDiff: 18, points: 44 },
                    { rank: 4, team: { name: 'Athletic Bilbao', logo: '' }, all: { win: 11, draw: 7, lose: 4 }, goalsDiff: 14, points: 40 },
                    { rank: 5, team: { name: 'Villarreal', logo: '' }, all: { win: 10, draw: 7, lose: 5 }, goalsDiff: 10, points: 37 },
                    { rank: 6, team: { name: 'Real Betis', logo: '' }, all: { win: 9, draw: 8, lose: 5 }, goalsDiff: 6, points: 35 },
                    { rank: 7, team: { name: 'Real Sociedad', logo: '' }, all: { win: 8, draw: 9, lose: 5 }, goalsDiff: 4, points: 33 },
                    { rank: 8, team: { name: 'Mallorca', logo: '' }, all: { win: 8, draw: 7, lose: 7 }, goalsDiff: 0, points: 31 },
                ],
                // Serie A
                135: [
                    { rank: 1, team: { name: 'Napoli', logo: '' }, all: { win: 16, draw: 4, lose: 2 }, goalsDiff: 28, points: 52 },
                    { rank: 2, team: { name: 'Inter', logo: '' }, all: { win: 15, draw: 5, lose: 2 }, goalsDiff: 30, points: 50 },
                    { rank: 3, team: { name: 'Atalanta', logo: '' }, all: { win: 14, draw: 4, lose: 4 }, goalsDiff: 24, points: 46 },
                    { rank: 4, team: { name: 'Lazio', logo: '' }, all: { win: 13, draw: 4, lose: 5 }, goalsDiff: 16, points: 43 },
                    { rank: 5, team: { name: 'Juventus', logo: '' }, all: { win: 10, draw: 10, lose: 2 }, goalsDiff: 14, points: 40 },
                    { rank: 6, team: { name: 'Fiorentina', logo: '' }, all: { win: 10, draw: 6, lose: 6 }, goalsDiff: 8, points: 36 },
                    { rank: 7, team: { name: 'Bologna', logo: '' }, all: { win: 9, draw: 7, lose: 6 }, goalsDiff: 5, points: 34 },
                    { rank: 8, team: { name: 'AC Milan', logo: '' }, all: { win: 9, draw: 6, lose: 7 }, goalsDiff: 6, points: 33 },
                ],
                // Ligue 1
                61: [
                    { rank: 1, team: { name: 'PSG', logo: '' }, all: { win: 16, draw: 4, lose: 2 }, goalsDiff: 35, points: 52 },
                    { rank: 2, team: { name: 'Marseille', logo: '' }, all: { win: 13, draw: 5, lose: 4 }, goalsDiff: 18, points: 44 },
                    { rank: 3, team: { name: 'Monaco', logo: '' }, all: { win: 12, draw: 5, lose: 5 }, goalsDiff: 12, points: 41 },
                    { rank: 4, team: { name: 'Lille', logo: '' }, all: { win: 11, draw: 6, lose: 5 }, goalsDiff: 10, points: 39 },
                    { rank: 5, team: { name: 'Lyon', logo: '' }, all: { win: 10, draw: 7, lose: 5 }, goalsDiff: 8, points: 37 },
                    { rank: 6, team: { name: 'Nice', logo: '' }, all: { win: 9, draw: 8, lose: 5 }, goalsDiff: 5, points: 35 },
                    { rank: 7, team: { name: 'Lens', logo: '' }, all: { win: 9, draw: 6, lose: 7 }, goalsDiff: 3, points: 33 },
                    { rank: 8, team: { name: 'Strasbourg', logo: '' }, all: { win: 8, draw: 7, lose: 7 }, goalsDiff: 0, points: 31 },
                ],
                // Champions League - League Phase eindstand (top 8 direct naar R16)
                2: [
                    { rank: 1, team: { name: 'Arsenal', logo: '' }, all: { win: 6, draw: 2, lose: 0 }, goalsDiff: 14, points: 20 },
                    { rank: 2, team: { name: 'Bayern München', logo: '' }, all: { win: 6, draw: 1, lose: 1 }, goalsDiff: 12, points: 19 },
                    { rank: 3, team: { name: 'Liverpool', logo: '' }, all: { win: 6, draw: 1, lose: 1 }, goalsDiff: 11, points: 19 },
                    { rank: 4, team: { name: 'Tottenham', logo: '' }, all: { win: 5, draw: 2, lose: 1 }, goalsDiff: 8, points: 17 },
                    { rank: 5, team: { name: 'Barcelona', logo: '' }, all: { win: 5, draw: 2, lose: 1 }, goalsDiff: 10, points: 17 },
                    { rank: 6, team: { name: 'Chelsea', logo: '' }, all: { win: 5, draw: 1, lose: 2 }, goalsDiff: 7, points: 16 },
                    { rank: 7, team: { name: 'Sporting CP', logo: '' }, all: { win: 5, draw: 1, lose: 2 }, goalsDiff: 6, points: 16 },
                    { rank: 8, team: { name: 'Manchester City', logo: '' }, all: { win: 5, draw: 1, lose: 2 }, goalsDiff: 5, points: 16 },
                ]
            };
            return standings[leagueId] || [];
        }

        // Fetch F1 standings from Ergast API
        // F1 2026 static data (seizoen start 8 maart)
        const f1_2026_drivers = [
            { position: 1, Driver: { givenName: 'Lando', familyName: 'Norris' }, Constructors: [{ name: 'McLaren' }], points: 0 },
            { position: 2, Driver: { givenName: 'Oscar', familyName: 'Piastri' }, Constructors: [{ name: 'McLaren' }], points: 0 },
            { position: 3, Driver: { givenName: 'Max', familyName: 'Verstappen' }, Constructors: [{ name: 'Red Bull' }], points: 0 },
            { position: 4, Driver: { givenName: 'Yuki', familyName: 'Tsunoda' }, Constructors: [{ name: 'Red Bull' }], points: 0 },
            { position: 5, Driver: { givenName: 'Charles', familyName: 'Leclerc' }, Constructors: [{ name: 'Ferrari' }], points: 0 },
            { position: 6, Driver: { givenName: 'Lewis', familyName: 'Hamilton' }, Constructors: [{ name: 'Ferrari' }], points: 0 },
            { position: 7, Driver: { givenName: 'George', familyName: 'Russell' }, Constructors: [{ name: 'Mercedes' }], points: 0 },
            { position: 8, Driver: { givenName: 'Kimi', familyName: 'Antonelli' }, Constructors: [{ name: 'Mercedes' }], points: 0 },
            { position: 9, Driver: { givenName: 'Fernando', familyName: 'Alonso' }, Constructors: [{ name: 'Aston Martin' }], points: 0 },
            { position: 10, Driver: { givenName: 'Lance', familyName: 'Stroll' }, Constructors: [{ name: 'Aston Martin' }], points: 0 },
            { position: 11, Driver: { givenName: 'Pierre', familyName: 'Gasly' }, Constructors: [{ name: 'Alpine' }], points: 0 },
            { position: 12, Driver: { givenName: 'Jack', familyName: 'Doohan' }, Constructors: [{ name: 'Alpine' }], points: 0 },
            { position: 13, Driver: { givenName: 'Alex', familyName: 'Albon' }, Constructors: [{ name: 'Williams' }], points: 0 },
            { position: 14, Driver: { givenName: 'Carlos', familyName: 'Sainz' }, Constructors: [{ name: 'Williams' }], points: 0 },
            { position: 15, Driver: { givenName: 'Nico', familyName: 'Hülkenberg' }, Constructors: [{ name: 'Sauber' }], points: 0 },
            { position: 16, Driver: { givenName: 'Gabriel', familyName: 'Bortoleto' }, Constructors: [{ name: 'Sauber' }], points: 0 },
            { position: 17, Driver: { givenName: 'Liam', familyName: 'Lawson' }, Constructors: [{ name: 'RB' }], points: 0 },
            { position: 18, Driver: { givenName: 'Isack', familyName: 'Hadjar' }, Constructors: [{ name: 'RB' }], points: 0 },
            { position: 19, Driver: { givenName: 'Esteban', familyName: 'Ocon' }, Constructors: [{ name: 'Haas' }], points: 0 },
            { position: 20, Driver: { givenName: 'Oliver', familyName: 'Bearman' }, Constructors: [{ name: 'Haas' }], points: 0 },
        ];

        const f1_2026_constructors = [
            { position: 1, Constructor: { name: 'McLaren' }, points: 0 },
            { position: 2, Constructor: { name: 'Ferrari' }, points: 0 },
            { position: 3, Constructor: { name: 'Red Bull' }, points: 0 },
            { position: 4, Constructor: { name: 'Mercedes' }, points: 0 },
            { position: 5, Constructor: { name: 'Aston Martin' }, points: 0 },
            { position: 6, Constructor: { name: 'Alpine' }, points: 0 },
            { position: 7, Constructor: { name: 'Williams' }, points: 0 },
            { position: 8, Constructor: { name: 'RB' }, points: 0 },
            { position: 9, Constructor: { name: 'Haas' }, points: 0 },
            { position: 10, Constructor: { name: 'Sauber' }, points: 0 },
        ];

        async function fetchF1Standings() {
            try {
                const [driversRes, constructorsRes] = await Promise.all([
                    fetch('https://ergast.com/api/f1/current/driverStandings.json'),
                    fetch('https://ergast.com/api/f1/current/constructorStandings.json')
                ]);
                const driversData = await driversRes.json();
                const constructorsData = await constructorsRes.json();

                const drivers = driversData.MRData.StandingsTable.StandingsLists[0]?.DriverStandings || [];
                const constructors = constructorsData.MRData.StandingsTable.StandingsLists[0]?.ConstructorStandings || [];

                // Use API data if available, otherwise use static 2026 data
                return {
                    drivers: drivers.length > 0 ? drivers : f1_2026_drivers,
                    constructors: constructors.length > 0 ? constructors : f1_2026_constructors
                };
            } catch (e) {
                console.error('F1 standings error:', e);
                // Return static 2026 data on error
                return { drivers: f1_2026_drivers, constructors: f1_2026_constructors };
            }
        }

        // PL Darts standings - Na Night 1 Newcastle (5 feb 2026)
        // Punten: 5 = avondwinnaar, 3 = finalist, 2 = halve finale verliezer
        const plDartsStandings = [
            { pos: 1, name: 'Michael van Gerwen', played: 1, sf: 1, f: 1, w: 1, pts: 5 },
            { pos: 2, name: 'Gian van Veen', played: 1, sf: 1, f: 1, w: 0, pts: 3 },
            { pos: 3, name: 'Luke Humphries', played: 1, sf: 1, f: 0, w: 0, pts: 2 },
            { pos: 4, name: 'Jonny Clayton', played: 1, sf: 1, f: 0, w: 0, pts: 2 },
            { pos: 5, name: 'Luke Littler', played: 1, sf: 0, f: 0, w: 0, pts: 0 },
            { pos: 6, name: 'Stephen Bunting', played: 1, sf: 0, f: 0, w: 0, pts: 0 },
            { pos: 7, name: 'Josh Rock', played: 1, sf: 0, f: 0, w: 0, pts: 0 },
            { pos: 8, name: 'Gerwyn Price', played: 1, sf: 0, f: 0, w: 0, pts: 0 }
        ];

        // WK 2026 Groepen (11 juni - 19 juli 2026, USA/Mexico/Canada)
        const wk2026Groups = {
            'A': ['Mexico', 'Zuid-Afrika', 'Zuid-Korea', 'UEFA PO D'],
            'B': ['Canada', 'Zwitserland', 'Qatar', 'UEFA PO A'],
            'C': ['Brazilië', 'Marokko', 'Haïti', 'Schotland'],
            'D': ['Verenigde Staten', 'Paraguay', 'Australië', 'UEFA PO C'],
            'E': ['Duitsland', 'Curaçao', 'Ivoorkust', 'Ecuador'],
            'F': ['Nederland', 'Japan', 'Tunesië', 'UEFA PO B'],
            'G': ['België', 'Egypte', 'Iran', 'Nieuw-Zeeland'],
            'H': ['Spanje', 'Kaapverdië', 'Saudi-Arabië', 'Uruguay'],
            'I': ['Frankrijk', 'Senegal', 'Noorwegen', 'Intercont. PO 2'],
            'J': ['Argentinië', 'Algerije', 'Oostenrijk', 'Jordanië'],
            'K': ['Portugal', 'Oezbekistan', 'Colombia', 'Intercont. PO 1'],
            'L': ['Engeland', 'Kroatië', 'Ghana', 'Panama']
        };

        // WK 2026 Schema - Nederland wedstrijden + knockout rondes
        const wk2026Schedule = {
            nederland: [
                { date: '14 juni', time: '21:00', home: 'Nederland', away: 'Japan', city: 'Philadelphia', stage: 'Groep F' },
                { date: '20 juni', time: '18:00', home: 'Nederland', away: 'UEFA PO B', city: 'Philadelphia', stage: 'Groep F' },
                { date: '25 juni', time: '21:00', home: 'Tunesië', away: 'Nederland', city: 'Kansas City', stage: 'Groep F' }
            ],
            knockout: [
                { stage: 'Ronde van 32', dates: '28 juni - 3 juli' },
                { stage: 'Ronde van 16', dates: '4 - 7 juli' },
                { stage: 'Kwartfinales', dates: '9 & 11 juli' },
                { stage: 'Halve finales', dates: '14 & 15 juli' },
                { stage: 'Troostfinale', dates: '18 juli' },
                { stage: 'Finale', dates: '19 juli', city: 'New Jersey (MetLife Stadium)' }
            ],
            openingMatches: [
                { date: '11 juni', time: '21:00', home: 'Mexico', away: 'Zuid-Afrika', city: 'Mexico City', stage: 'Groep A - Opening' },
                { date: '12 juni', time: '18:00', home: 'Canada', away: 'Zwitserland', city: 'Toronto', stage: 'Groep B' },
                { date: '12 juni', time: '21:00', home: 'Verenigde Staten', away: 'Paraguay', city: 'Los Angeles', stage: 'Groep D' }
            ]
        };

        // Functie om WK groepen te renderen
        function renderWK2026Groups() {
            let html = '<div class="standings-container">';

            // Nederland schema
            html += '<div class="standings-title" style="color:var(--darts);">🇳🇱 Nederland - WK 2026 Schema</div>';
            html += '<table class="standings-table"><tr><th>Datum</th><th>Wedstrijd</th><th>Stad</th></tr>';
            wk2026Schedule.nederland.forEach(m => {
                html += `<tr class="highlight-row">
                    <td>${m.date}<br><small>${m.time}</small></td>
                    <td><strong>${m.home}</strong> - ${m.away}</td>
                    <td>${m.city}</td>
                </tr>`;
            });
            html += '</table>';

            // Knockout schema
            html += '<div class="standings-title" style="margin-top:20px;">Knockout Rondes</div>';
            html += '<table class="standings-table"><tr><th>Ronde</th><th>Data</th><th>Locatie</th></tr>';
            wk2026Schedule.knockout.forEach(k => {
                html += `<tr>
                    <td>${k.stage}</td>
                    <td>${k.dates}</td>
                    <td>${k.city || 'Diverse steden'}</td>
                </tr>`;
            });
            html += '</table>';

            // Opening wedstrijden
            html += '<div class="standings-title" style="margin-top:20px;">Opening Wedstrijden</div>';
            html += '<table class="standings-table"><tr><th>Datum</th><th>Wedstrijd</th><th>Stad</th></tr>';
            wk2026Schedule.openingMatches.forEach(m => {
                html += `<tr>
                    <td>${m.date}<br><small>${m.time}</small></td>
                    <td>${m.home} - ${m.away}<br><small>${m.stage}</small></td>
                    <td>${m.city}</td>
                </tr>`;
            });
            html += '</table>';

            // Alle groepen
            html += '<div class="standings-title" style="margin-top:20px;">Alle Groepen</div>';
            html += '<div class="wk-groups-grid">';

            for (const [group, teams] of Object.entries(wk2026Groups)) {
                const isNLGroup = group === 'F';
                html += `<div class="wk-group-card ${isNLGroup ? 'highlight' : ''}">`;
                html += `<div class="wk-group-title ${isNLGroup ? 'highlight' : ''}">Groep ${group}</div>`;
                teams.forEach((team, i) => {
                    const isNL = team === 'Nederland';
                    html += `<div class="wk-team ${isNL ? 'highlight' : ''}">${team}</div>`;
                });
                html += '</div>';
            }

            html += '</div></div>';
            return html;
        }

        // Fetch from OpenFootball GitHub (historical data, updated daily)
        async function fetchFromOpenFootball() {
            const allMatches = [];

            // Fetch all leagues in parallel
            const leaguePromises = CONFIG.LEAGUES.map(async (league) => {
                try {
                    const response = await fetch(`${CONFIG.OPENFOOTBALL_URL}/${league.file}`);
                    if (!response.ok) {
                        console.warn(`Failed to fetch ${league.name}`);
                        return [];
                    }

                    const data = await response.json();
                    const matches = [];

                    // Parse matches - structure is { matches: [...] }
                    if (data.matches && Array.isArray(data.matches)) {
                        data.matches.forEach(match => {
                            const matchDate = new Date(match.date + 'T' + (match.time || '15:00'));
                            const hasScore = match.score && match.score.ft;

                            matches.push({
                                date: matchDate,
                                time: match.time || '15:00',
                                home: match.team1,
                                away: match.team2,
                                competition: league.name,
                                channel: league.channel,
                                score: hasScore ? `${match.score.ft[0]}-${match.score.ft[1]}` : null,
                                live: false,
                                status: hasScore ? 'FINISHED' : 'SCHEDULED'
                            });
                        });
                    }

                    console.log(`Loaded ${matches.length} matches from ${league.name}`);
                    return matches;
                } catch (error) {
                    console.error(`Error fetching ${league.name}:`, error);
                    return [];
                }
            });

            const results = await Promise.all(leaguePromises);
            results.forEach(matches => allMatches.push(...matches));

            console.log(`Total matches loaded: ${allMatches.length}`);

            // Filter to show only matches within 2 weeks range
            const today = new Date();
            const twoWeeksAgo = new Date(today);
            twoWeeksAgo.setDate(twoWeeksAgo.getDate() - 14);
            const twoWeeksAhead = new Date(today);
            twoWeeksAhead.setDate(twoWeeksAhead.getDate() + 14);

            const filtered = allMatches.filter(match =>
                match.date >= twoWeeksAgo && match.date <= twoWeeksAhead
            );

            console.log(`Matches in date range: ${filtered.length}`);
            return filtered;
        }

        // Fetch darts events from TheSportsDB
        async function fetchDartsEvents() {
            console.log('Fetching darts events from TheSportsDB...');
            const allEvents = [];

            try {
                // Fetch next 15 events for PDC Darts
                const nextResponse = await fetch(`${CONFIG.THESPORTSDB_URL}/eventsnextleague.php?id=${CONFIG.DARTS_LEAGUE_ID}`);
                if (nextResponse.ok) {
                    const nextData = await nextResponse.json();
                    if (nextData.events) {
                        nextData.events.forEach(event => {
                            const eventDate = new Date(event.dateEvent + 'T' + (event.strTime || '19:30:00'));
                            allEvents.push({
                                date: eventDate,
                                time: event.strTime ? event.strTime.substring(0, 5) : '19:30',
                                title: event.strEvent,
                                location: event.strVenue || event.strCountry || '',
                                competition: event.strLeague || 'PDC Darts',
                                channel: 'Viaplay',
                                homePlayer: event.strHomeTeam,
                                awayPlayer: event.strAwayTeam,
                                homeBadge: event.strHomeTeamBadge,
                                awayBadge: event.strAwayTeamBadge,
                                score: null,
                                live: false,
                                status: 'SCHEDULED'
                            });
                        });
                    }
                }

                // Fetch last 15 events (past results)
                const pastResponse = await fetch(`${CONFIG.THESPORTSDB_URL}/eventspastleague.php?id=${CONFIG.DARTS_LEAGUE_ID}`);
                if (pastResponse.ok) {
                    const pastData = await pastResponse.json();
                    if (pastData.events) {
                        pastData.events.forEach(event => {
                            const eventDate = new Date(event.dateEvent + 'T' + (event.strTime || '19:30:00'));
                            const hasScore = event.intHomeScore !== null && event.intAwayScore !== null;
                            allEvents.push({
                                date: eventDate,
                                time: event.strTime ? event.strTime.substring(0, 5) : '19:30',
                                title: event.strEvent,
                                location: event.strVenue || event.strCountry || '',
                                competition: event.strLeague || 'PDC Darts',
                                channel: 'Viaplay',
                                homePlayer: event.strHomeTeam,
                                awayPlayer: event.strAwayTeam,
                                homeBadge: event.strHomeTeamBadge,
                                awayBadge: event.strAwayTeamBadge,
                                score: hasScore ? `${event.intHomeScore}-${event.intAwayScore}` : null,
                                live: false,
                                status: hasScore ? 'FINISHED' : 'SCHEDULED'
                            });
                        });
                    }
                }

                console.log(`Got ${allEvents.length} darts events from TheSportsDB`);
                return allEvents;

            } catch (error) {
                console.error('TheSportsDB Darts API failed:', error);
                // Fallback to static calendar
                return getStaticDartsEvents();
            }
        }

        // Get static darts events as fallback
        function getStaticDartsEvents() {
            const events = [];
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            for (let i = -7; i < 365; i++) {
                const date = new Date(today);
                date.setDate(date.getDate() + i);
                const dateStr = date.toISOString().split('T')[0];

                dartsCalendar
                    .filter(event => event.date === dateStr)
                    .forEach(event => {
                        events.push({
                            date: new Date(event.date + 'T' + event.time),
                            time: event.time,
                            title: event.event,
                            location: event.location,
                            competition: event.event,
                            channel: event.channel,
                            matches: event.matches || null,
                            score: null,
                            live: isLiveNow(event.date + 'T' + event.time, null, 3)
                        });
                    });
            }
            return events;
        }

        // Check if event is live now
        function isLiveNow(startTime, endTime, durationHours = 2) {
            const now = new Date();
            const start = new Date(startTime);
            const end = endTime ? new Date(endTime) : new Date(start.getTime() + durationHours * 60 * 60 * 1000);
            return now >= start && now <= end;
        }

        // ============================================
        // RENDER FUNCTIONS
        // ============================================

        function formatDate(date) {
            const days = ['Zondag', 'Maandag', 'Dinsdag', 'Woensdag', 'Donderdag', 'Vrijdag', 'Zaterdag'];
            const months = ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december'];

            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const compareDate = new Date(date);
            compareDate.setHours(0, 0, 0, 0);

            const diffDays = Math.round((compareDate - today) / (1000 * 60 * 60 * 24));

            if (diffDays === 0) return 'Vandaag';
            if (diffDays === 1) return 'Morgen';
            if (diffDays === -1) return 'Gisteren';

            return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;
        }

        function isSameDay(date1, date2) {
            return date1.getFullYear() === date2.getFullYear() &&
                   date1.getMonth() === date2.getMonth() &&
                   date1.getDate() === date2.getDate();
        }

        function showLoading() {
            const container = document.getElementById('events-container');
            container.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Wedstrijden ophalen...</p>
                </div>
            `;
        }

        function showError(message) {
            const container = document.getElementById('events-container');
            container.innerHTML = `
                <div class="error-message">
                    <p>${message}</p>
                </div>
            `;
        }

        async function renderEvents() {
            const container = document.getElementById('events-container');
            container.className = `events-container sport-${currentSport}${showScores ? ' show-scores' : ''}`;

            showLoading();

            let allEvents = [];
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            try {
                if (currentSport === 'f1') {
                    if (!cachedData.f1) {
                        cachedData.f1 = await fetchF1Sessions();
                    }
                    allEvents = cachedData.f1;
                } else if (currentSport === 'voetbal') {
                    if (!cachedData.voetbal) {
                        cachedData.voetbal = await fetchFootballMatches();
                    }
                    // Make sure we have an array
                    const matches = cachedData.voetbal || [];
                    console.log(`Totaal ${matches.length} wedstrijden opgehaald`);
                    console.log('Actieve filters:', filters);

                    allEvents = matches.filter(e => {
                        // Filter by competitions (if any selected)
                        if (filters.competitions && filters.competitions.length > 0) {
                            if (!filters.competitions.includes(e.competition)) return false;
                        }

                        // Filter by clubs (if any specified)
                        if (filters.clubs && filters.clubs.length > 0) {
                            const homeMatch = filters.clubs.some(club =>
                                e.home && e.home.toLowerCase().includes(club.toLowerCase()));
                            const awayMatch = filters.clubs.some(club =>
                                e.away && e.away.toLowerCase().includes(club.toLowerCase()));
                            if (!homeMatch && !awayMatch) return false;
                        }

                        return true;
                    });
                    console.log(`Na filtering: ${allEvents.length} wedstrijden`);
                } else if (currentSport === 'darts') {
                    // Use static calendar (TheSportsDB returns incorrect data)
                    if (!cachedData.darts) {
                        cachedData.darts = getStaticDartsEvents();
                    }
                    allEvents = cachedData.darts;
                }
            } catch (error) {
                showError('Kon data niet ophalen. Probeer het later opnieuw.');
                return;
            }

            // Update API status
            const statusEl = document.getElementById('api-status');
            const source = localStorage.getItem('footballSource') || 'api';
            if (currentSport === 'voetbal') {
                if (allEvents.length === 0) {
                    statusEl.innerHTML = '<span class="live-dot" style="background: #e10600;"></span> Geen data beschikbaar';
                } else if (source === 'static') {
                    statusEl.innerHTML = '<span class="live-dot" style="background: #ff9800;"></span> Fallback data (API limiet)';
                } else if (source === 'cache') {
                    statusEl.innerHTML = '<span class="live-dot" style="background: #ff9800;"></span> Gecachede data';
                } else {
                    statusEl.innerHTML = '<span class="live-dot"></span> API-Football';
                }
            } else if (currentSport === 'f1') {
                statusEl.innerHTML = '<span class="live-dot"></span> OpenF1';
            } else if (currentSport === 'darts') {
                statusEl.innerHTML = '<span class="live-dot" style="background: #ff9800;"></span> PDC Kalender';
            }

            // Filter events based on date range (different per sport)
            const pastDays = currentSport === 'voetbal' ? 3 : 7; // 3 days for football, 7 for darts/F1
            const pastDate = new Date(today);
            pastDate.setDate(pastDate.getDate() - pastDays);
            const twoWeeksAhead = new Date(today);
            twoWeeksAhead.setDate(twoWeeksAhead.getDate() + 14);

            const filteredEvents = allEvents.filter(e => {
                const eventDate = new Date(e.date);
                eventDate.setHours(0, 0, 0, 0);

                // Always show future events (from today onwards)
                if (eventDate >= today) return true;

                // Show past events only if toggle is active
                if (showPast && eventDate >= pastDate) return true;

                return false;
            });

            // Group events by date
            const eventsByDate = {};
            filteredEvents.forEach(event => {
                const dateKey = event.date.toISOString().split('T')[0];
                if (!eventsByDate[dateKey]) {
                    eventsByDate[dateKey] = [];
                }
                eventsByDate[dateKey].push(event);
            });

            // Sort dates
            const sortedDates = Object.keys(eventsByDate).sort();

            if (sortedDates.length === 0) {
                const sportNames = { voetbal: 'voetbal', darts: 'darts', f1: 'Formule 1' };
                const icons = { voetbal: '&#9917;', darts: '&#127919;', f1: '&#127959;' };
                container.innerHTML = `
                    <div class="no-events">
                        <div class="icon">${icons[currentSport]}</div>
                        <h3>Geen ${sportNames[currentSport]} gevonden</h3>
                        <p>Er zijn geen uitzendingen gevonden voor de komende periode.</p>
                    </div>
                `;
                return;
            }

            let html = '';
            let todayAnchorSet = false;

            sortedDates.forEach(dateKey => {
                const events = eventsByDate[dateKey];
                const eventDate = new Date(dateKey + 'T12:00:00');
                const isToday = isSameDay(eventDate, today);
                const isPast = eventDate < today;

                // Add anchor for today
                const todayAnchor = isToday && !todayAnchorSet ? 'id="today-anchor"' : '';
                if (isToday) todayAnchorSet = true;

                html += `<div class="day-section ${isPast ? 'past-day' : ''}" ${todayAnchor}>
                    <h2 class="day-header">${isToday ? 'Vandaag' : formatDate(eventDate)}</h2>`;

                events.sort((a, b) => a.time.localeCompare(b.time)).forEach(event => {
                    let titleHtml = '';
                    if (currentSport === 'voetbal') {
                        // Gebruik API crest of lokaal logo als fallback
                        const homeLogoSrc = event.homeCrest || CONFIG.CLUB_LOGOS[event.home];
                        const awayLogoSrc = event.awayCrest || CONFIG.CLUB_LOGOS[event.away];
                        const homeCrest = homeLogoSrc ? `<img src="${homeLogoSrc}" class="club-logo" onerror="this.style.display='none'" alt="">` : '';
                        const awayCrest = awayLogoSrc ? `<img src="${awayLogoSrc}" class="club-logo" onerror="this.style.display='none'" alt="">` : '';
                        titleHtml = `${homeCrest}<span class="team-name">${event.home}</span> - <span class="team-name">${event.away}</span>${awayCrest}`;
                    } else if (currentSport === 'f1') {
                        titleHtml = event.title;
                    } else if (currentSport === 'darts') {
                        titleHtml = event.title;
                        if (event.location) {
                            titleHtml += ` <span style="color:#888;font-size:0.9em;">- ${event.location}</span>`;
                        }
                        if (event.matches && event.matches.length > 0) {
                            titleHtml += `<span class="expand-icon">▼</span>`;
                        }
                    }

                    const scoreText = event.score || '-';
                    const liveHtml = event.live ? `<span class="live-badge">LIVE</span>` : '';
                    const channelLogo = CONFIG.CHANNEL_LOGOS[event.channel];
                    const channelHtml = channelLogo
                        ? `<img src="${channelLogo}" class="channel-logo" onerror="this.outerHTML='<span class=\\'channel-text\\'>${event.channel}</span>'" alt="${event.channel}">`
                        : `<span class="channel-text">${event.channel}</span>`;

                    const hasMatches = event.matches && event.matches.length > 0;
                    let matchesHtml = '';
                    if (hasMatches) {
                        matchesHtml = '<div class="matches-list">';
                        event.matches.forEach(m => {
                            const homePlayer = dartsPlayers[m.home] || {name: m.home};
                            const awayPlayer = dartsPlayers[m.away] || {name: m.away};
                            const timeStr = m.time ? `<span class="match-time">${m.time}</span>` : '';
                            if (m.away) {
                                matchesHtml += `<div class="match-item">${timeStr}${homePlayer.name}<span class="vs">-</span>${awayPlayer.name}</div>`;
                            } else {
                                matchesHtml += `<div class="match-item">${timeStr}${homePlayer.name}</div>`;
                            }
                        });
                        matchesHtml += '</div>';
                    }

                    html += `
                        <div class="event-card ${isPast ? 'past-event' : ''} ${hasMatches ? 'has-matches' : ''}">
                            <div class="event-time">${event.time}</div>
                            <div class="event-details">
                                <div class="event-title">
                                    ${titleHtml}
                                    ${liveHtml}
                                </div>
                                <div class="event-meta">
                                    <span class="competition-badge">${event.competition}</span>
                                    ${event.circuit ? `<span>${event.circuit}</span>` : ''}
                                </div>
                            </div>
                            <div class="event-score-col ${event.score ? '' : 'no-score'}">${scoreText}</div>
                            <div class="event-channel">${channelHtml}</div>
                            ${matchesHtml}
                        </div>
                    `;
                });

                html += '</div>';
            });

            container.innerHTML = html;

            if (showScores) {
                container.classList.add('show-scores');
            }

            // Scroll to today if showing past events
            if (showPast) {
                const todayEl = document.getElementById('today-anchor');
                if (todayEl) {
                    todayEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }

            // Add click handlers for expandable darts cards (accordion behavior)
            container.querySelectorAll('.event-card.has-matches').forEach(card => {
                card.addEventListener('click', () => {
                    const wasExpanded = card.classList.contains('expanded');
                    // Close all other expanded cards
                    container.querySelectorAll('.event-card.expanded').forEach(c => {
                        c.classList.remove('expanded');
                    });
                    // Toggle clicked card (if it was closed, open it)
                    if (!wasExpanded) {
                        card.classList.add('expanded');
                    }
                });
            });
        }

        // Render standings
        async function renderStandings() {
            const tabsContainer = document.getElementById('standings-tabs');
            const contentContainer = document.getElementById('standings-content');

            if (currentSport === 'voetbal') {
                // Football standings - show tabs for each league
                const leagues = [
                    { id: 88, name: 'Eredivisie' },
                    { id: 39, name: 'Premier League' },
                    { id: 78, name: 'Bundesliga' },
                    { id: 140, name: 'La Liga' },
                    { id: 135, name: 'Serie A' },
                    { id: 61, name: 'Ligue 1' },
                    { id: 2, name: 'Champions League' },
                    { id: 'wk2026', name: 'WK 2026' }
                ];

                tabsContainer.innerHTML = leagues.map((l, i) =>
                    `<button class="standings-tab ${i === 0 ? 'active' : ''}" data-league="${l.id}">${l.name}</button>`
                ).join('');

                contentContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Stand ophalen...</p></div>';

                // Load first league
                await loadFootballStandings(leagues[0].id, leagues[0].name);

                // Add tab handlers
                tabsContainer.querySelectorAll('.standings-tab').forEach(tab => {
                    tab.addEventListener('click', async () => {
                        tabsContainer.querySelectorAll('.standings-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        const leagueId = tab.dataset.league;
                        // Handle both numeric IDs and string IDs (like 'wk2026')
                        const league = leagues.find(l => String(l.id) === leagueId);
                        if (league) {
                            await loadFootballStandings(league.id, league.name);
                        }
                    });
                });

            } else if (currentSport === 'darts') {
                tabsContainer.innerHTML = '<button class="standings-tab active">Premier League</button>';
                contentContainer.innerHTML = renderDartsStandings();

            } else if (currentSport === 'f1') {
                tabsContainer.innerHTML = `
                    <button class="standings-tab active" data-type="drivers">Coureurs</button>
                    <button class="standings-tab" data-type="constructors">Constructeurs</button>
                `;
                contentContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Stand ophalen...</p></div>';

                const f1Data = await fetchF1Standings();
                renderF1Standings(f1Data, 'drivers');

                tabsContainer.querySelectorAll('.standings-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        tabsContainer.querySelectorAll('.standings-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        renderF1Standings(f1Data, tab.dataset.type);
                    });
                });
            }
        }

        async function loadFootballStandings(leagueId, leagueName) {
            const contentContainer = document.getElementById('standings-content');

            // Special case: WK 2026 groups
            if (leagueId === 'wk2026') {
                contentContainer.innerHTML = renderWK2026Groups();
                return;
            }

            contentContainer.innerHTML = '<div class="loading"><div class="spinner"></div><p>Stand ophalen...</p></div>';

            const standings = await fetchFootballStandings(leagueId);
            console.log(`Standings for ${leagueName} (${leagueId}):`, standings);

            if (!standings || standings.length === 0) {
                console.warn(`No standings data for ${leagueName}`);
                contentContainer.innerHTML = '<div class="no-events"><p>Geen stand beschikbaar</p></div>';
                return;
            }

            // Check if using cached/static data
            const cacheKey = `standings_${leagueId}`;
            const cacheTime = localStorage.getItem(cacheKey + '_time');
            const isStatic = !cacheTime;

            let html = `<div class="standings-container">
                <div class="standings-title">${leagueName}${isStatic ? ' <span style="font-size:0.7em;color:#999;">(snapshot)</span>' : ''}</div>
                <table class="standings-table">
                    <tr><th class="pos">#</th><th>Club</th><th class="stats">W</th><th class="stats">G</th><th class="stats">V</th><th class="stats">+/-</th><th class="pts">Ptn</th></tr>`;

            standings.forEach(team => {
                const logo = team.team.logo ? `<img src="${team.team.logo}" class="team-logo" alt="">` : '';
                html += `<tr>
                    <td class="pos">${team.rank}</td>
                    <td><div class="team">${logo}${team.team.name}</div></td>
                    <td class="stats">${team.all.win}</td>
                    <td class="stats">${team.all.draw}</td>
                    <td class="stats">${team.all.lose}</td>
                    <td class="stats">${team.goalsDiff > 0 ? '+' : ''}${team.goalsDiff}</td>
                    <td class="pts">${team.points}</td>
                </tr>`;
            });

            html += '</table></div>';
            contentContainer.innerHTML = html;
        }

        function renderDartsStandings() {
            let html = `<div class="standings-container">
                <div class="standings-title">Premier League Darts 2026 <span style="font-size:0.7em;color:#999;">(na Night 1)</span></div>
                <table class="standings-table">
                    <tr><th class="pos">#</th><th>Speler</th><th class="stats">GS</th><th class="stats">HF</th><th class="stats">F</th><th class="stats">W</th><th class="pts">Ptn</th></tr>`;

            plDartsStandings.forEach(player => {
                html += `<tr>
                    <td class="pos">${player.pos}</td>
                    <td>${player.name}</td>
                    <td class="stats">${player.played}</td>
                    <td class="stats">${player.sf}</td>
                    <td class="stats">${player.f}</td>
                    <td class="stats">${player.w}</td>
                    <td class="pts">${player.pts}</td>
                </tr>`;
            });

            html += '</table></div>';
            return html;
        }

        function renderF1Standings(data, type) {
            const contentContainer = document.getElementById('standings-content');

            if (type === 'drivers') {
                if (!data.drivers.length) {
                    contentContainer.innerHTML = '<div class="no-events"><p>Kon coureurs stand niet ophalen</p></div>';
                    return;
                }

                let html = `<div class="standings-container">
                    <div class="standings-title">F1 Coureurs Kampioenschap 2026</div>
                    <table class="standings-table">
                        <tr><th class="pos">#</th><th>Coureur</th><th>Team</th><th class="pts">Ptn</th></tr>`;

                data.drivers.forEach(d => {
                    html += `<tr>
                        <td class="pos">${d.position}</td>
                        <td>${d.Driver.givenName} ${d.Driver.familyName}</td>
                        <td>${d.Constructors[0]?.name || ''}</td>
                        <td class="pts">${d.points}</td>
                    </tr>`;
                });

                html += '</table></div>';
                contentContainer.innerHTML = html;

            } else {
                if (!data.constructors.length) {
                    contentContainer.innerHTML = '<div class="no-events"><p>Kon constructeurs stand niet ophalen</p></div>';
                    return;
                }

                let html = `<div class="standings-container">
                    <div class="standings-title">F1 Constructeurs Kampioenschap 2026</div>
                    <table class="standings-table">
                        <tr><th class="pos">#</th><th>Team</th><th class="pts">Ptn</th></tr>`;

                data.constructors.forEach(c => {
                    html += `<tr>
                        <td class="pos">${c.position}</td>
                        <td>${c.Constructor.name}</td>
                        <td class="pts">${c.points}</td>
                    </tr>`;
                });

                html += '</table></div>';
                contentContainer.innerHTML = html;
            }
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================

        function updateFilterVisibility() {
            const filtersRow = document.getElementById('filters-row');
            const compDropdown = document.getElementById('comp-dropdown');
            const clubInput = document.getElementById('filter-clubs');
            const resetBtn = document.getElementById('reset-filters');
            const scoresToggle = document.getElementById('scores-toggle-wrapper');

            if (currentSport === 'voetbal') {
                filtersRow.style.display = 'flex';
                compDropdown.style.display = 'block';
                clubInput.style.display = 'block';
                resetBtn.style.display = 'block';
                scoresToggle.style.display = 'flex';
            } else {
                // Hide filters and scores toggle for darts and F1
                filtersRow.style.display = 'flex';
                compDropdown.style.display = 'none';
                clubInput.style.display = 'none';
                resetBtn.style.display = 'none';
                scoresToggle.style.display = 'none';
            }
        }

        document.querySelectorAll('.sport-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.sport-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentSport = tab.dataset.sport;
                updateFilterVisibility();
                if (currentView === 'standen') {
                    renderStandings();
                } else {
                    renderEvents();
                }
            });
        });

        // View toggle (Programma / Standen)
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentView = btn.dataset.view;

                const eventsContainer = document.getElementById('events-container');
                const standingsWrapper = document.getElementById('standings-wrapper');

                if (currentView === 'standen') {
                    eventsContainer.style.display = 'none';
                    standingsWrapper.style.display = 'block';
                    renderStandings();
                } else {
                    eventsContainer.style.display = 'block';
                    standingsWrapper.style.display = 'none';
                    renderEvents();
                }
            });
        });

        document.getElementById('toggle-past').addEventListener('change', function() {
            showPast = this.checked;
            renderEvents();
        });

        document.getElementById('toggle-scores').addEventListener('change', function() {
            showScores = this.checked;
            document.getElementById('events-container').classList.toggle('show-scores', showScores);
        });


        // Competition dropdown
        const compBtn = document.getElementById('comp-btn');
        const compContent = document.getElementById('comp-content');
        const compCheckboxes = compContent.querySelectorAll('input[type="checkbox"]');

        // Set initial state from localStorage
        compCheckboxes.forEach(cb => {
            cb.checked = filters.competitions.includes(cb.value);
        });
        updateCompBtnText();

        // Toggle dropdown
        compBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            compContent.classList.toggle('show');
        });

        // Handle checkbox changes
        compCheckboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                filters.competitions = Array.from(compCheckboxes)
                    .filter(c => c.checked)
                    .map(c => c.value);
                localStorage.setItem('selectedCompetitions', JSON.stringify(filters.competitions));
                updateCompBtnText();
                renderEvents();
            });
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!compContent.contains(e.target) && e.target !== compBtn) {
                compContent.classList.remove('show');
            }
        });

        function updateCompBtnText() {
            const count = filters.competitions.length;
            if (count === 0) {
                compBtn.textContent = 'Alle competities ▾';
            } else if (count === 1) {
                compBtn.textContent = filters.competitions[0] + ' ▾';
            } else {
                compBtn.textContent = `${count} competities ▾`;
            }
        }

        // Club filter with debounce (comma separated)
        let clubFilterTimeout;
        const clubInput = document.getElementById('filter-clubs');
        clubInput.value = (filters.clubs || []).join(', ');

        clubInput.addEventListener('input', () => {
            clearTimeout(clubFilterTimeout);
            clubFilterTimeout = setTimeout(() => {
                const value = clubInput.value;
                filters.clubs = value ? value.split(',').map(c => c.trim()).filter(c => c) : [];
                localStorage.setItem('selectedClubs', JSON.stringify(filters.clubs));
                renderEvents();
            }, 300);
        });

        // Reset filters button
        document.getElementById('reset-filters').addEventListener('click', () => {
            // Clear competitions
            filters.competitions = [];
            if (compCheckboxes) compCheckboxes.forEach(cb => cb.checked = false);
            updateCompBtnText();
            localStorage.removeItem('selectedCompetitions');

            // Clear clubs
            filters.clubs = [];
            if (clubInput) clubInput.value = '';
            localStorage.removeItem('selectedClubs');

            // Reset toggles
            document.getElementById('toggle-past').checked = false;
            document.getElementById('toggle-scores').checked = false;
            showPast = false;
            showScores = false;
            document.getElementById('events-container').classList.remove('show-scores');

            renderEvents();
        });


        // ============================================
        // INITIALIZATION
        // ============================================
        updateFilterVisibility();
        renderEvents();

        // Auto-refresh every 5 minutes
        setInterval(() => {
            cachedData = { voetbal: null, darts: null, f1: null };
            renderEvents();
        }, 5 * 60 * 1000);
    </script>
</body>
</html>
